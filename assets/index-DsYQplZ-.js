(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dr(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const Ct={},Ge=[],re=()=>{},Co=()=>!1,Sn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ur=t=>t.startsWith("onUpdate:"),It=Object.assign,fr=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},La=Object.prototype.hasOwnProperty,yt=(t,e)=>La.call(t,e),ht=Array.isArray,De=t=>Cn(t)==="[object Map]",xo=t=>Cn(t)==="[object Set]",ct=t=>typeof t=="function",Et=t=>typeof t=="string",xe=t=>typeof t=="symbol",Tt=t=>t!==null&&typeof t=="object",wo=t=>(Tt(t)||ct(t))&&ct(t.then)&&ct(t.catch),Po=Object.prototype.toString,Cn=t=>Po.call(t),Ga=t=>Cn(t).slice(8,-1),To=t=>Cn(t)==="[object Object]",gr=t=>Et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Li=dr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xn=t=>{const e=Object.create(null);return(i=>e[i]||(e[i]=t(i)))},Da=/-(\w)/g,Jt=xn(t=>t.replace(Da,(e,i)=>i?i.toUpperCase():"")),Ia=/\B([A-Z])/g,Fe=xn(t=>t.replace(Ia,"-$1").toLowerCase()),wn=xn(t=>t.charAt(0).toUpperCase()+t.slice(1)),On=xn(t=>t?`on${wn(t)}`:""),be=(t,e)=>!Object.is(t,e),Nn=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},Ao=(t,e,i,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:i})},Ua=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vr;const Pn=()=>Vr||(Vr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ce(t){if(ht(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],r=Et(n)?Wa(n):ce(n);if(r)for(const s in r)e[s]=r[s]}return e}else if(Et(t)||Tt(t))return t}const Ba=/;(?![^(]*\))/g,Va=/:([^]+)/,Ha=/\/\*[^]*?\*\//g;function Wa(t){const e={};return t.replace(Ha,"").split(Ba).forEach(i=>{if(i){const n=i.split(Va);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function $i(t){let e="";if(Et(t))e=t;else if(ht(t))for(let i=0;i<t.length;i++){const n=$i(t[i]);n&&(e+=n+" ")}else if(Tt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const qa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ja=dr(qa);function Ro(t){return!!t||t===""}const Eo=t=>!!(t&&t.__v_isRef===!0),pr=t=>Et(t)?t:t==null?"":ht(t)||Tt(t)&&(t.toString===Po||!ct(t.toString))?Eo(t)?pr(t.value):JSON.stringify(t,Mo,2):String(t),Mo=(t,e)=>Eo(e)?Mo(t,e.value):De(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,r],s)=>(i[Ln(n,s)+" =>"]=r,i),{})}:xo(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>Ln(i))}:xe(e)?Ln(e):Tt(e)&&!ht(e)&&!To(e)?String(e):e,Ln=(t,e="")=>{var i;return xe(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jt;class za{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=jt,!e&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=jt;try{return jt=this,e()}finally{jt=i}}}on(){++this._on===1&&(this.prevScope=jt,jt=this)}off(){this._on>0&&--this._on===0&&(jt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ka(){return jt}let St;const Gn=new WeakSet;class Fo{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,jt&&jt.active&&jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gn.has(this)&&(Gn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Oo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hr(this),No(this);const e=St,i=te;St=this,te=!0;try{return this.fn()}finally{Lo(this),St=e,te=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)yr(e);this.deps=this.depsTail=void 0,Hr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){tr(this)&&this.run()}get dirty(){return tr(this)}}let ko=0,Gi,Di;function Oo(t,e=!1){if(t.flags|=8,e){t.next=Di,Di=t;return}t.next=Gi,Gi=t}function _r(){ko++}function mr(){if(--ko>0)return;if(Di){let e=Di;for(Di=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;Gi;){let e=Gi;for(Gi=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=i}}if(t)throw t}function No(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Lo(t){let e,i=t.depsTail,n=i;for(;n;){const r=n.prevDep;n.version===-1?(n===i&&(i=r),yr(n),Ya(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=i}function tr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Go(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Go(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Hi)||(t.globalVersion=Hi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!tr(t))))return;t.flags|=2;const e=t.dep,i=St,n=te;St=t,te=!0;try{No(t);const r=t.fn(t._value);(e.version===0||be(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{St=i,te=n,Lo(t),t.flags&=-3}}function yr(t,e=!1){const{dep:i,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),i.subs===t&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)yr(s,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function Ya(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let te=!0;const Do=[];function ue(){Do.push(te),te=!1}function fe(){const t=Do.pop();te=t===void 0?!0:t}function Hr(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=St;St=void 0;try{e()}finally{St=i}}}let Hi=0;class Xa{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!St||!te||St===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==St)i=this.activeLink=new Xa(St,this),St.deps?(i.prevDep=St.depsTail,St.depsTail.nextDep=i,St.depsTail=i):St.deps=St.depsTail=i,Io(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=St.depsTail,i.nextDep=void 0,St.depsTail.nextDep=i,St.depsTail=i,St.deps===i&&(St.deps=n)}return i}trigger(e){this.version++,Hi++,this.notify(e)}notify(e){_r();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{mr()}}}function Io(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Io(n)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const er=new WeakMap,Me=Symbol(""),ir=Symbol(""),Wi=Symbol("");function Lt(t,e,i){if(te&&St){let n=er.get(t);n||er.set(t,n=new Map);let r=n.get(i);r||(n.set(i,r=new vr),r.map=n,r.key=i),r.track()}}function de(t,e,i,n,r,s){const a=er.get(t);if(!a){Hi++;return}const o=l=>{l&&l.trigger()};if(_r(),e==="clear")a.forEach(o);else{const l=ht(t),u=l&&gr(i);if(l&&i==="length"){const c=Number(n);a.forEach((_,p)=>{(p==="length"||p===Wi||!xe(p)&&p>=c)&&o(_)})}else switch((i!==void 0||a.has(void 0))&&o(a.get(i)),u&&o(a.get(Wi)),e){case"add":l?u&&o(a.get("length")):(o(a.get(Me)),De(t)&&o(a.get(ir)));break;case"delete":l||(o(a.get(Me)),De(t)&&o(a.get(ir)));break;case"set":De(t)&&o(a.get(Me));break}}mr()}function ke(t){const e=mt(t);return e===t?e:(Lt(e,"iterate",Wi),$t(t)?e:e.map(Ft))}function Tn(t){return Lt(t=mt(t),"iterate",Wi),t}const $a={__proto__:null,[Symbol.iterator](){return Dn(this,Symbol.iterator,Ft)},concat(...t){return ke(this).concat(...t.map(e=>ht(e)?ke(e):e))},entries(){return Dn(this,"entries",t=>(t[1]=Ft(t[1]),t))},every(t,e){return oe(this,"every",t,e,void 0,arguments)},filter(t,e){return oe(this,"filter",t,e,i=>i.map(Ft),arguments)},find(t,e){return oe(this,"find",t,e,Ft,arguments)},findIndex(t,e){return oe(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return oe(this,"findLast",t,e,Ft,arguments)},findLastIndex(t,e){return oe(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return oe(this,"forEach",t,e,void 0,arguments)},includes(...t){return In(this,"includes",t)},indexOf(...t){return In(this,"indexOf",t)},join(t){return ke(this).join(t)},lastIndexOf(...t){return In(this,"lastIndexOf",t)},map(t,e){return oe(this,"map",t,e,void 0,arguments)},pop(){return je(this,"pop")},push(...t){return je(this,"push",t)},reduce(t,...e){return Wr(this,"reduce",t,e)},reduceRight(t,...e){return Wr(this,"reduceRight",t,e)},shift(){return je(this,"shift")},some(t,e){return oe(this,"some",t,e,void 0,arguments)},splice(...t){return je(this,"splice",t)},toReversed(){return ke(this).toReversed()},toSorted(t){return ke(this).toSorted(t)},toSpliced(...t){return ke(this).toSpliced(...t)},unshift(...t){return je(this,"unshift",t)},values(){return Dn(this,"values",Ft)}};function Dn(t,e,i){const n=Tn(t),r=n[e]();return n!==t&&!$t(t)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=i(s.value)),s}),r}const Ja=Array.prototype;function oe(t,e,i,n,r,s){const a=Tn(t),o=a!==t&&!$t(t),l=a[e];if(l!==Ja[e]){const _=l.apply(t,s);return o?Ft(_):_}let u=i;a!==t&&(o?u=function(_,p){return i.call(this,Ft(_),p,t)}:i.length>2&&(u=function(_,p){return i.call(this,_,p,t)}));const c=l.call(a,u,n);return o&&r?r(c):c}function Wr(t,e,i,n){const r=Tn(t);let s=i;return r!==t&&($t(t)?i.length>3&&(s=function(a,o,l){return i.call(this,a,o,l,t)}):s=function(a,o,l){return i.call(this,a,Ft(o),l,t)}),r[e](s,...n)}function In(t,e,i){const n=mt(t);Lt(n,"iterate",Wi);const r=n[e](...i);return(r===-1||r===!1)&&Cr(i[0])?(i[0]=mt(i[0]),n[e](...i)):r}function je(t,e,i=[]){ue(),_r();const n=mt(t)[e].apply(t,i);return mr(),fe(),n}const Qa=dr("__proto__,__v_isRef,__isVue"),Uo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xe));function Za(t){xe(t)||(t=String(t));const e=mt(this);return Lt(e,"has",t),e.hasOwnProperty(t)}class Bo{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,n){if(i==="__v_skip")return e.__v_skip;const r=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return s;if(i==="__v_raw")return n===(r?s?hl:qo:s?Wo:Ho).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=ht(e);if(!r){let l;if(a&&(l=$a[i]))return l;if(i==="hasOwnProperty")return Za}const o=Reflect.get(e,i,Dt(e)?e:n);return(xe(i)?Uo.has(i):Qa(i))||(r||Lt(e,"get",i),s)?o:Dt(o)?a&&gr(i)?o:o.value:Tt(o)?r?jo(o):Ji(o):o}}class Vo extends Bo{constructor(e=!1){super(!1,e)}set(e,i,n,r){let s=e[i];if(!this._isShallow){const l=Se(s);if(!$t(n)&&!Se(n)&&(s=mt(s),n=mt(n)),!ht(e)&&Dt(s)&&!Dt(n))return l||(s.value=n),!0}const a=ht(e)&&gr(i)?Number(i)<e.length:yt(e,i),o=Reflect.set(e,i,n,Dt(e)?e:r);return e===mt(r)&&(a?be(n,s)&&de(e,"set",i,n):de(e,"add",i,n)),o}deleteProperty(e,i){const n=yt(e,i);e[i];const r=Reflect.deleteProperty(e,i);return r&&n&&de(e,"delete",i,void 0),r}has(e,i){const n=Reflect.has(e,i);return(!xe(i)||!Uo.has(i))&&Lt(e,"has",i),n}ownKeys(e){return Lt(e,"iterate",ht(e)?"length":Me),Reflect.ownKeys(e)}}class tl extends Bo{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const el=new Vo,il=new tl,nl=new Vo(!0);const nr=t=>t,en=t=>Reflect.getPrototypeOf(t);function rl(t,e,i){return function(...n){const r=this.__v_raw,s=mt(r),a=De(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=r[t](...n),c=i?nr:e?cn:Ft;return!e&&Lt(s,"iterate",l?ir:Me),{next(){const{value:_,done:p}=u.next();return p?{value:_,done:p}:{value:o?[c(_[0]),c(_[1])]:c(_),done:p}},[Symbol.iterator](){return this}}}}function nn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function sl(t,e){const i={get(r){const s=this.__v_raw,a=mt(s),o=mt(r);t||(be(r,o)&&Lt(a,"get",r),Lt(a,"get",o));const{has:l}=en(a),u=e?nr:t?cn:Ft;if(l.call(a,r))return u(s.get(r));if(l.call(a,o))return u(s.get(o));s!==a&&s.get(r)},get size(){const r=this.__v_raw;return!t&&Lt(mt(r),"iterate",Me),r.size},has(r){const s=this.__v_raw,a=mt(s),o=mt(r);return t||(be(r,o)&&Lt(a,"has",r),Lt(a,"has",o)),r===o?s.has(r):s.has(r)||s.has(o)},forEach(r,s){const a=this,o=a.__v_raw,l=mt(o),u=e?nr:t?cn:Ft;return!t&&Lt(l,"iterate",Me),o.forEach((c,_)=>r.call(s,u(c),u(_),a))}};return It(i,t?{add:nn("add"),set:nn("set"),delete:nn("delete"),clear:nn("clear")}:{add(r){!e&&!$t(r)&&!Se(r)&&(r=mt(r));const s=mt(this);return en(s).has.call(s,r)||(s.add(r),de(s,"add",r,r)),this},set(r,s){!e&&!$t(s)&&!Se(s)&&(s=mt(s));const a=mt(this),{has:o,get:l}=en(a);let u=o.call(a,r);u||(r=mt(r),u=o.call(a,r));const c=l.call(a,r);return a.set(r,s),u?be(s,c)&&de(a,"set",r,s):de(a,"add",r,s),this},delete(r){const s=mt(this),{has:a,get:o}=en(s);let l=a.call(s,r);l||(r=mt(r),l=a.call(s,r)),o&&o.call(s,r);const u=s.delete(r);return l&&de(s,"delete",r,void 0),u},clear(){const r=mt(this),s=r.size!==0,a=r.clear();return s&&de(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=rl(r,t,e)}),i}function br(t,e){const i=sl(t,e);return(n,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(yt(i,r)&&r in n?i:n,r,s)}const ol={get:br(!1,!1)},al={get:br(!1,!0)},ll={get:br(!0,!1)};const Ho=new WeakMap,Wo=new WeakMap,qo=new WeakMap,hl=new WeakMap;function cl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dl(t){return t.__v_skip||!Object.isExtensible(t)?0:cl(Ga(t))}function Ji(t){return Se(t)?t:Sr(t,!1,el,ol,Ho)}function ul(t){return Sr(t,!1,nl,al,Wo)}function jo(t){return Sr(t,!0,il,ll,qo)}function Sr(t,e,i,n,r){if(!Tt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=dl(t);if(s===0)return t;const a=r.get(t);if(a)return a;const o=new Proxy(t,s===2?n:i);return r.set(t,o),o}function Ie(t){return Se(t)?Ie(t.__v_raw):!!(t&&t.__v_isReactive)}function Se(t){return!!(t&&t.__v_isReadonly)}function $t(t){return!!(t&&t.__v_isShallow)}function Cr(t){return t?!!t.__v_raw:!1}function mt(t){const e=t&&t.__v_raw;return e?mt(e):t}function fl(t){return!yt(t,"__v_skip")&&Object.isExtensible(t)&&Ao(t,"__v_skip",!0),t}const Ft=t=>Tt(t)?Ji(t):t,cn=t=>Tt(t)?jo(t):t;function Dt(t){return t?t.__v_isRef===!0:!1}function Vt(t){return gl(t,!1)}function gl(t,e){return Dt(t)?t:new pl(t,e)}class pl{constructor(e,i){this.dep=new vr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:mt(e),this._value=i?e:Ft(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,n=this.__v_isShallow||$t(e)||Se(e);e=n?e:mt(e),be(e,i)&&(this._rawValue=e,this._value=n?e:Ft(e),this.dep.trigger())}}function Kt(t){return Dt(t)?t.value:t}const _l={get:(t,e,i)=>e==="__v_raw"?t:Kt(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const r=t[e];return Dt(r)&&!Dt(i)?(r.value=i,!0):Reflect.set(t,e,i,n)}};function zo(t){return Ie(t)?t:new Proxy(t,_l)}class ml{constructor(e,i,n){this.fn=e,this.setter=i,this._value=void 0,this.dep=new vr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Hi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&St!==this)return Oo(this,!0),!0}get value(){const e=this.dep.track();return Go(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function yl(t,e,i=!1){let n,r;return ct(t)?n=t:(n=t.get,r=t.set),new ml(n,r,i)}const rn={},dn=new WeakMap;let Re;function vl(t,e=!1,i=Re){if(i){let n=dn.get(i);n||dn.set(i,n=[]),n.push(t)}}function bl(t,e,i=Ct){const{immediate:n,deep:r,once:s,scheduler:a,augmentJob:o,call:l}=i,u=m=>r?m:$t(m)||r===!1||r===0?ve(m,1):ve(m);let c,_,p,d,g=!1,v=!1;if(Dt(t)?(_=()=>t.value,g=$t(t)):Ie(t)?(_=()=>u(t),g=!0):ht(t)?(v=!0,g=t.some(m=>Ie(m)||$t(m)),_=()=>t.map(m=>{if(Dt(m))return m.value;if(Ie(m))return u(m);if(ct(m))return l?l(m,2):m()})):ct(t)?e?_=l?()=>l(t,2):t:_=()=>{if(p){ue();try{p()}finally{fe()}}const m=Re;Re=c;try{return l?l(t,3,[d]):t(d)}finally{Re=m}}:_=re,e&&r){const m=_,b=r===!0?1/0:r;_=()=>ve(m(),b)}const S=Ka(),P=()=>{c.stop(),S&&S.active&&fr(S.effects,c)};if(s&&e){const m=e;e=(...b)=>{m(...b),P()}}let f=v?new Array(t.length).fill(rn):rn;const h=m=>{if(!(!(c.flags&1)||!c.dirty&&!m))if(e){const b=c.run();if(r||g||(v?b.some((T,N)=>be(T,f[N])):be(b,f))){p&&p();const T=Re;Re=c;try{const N=[b,f===rn?void 0:v&&f[0]===rn?[]:f,d];f=b,l?l(e,3,N):e(...N)}finally{Re=T}}}else c.run()};return o&&o(h),c=new Fo(_),c.scheduler=a?()=>a(h,!1):h,d=m=>vl(m,!1,c),p=c.onStop=()=>{const m=dn.get(c);if(m){if(l)l(m,4);else for(const b of m)b();dn.delete(c)}},e?n?h(!0):f=c.run():a?a(h.bind(null,!0),!0):c.run(),P.pause=c.pause.bind(c),P.resume=c.resume.bind(c),P.stop=P,P}function ve(t,e=1/0,i){if(e<=0||!Tt(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,Dt(t))ve(t.value,e,i);else if(ht(t))for(let n=0;n<t.length;n++)ve(t[n],e,i);else if(xo(t)||De(t))t.forEach(n=>{ve(n,e,i)});else if(To(t)){for(const n in t)ve(t[n],e,i);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&ve(t[n],e,i)}return t}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qi(t,e,i,n){try{return n?t(...n):t()}catch(r){An(r,e,i)}}function se(t,e,i,n){if(ct(t)){const r=Qi(t,e,i,n);return r&&wo(r)&&r.catch(s=>{An(s,e,i)}),r}if(ht(t)){const r=[];for(let s=0;s<t.length;s++)r.push(se(t[s],e,i,n));return r}}function An(t,e,i,n=!0){const r=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Ct;if(e){let o=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const c=o.ec;if(c){for(let _=0;_<c.length;_++)if(c[_](t,l,u)===!1)return}o=o.parent}if(s){ue(),Qi(s,null,10,[t,l,u]),fe();return}}Sl(t,i,r,n,a)}function Sl(t,e,i,n=!0,r=!1){if(r)throw t;console.error(t)}const Ht=[];let ie=-1;const Ue=[];let me=null,Ne=0;const Ko=Promise.resolve();let un=null;function Cl(t){const e=un||Ko;return t?e.then(this?t.bind(this):t):e}function xl(t){let e=ie+1,i=Ht.length;for(;e<i;){const n=e+i>>>1,r=Ht[n],s=qi(r);s<t||s===t&&r.flags&2?e=n+1:i=n}return e}function xr(t){if(!(t.flags&1)){const e=qi(t),i=Ht[Ht.length-1];!i||!(t.flags&2)&&e>=qi(i)?Ht.push(t):Ht.splice(xl(e),0,t),t.flags|=1,Yo()}}function Yo(){un||(un=Ko.then($o))}function wl(t){ht(t)?Ue.push(...t):me&&t.id===-1?me.splice(Ne+1,0,t):t.flags&1||(Ue.push(t),t.flags|=1),Yo()}function qr(t,e,i=ie+1){for(;i<Ht.length;i++){const n=Ht[i];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Ht.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Xo(t){if(Ue.length){const e=[...new Set(Ue)].sort((i,n)=>qi(i)-qi(n));if(Ue.length=0,me){me.push(...e);return}for(me=e,Ne=0;Ne<me.length;Ne++){const i=me[Ne];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}me=null,Ne=0}}const qi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function $o(t){try{for(ie=0;ie<Ht.length;ie++){const e=Ht[ie];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Qi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ie<Ht.length;ie++){const e=Ht[ie];e&&(e.flags&=-2)}ie=-1,Ht.length=0,Xo(),un=null,(Ht.length||Ue.length)&&$o()}}let Zt=null,Jo=null;function fn(t){const e=Zt;return Zt=t,Jo=t&&t.type.__scopeId||null,e}function ji(t,e=Zt,i){if(!e||t._n)return t;const n=(...r)=>{n._d&&ts(-1);const s=fn(e);let a;try{a=t(...r)}finally{fn(s),n._d&&ts(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Pe(t,e,i,n){const r=t.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[n];l&&(ue(),se(l,i,8,[t.el,o,t,e]),fe())}}const Pl=Symbol("_vte"),Tl=t=>t.__isTeleport,Al=Symbol("_leaveCb");function wr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,wr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Qo(t,e){return ct(t)?It({name:t.name},e,{setup:t}):t}function Zo(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ii(t,e,i,n,r=!1){if(ht(t)){t.forEach((g,v)=>Ii(g,e&&(ht(e)?e[v]:e),i,n,r));return}if(Ui(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Ii(t,e,i,n.component.subTree);return}const s=n.shapeFlag&4?Fr(n.component):n.el,a=r?null:s,{i:o,r:l}=t,u=e&&e.r,c=o.refs===Ct?o.refs={}:o.refs,_=o.setupState,p=mt(_),d=_===Ct?Co:g=>yt(p,g);if(u!=null&&u!==l){if(Et(u))c[u]=null,d(u)&&(_[u]=null);else if(Dt(u)){u.value=null;const g=e;g.k&&(c[g.k]=null)}}if(ct(l))Qi(l,o,12,[a,c]);else{const g=Et(l),v=Dt(l);if(g||v){const S=()=>{if(t.f){const P=g?d(l)?_[l]:c[l]:l.value;if(r)ht(P)&&fr(P,s);else if(ht(P))P.includes(s)||P.push(s);else if(g)c[l]=[s],d(l)&&(_[l]=c[l]);else{const f=[s];l.value=f,t.k&&(c[t.k]=f)}}else g?(c[l]=a,d(l)&&(_[l]=a)):v&&(l.value=a,t.k&&(c[t.k]=a))};a?(S.id=-1,zt(S,i)):S()}}}Pn().requestIdleCallback;Pn().cancelIdleCallback;const Ui=t=>!!t.type.__asyncLoader,ta=t=>t.type.__isKeepAlive;function Rl(t,e){ea(t,"a",e)}function El(t,e){ea(t,"da",e)}function ea(t,e,i=Gt){const n=t.__wdc||(t.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Rn(e,n,i),i){let r=i.parent;for(;r&&r.parent;)ta(r.parent.vnode)&&Ml(n,e,i,r),r=r.parent}}function Ml(t,e,i,n){const r=Rn(e,t,n,!0);Tr(()=>{fr(n[e],r)},i)}function Rn(t,e,i=Gt,n=!1){if(i){const r=i[t]||(i[t]=[]),s=e.__weh||(e.__weh=(...a)=>{ue();const o=tn(i),l=se(e,i,t,a);return o(),fe(),l});return n?r.unshift(s):r.push(s),s}}const ge=t=>(e,i=Gt)=>{(!Yi||t==="sp")&&Rn(t,(...n)=>e(...n),i)},Fl=ge("bm"),Zi=ge("m"),kl=ge("bu"),Pr=ge("u"),ia=ge("bum"),Tr=ge("um"),Ol=ge("sp"),Nl=ge("rtg"),Ll=ge("rtc");function Gl(t,e=Gt){Rn("ec",t,e)}const Dl="components";function Qt(t,e){return Ul(Dl,t,!0,e)||t}const Il=Symbol.for("v-ndc");function Ul(t,e,i=!0,n=!1){const r=Zt||Gt;if(r){const s=r.type;{const o=Ah(s,!1);if(o&&(o===e||o===Jt(e)||o===wn(Jt(e))))return s}const a=jr(r[t]||s[t],e)||jr(r.appContext[t],e);return!a&&n?s:a}}function jr(t,e){return t&&(t[e]||t[Jt(e)]||t[wn(Jt(e))])}function zi(t,e,i,n){let r;const s=i,a=ht(t);if(a||Et(t)){const o=a&&Ie(t);let l=!1,u=!1;o&&(l=!$t(t),u=Se(t),t=Tn(t)),r=new Array(t.length);for(let c=0,_=t.length;c<_;c++)r[c]=e(l?u?cn(Ft(t[c])):Ft(t[c]):t[c],c,void 0,s)}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,s)}else if(Tt(t))if(t[Symbol.iterator])r=Array.from(t,(o,l)=>e(o,l,void 0,s));else{const o=Object.keys(t);r=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];r[l]=e(t[c],c,l,s)}}else r=[];return r}const rr=t=>t?Ca(t)?Fr(t):rr(t.parent):null,Bi=It(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>rr(t.parent),$root:t=>rr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ra(t),$forceUpdate:t=>t.f||(t.f=()=>{xr(t.update)}),$nextTick:t=>t.n||(t.n=Cl.bind(t.proxy)),$watch:t=>ah.bind(t)}),Un=(t,e)=>t!==Ct&&!t.__isScriptSetup&&yt(t,e),Bl={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:n,data:r,props:s,accessCache:a,type:o,appContext:l}=t;let u;if(e[0]!=="$"){const d=a[e];if(d!==void 0)switch(d){case 1:return n[e];case 2:return r[e];case 4:return i[e];case 3:return s[e]}else{if(Un(n,e))return a[e]=1,n[e];if(r!==Ct&&yt(r,e))return a[e]=2,r[e];if((u=t.propsOptions[0])&&yt(u,e))return a[e]=3,s[e];if(i!==Ct&&yt(i,e))return a[e]=4,i[e];sr&&(a[e]=0)}}const c=Bi[e];let _,p;if(c)return e==="$attrs"&&Lt(t.attrs,"get",""),c(t);if((_=o.__cssModules)&&(_=_[e]))return _;if(i!==Ct&&yt(i,e))return a[e]=4,i[e];if(p=l.config.globalProperties,yt(p,e))return p[e]},set({_:t},e,i){const{data:n,setupState:r,ctx:s}=t;return Un(r,e)?(r[e]=i,!0):n!==Ct&&yt(n,e)?(n[e]=i,!0):yt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:r,propsOptions:s,type:a}},o){let l,u;return!!(i[o]||t!==Ct&&o[0]!=="$"&&yt(t,o)||Un(e,o)||(l=s[0])&&yt(l,o)||yt(n,o)||yt(Bi,o)||yt(r.config.globalProperties,o)||(u=a.__cssModules)&&u[o])},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:yt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function zr(t){return ht(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let sr=!0;function Vl(t){const e=ra(t),i=t.proxy,n=t.ctx;sr=!1,e.beforeCreate&&Kr(e.beforeCreate,t,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:_,mounted:p,beforeUpdate:d,updated:g,activated:v,deactivated:S,beforeDestroy:P,beforeUnmount:f,destroyed:h,unmounted:m,render:b,renderTracked:T,renderTriggered:N,errorCaptured:C,serverPrefetch:w,expose:x,inheritAttrs:R,components:k,directives:I,filters:U}=e;if(u&&Hl(u,n,null),a)for(const y in a){const A=a[y];ct(A)&&(n[y]=A.bind(i))}if(r){const y=r.call(i,i);Tt(y)&&(t.data=Ji(y))}if(sr=!0,s)for(const y in s){const A=s[y],F=ct(A)?A.bind(i,i):ct(A.get)?A.get.bind(i,i):re,M=!ct(A)&&ct(A.set)?A.set.bind(i):re,G=He({get:F,set:M});Object.defineProperty(n,y,{enumerable:!0,configurable:!0,get:()=>G.value,set:q=>G.value=q})}if(o)for(const y in o)na(o[y],n,i,y);if(l){const y=ct(l)?l.call(i):l;Reflect.ownKeys(y).forEach(A=>{Yl(A,y[A])})}c&&Kr(c,t,"c");function K(y,A){ht(A)?A.forEach(F=>y(F.bind(i))):A&&y(A.bind(i))}if(K(Fl,_),K(Zi,p),K(kl,d),K(Pr,g),K(Rl,v),K(El,S),K(Gl,C),K(Ll,T),K(Nl,N),K(ia,f),K(Tr,m),K(Ol,w),ht(x))if(x.length){const y=t.exposed||(t.exposed={});x.forEach(A=>{Object.defineProperty(y,A,{get:()=>i[A],set:F=>i[A]=F,enumerable:!0})})}else t.exposed||(t.exposed={});b&&t.render===re&&(t.render=b),R!=null&&(t.inheritAttrs=R),k&&(t.components=k),I&&(t.directives=I),w&&Zo(t)}function Hl(t,e,i=re){ht(t)&&(t=or(t));for(const n in t){const r=t[n];let s;Tt(r)?"default"in r?s=on(r.from||n,r.default,!0):s=on(r.from||n):s=on(r),Dt(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[n]=s}}function Kr(t,e,i){se(ht(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function na(t,e,i,n){let r=n.includes(".")?ma(i,n):()=>i[n];if(Et(t)){const s=e[t];ct(s)&&Ve(r,s)}else if(ct(t))Ve(r,t.bind(i));else if(Tt(t))if(ht(t))t.forEach(s=>na(s,e,i,n));else{const s=ct(t.handler)?t.handler.bind(i):e[t.handler];ct(s)&&Ve(r,s,t)}}function ra(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!i&&!n?l=e:(l={},r.length&&r.forEach(u=>gn(l,u,a,!0)),gn(l,e,a)),Tt(e)&&s.set(e,l),l}function gn(t,e,i,n=!1){const{mixins:r,extends:s}=e;s&&gn(t,s,i,!0),r&&r.forEach(a=>gn(t,a,i,!0));for(const a in e)if(!(n&&a==="expose")){const o=Wl[a]||i&&i[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Wl={data:Yr,props:Xr,emits:Xr,methods:Ni,computed:Ni,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:Ni,directives:Ni,watch:jl,provide:Yr,inject:ql};function Yr(t,e){return e?t?function(){return It(ct(t)?t.call(this,this):t,ct(e)?e.call(this,this):e)}:e:t}function ql(t,e){return Ni(or(t),or(e))}function or(t){if(ht(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Bt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ni(t,e){return t?It(Object.create(null),t,e):e}function Xr(t,e){return t?ht(t)&&ht(e)?[...new Set([...t,...e])]:It(Object.create(null),zr(t),zr(e??{})):e}function jl(t,e){if(!t)return e;if(!e)return t;const i=It(Object.create(null),t);for(const n in e)i[n]=Bt(t[n],e[n]);return i}function sa(){return{app:null,config:{isNativeTag:Co,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zl=0;function Kl(t,e){return function(n,r=null){ct(n)||(n=It({},n)),r!=null&&!Tt(r)&&(r=null);const s=sa(),a=new WeakSet,o=[];let l=!1;const u=s.app={_uid:zl++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:Eh,get config(){return s.config},set config(c){},use(c,..._){return a.has(c)||(c&&ct(c.install)?(a.add(c),c.install(u,..._)):ct(c)&&(a.add(c),c(u,..._))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,_){return _?(s.components[c]=_,u):s.components[c]},directive(c,_){return _?(s.directives[c]=_,u):s.directives[c]},mount(c,_,p){if(!l){const d=u._ceVNode||ut(n,r);return d.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),t(d,c,p),l=!0,u._container=c,c.__vue_app__=u,Fr(d.component)}},onUnmount(c){o.push(c)},unmount(){l&&(se(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,_){return s.provides[c]=_,u},runWithContext(c){const _=Be;Be=u;try{return c()}finally{Be=_}}};return u}}let Be=null;function Yl(t,e){if(Gt){let i=Gt.provides;const n=Gt.parent&&Gt.parent.provides;n===i&&(i=Gt.provides=Object.create(n)),i[t]=e}}function on(t,e,i=!1){const n=Mr();if(n||Be){let r=Be?Be._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return i&&ct(e)?e.call(n&&n.proxy):e}}const oa={},aa=()=>Object.create(oa),la=t=>Object.getPrototypeOf(t)===oa;function Xl(t,e,i,n=!1){const r={},s=aa();t.propsDefaults=Object.create(null),ha(t,e,r,s);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);i?t.props=n?r:ul(r):t.type.props?t.props=r:t.props=s,t.attrs=s}function $l(t,e,i,n){const{props:r,attrs:s,vnode:{patchFlag:a}}=t,o=mt(r),[l]=t.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let _=0;_<c.length;_++){let p=c[_];if(En(t.emitsOptions,p))continue;const d=e[p];if(l)if(yt(s,p))d!==s[p]&&(s[p]=d,u=!0);else{const g=Jt(p);r[g]=ar(l,o,g,d,t,!1)}else d!==s[p]&&(s[p]=d,u=!0)}}}else{ha(t,e,r,s)&&(u=!0);let c;for(const _ in o)(!e||!yt(e,_)&&((c=Fe(_))===_||!yt(e,c)))&&(l?i&&(i[_]!==void 0||i[c]!==void 0)&&(r[_]=ar(l,o,_,void 0,t,!0)):delete r[_]);if(s!==o)for(const _ in s)(!e||!yt(e,_))&&(delete s[_],u=!0)}u&&de(t.attrs,"set","")}function ha(t,e,i,n){const[r,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Li(l))continue;const u=e[l];let c;r&&yt(r,c=Jt(l))?!s||!s.includes(c)?i[c]=u:(o||(o={}))[c]=u:En(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(s){const l=mt(i),u=o||Ct;for(let c=0;c<s.length;c++){const _=s[c];i[_]=ar(r,l,_,u[_],t,!yt(u,_))}}return a}function ar(t,e,i,n,r,s){const a=t[i];if(a!=null){const o=yt(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ct(l)){const{propsDefaults:u}=r;if(i in u)n=u[i];else{const c=tn(r);n=u[i]=l.call(null,e),c()}}else n=l;r.ce&&r.ce._setProp(i,n)}a[0]&&(s&&!o?n=!1:a[1]&&(n===""||n===Fe(i))&&(n=!0))}return n}const Jl=new WeakMap;function ca(t,e,i=!1){const n=i?Jl:e.propsCache,r=n.get(t);if(r)return r;const s=t.props,a={},o=[];let l=!1;if(!ct(t)){const c=_=>{l=!0;const[p,d]=ca(_,e,!0);It(a,p),d&&o.push(...d)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return Tt(t)&&n.set(t,Ge),Ge;if(ht(s))for(let c=0;c<s.length;c++){const _=Jt(s[c]);$r(_)&&(a[_]=Ct)}else if(s)for(const c in s){const _=Jt(c);if($r(_)){const p=s[c],d=a[_]=ht(p)||ct(p)?{type:p}:It({},p),g=d.type;let v=!1,S=!0;if(ht(g))for(let P=0;P<g.length;++P){const f=g[P],h=ct(f)&&f.name;if(h==="Boolean"){v=!0;break}else h==="String"&&(S=!1)}else v=ct(g)&&g.name==="Boolean";d[0]=v,d[1]=S,(v||yt(d,"default"))&&o.push(_)}}const u=[a,o];return Tt(t)&&n.set(t,u),u}function $r(t){return t[0]!=="$"&&!Li(t)}const Ar=t=>t==="_"||t==="_ctx"||t==="$stable",Rr=t=>ht(t)?t.map(ne):[ne(t)],Ql=(t,e,i)=>{if(e._n)return e;const n=ji((...r)=>Rr(e(...r)),i);return n._c=!1,n},da=(t,e,i)=>{const n=t._ctx;for(const r in t){if(Ar(r))continue;const s=t[r];if(ct(s))e[r]=Ql(r,s,n);else if(s!=null){const a=Rr(s);e[r]=()=>a}}},ua=(t,e)=>{const i=Rr(e);t.slots.default=()=>i},fa=(t,e,i)=>{for(const n in e)(i||!Ar(n))&&(t[n]=e[n])},Zl=(t,e,i)=>{const n=t.slots=aa();if(t.vnode.shapeFlag&32){const r=e._;r?(fa(n,e,i),i&&Ao(n,"_",r,!0)):da(e,n)}else e&&ua(t,e)},th=(t,e,i)=>{const{vnode:n,slots:r}=t;let s=!0,a=Ct;if(n.shapeFlag&32){const o=e._;o?i&&o===1?s=!1:fa(r,e,i):(s=!e.$stable,da(e,r)),a=e}else e&&(ua(t,e),a={default:1});if(s)for(const o in r)!Ar(o)&&a[o]==null&&delete r[o]},zt=gh;function eh(t){return ih(t)}function ih(t,e){const i=Pn();i.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:_,nextSibling:p,setScopeId:d=re,insertStaticContent:g}=t,v=(E,L,V,j=null,Y=null,z=null,J=void 0,tt=null,Q=!!L.dynamicChildren)=>{if(E===L)return;E&&!ze(E,L)&&(j=O(E),q(E,Y,z,!0),E=null),L.patchFlag===-2&&(Q=!1,L.dynamicChildren=null);const{type:$,ref:rt,shapeFlag:et}=L;switch($){case Mn:S(E,L,V,j);break;case Ce:P(E,L,V,j);break;case Vn:E==null&&f(L,V,j,J);break;case kt:k(E,L,V,j,Y,z,J,tt,Q);break;default:et&1?b(E,L,V,j,Y,z,J,tt,Q):et&6?I(E,L,V,j,Y,z,J,tt,Q):(et&64||et&128)&&$.process(E,L,V,j,Y,z,J,tt,Q,nt)}rt!=null&&Y?Ii(rt,E&&E.ref,z,L||E,!L):rt==null&&E&&E.ref!=null&&Ii(E.ref,null,z,E,!0)},S=(E,L,V,j)=>{if(E==null)n(L.el=o(L.children),V,j);else{const Y=L.el=E.el;L.children!==E.children&&u(Y,L.children)}},P=(E,L,V,j)=>{E==null?n(L.el=l(L.children||""),V,j):L.el=E.el},f=(E,L,V,j)=>{[E.el,E.anchor]=g(E.children,L,V,j,E.el,E.anchor)},h=({el:E,anchor:L},V,j)=>{let Y;for(;E&&E!==L;)Y=p(E),n(E,V,j),E=Y;n(L,V,j)},m=({el:E,anchor:L})=>{let V;for(;E&&E!==L;)V=p(E),r(E),E=V;r(L)},b=(E,L,V,j,Y,z,J,tt,Q)=>{L.type==="svg"?J="svg":L.type==="math"&&(J="mathml"),E==null?T(L,V,j,Y,z,J,tt,Q):w(E,L,Y,z,J,tt,Q)},T=(E,L,V,j,Y,z,J,tt)=>{let Q,$;const{props:rt,shapeFlag:et,transition:st,dirs:at}=E;if(Q=E.el=a(E.type,z,rt&&rt.is,rt),et&8?c(Q,E.children):et&16&&C(E.children,Q,null,j,Y,Bn(E,z),J,tt),at&&Pe(E,null,j,"created"),N(Q,E,E.scopeId,J,j),rt){for(const _t in rt)_t!=="value"&&!Li(_t)&&s(Q,_t,null,rt[_t],z,j);"value"in rt&&s(Q,"value",null,rt.value,z),($=rt.onVnodeBeforeMount)&&ee($,j,E)}at&&Pe(E,null,j,"beforeMount");const lt=nh(Y,st);lt&&st.beforeEnter(Q),n(Q,L,V),(($=rt&&rt.onVnodeMounted)||lt||at)&&zt(()=>{$&&ee($,j,E),lt&&st.enter(Q),at&&Pe(E,null,j,"mounted")},Y)},N=(E,L,V,j,Y)=>{if(V&&d(E,V),j)for(let z=0;z<j.length;z++)d(E,j[z]);if(Y){let z=Y.subTree;if(L===z||va(z.type)&&(z.ssContent===L||z.ssFallback===L)){const J=Y.vnode;N(E,J,J.scopeId,J.slotScopeIds,Y.parent)}}},C=(E,L,V,j,Y,z,J,tt,Q=0)=>{for(let $=Q;$<E.length;$++){const rt=E[$]=tt?ye(E[$]):ne(E[$]);v(null,rt,L,V,j,Y,z,J,tt)}},w=(E,L,V,j,Y,z,J)=>{const tt=L.el=E.el;let{patchFlag:Q,dynamicChildren:$,dirs:rt}=L;Q|=E.patchFlag&16;const et=E.props||Ct,st=L.props||Ct;let at;if(V&&Te(V,!1),(at=st.onVnodeBeforeUpdate)&&ee(at,V,L,E),rt&&Pe(L,E,V,"beforeUpdate"),V&&Te(V,!0),(et.innerHTML&&st.innerHTML==null||et.textContent&&st.textContent==null)&&c(tt,""),$?x(E.dynamicChildren,$,tt,V,j,Bn(L,Y),z):J||A(E,L,tt,null,V,j,Bn(L,Y),z,!1),Q>0){if(Q&16)R(tt,et,st,V,Y);else if(Q&2&&et.class!==st.class&&s(tt,"class",null,st.class,Y),Q&4&&s(tt,"style",et.style,st.style,Y),Q&8){const lt=L.dynamicProps;for(let _t=0;_t<lt.length;_t++){const dt=lt[_t],xt=et[dt],vt=st[dt];(vt!==xt||dt==="value")&&s(tt,dt,xt,vt,Y,V)}}Q&1&&E.children!==L.children&&c(tt,L.children)}else!J&&$==null&&R(tt,et,st,V,Y);((at=st.onVnodeUpdated)||rt)&&zt(()=>{at&&ee(at,V,L,E),rt&&Pe(L,E,V,"updated")},j)},x=(E,L,V,j,Y,z,J)=>{for(let tt=0;tt<L.length;tt++){const Q=E[tt],$=L[tt],rt=Q.el&&(Q.type===kt||!ze(Q,$)||Q.shapeFlag&198)?_(Q.el):V;v(Q,$,rt,null,j,Y,z,J,!0)}},R=(E,L,V,j,Y)=>{if(L!==V){if(L!==Ct)for(const z in L)!Li(z)&&!(z in V)&&s(E,z,L[z],null,Y,j);for(const z in V){if(Li(z))continue;const J=V[z],tt=L[z];J!==tt&&z!=="value"&&s(E,z,tt,J,Y,j)}"value"in V&&s(E,"value",L.value,V.value,Y)}},k=(E,L,V,j,Y,z,J,tt,Q)=>{const $=L.el=E?E.el:o(""),rt=L.anchor=E?E.anchor:o("");let{patchFlag:et,dynamicChildren:st,slotScopeIds:at}=L;at&&(tt=tt?tt.concat(at):at),E==null?(n($,V,j),n(rt,V,j),C(L.children||[],V,rt,Y,z,J,tt,Q)):et>0&&et&64&&st&&E.dynamicChildren?(x(E.dynamicChildren,st,V,Y,z,J,tt),(L.key!=null||Y&&L===Y.subTree)&&ga(E,L,!0)):A(E,L,V,rt,Y,z,J,tt,Q)},I=(E,L,V,j,Y,z,J,tt,Q)=>{L.slotScopeIds=tt,E==null?L.shapeFlag&512?Y.ctx.activate(L,V,j,J,Q):U(L,V,j,Y,z,J,Q):D(E,L,Q)},U=(E,L,V,j,Y,z,J)=>{const tt=E.component=Ch(E,j,Y);if(ta(E)&&(tt.ctx.renderer=nt),xh(tt,!1,J),tt.asyncDep){if(Y&&Y.registerDep(tt,K,J),!E.el){const Q=tt.subTree=ut(Ce);P(null,Q,L,V),E.placeholder=Q.el}}else K(tt,E,L,V,Y,z,J)},D=(E,L,V)=>{const j=L.component=E.component;if(uh(E,L,V))if(j.asyncDep&&!j.asyncResolved){y(j,L,V);return}else j.next=L,j.update();else L.el=E.el,j.vnode=L},K=(E,L,V,j,Y,z,J)=>{const tt=()=>{if(E.isMounted){let{next:et,bu:st,u:at,parent:lt,vnode:_t}=E;{const Nt=pa(E);if(Nt){et&&(et.el=_t.el,y(E,et,J)),Nt.asyncDep.then(()=>{E.isUnmounted||tt()});return}}let dt=et,xt;Te(E,!1),et?(et.el=_t.el,y(E,et,J)):et=_t,st&&Nn(st),(xt=et.props&&et.props.onVnodeBeforeUpdate)&&ee(xt,lt,et,_t),Te(E,!0);const vt=Qr(E),wt=E.subTree;E.subTree=vt,v(wt,vt,_(wt.el),O(wt),E,Y,z),et.el=vt.el,dt===null&&fh(E,vt.el),at&&zt(at,Y),(xt=et.props&&et.props.onVnodeUpdated)&&zt(()=>ee(xt,lt,et,_t),Y)}else{let et;const{el:st,props:at}=L,{bm:lt,m:_t,parent:dt,root:xt,type:vt}=E,wt=Ui(L);Te(E,!1),lt&&Nn(lt),!wt&&(et=at&&at.onVnodeBeforeMount)&&ee(et,dt,L),Te(E,!0);{xt.ce&&xt.ce._def.shadowRoot!==!1&&xt.ce._injectChildStyle(vt);const Nt=E.subTree=Qr(E);v(null,Nt,V,j,E,Y,z),L.el=Nt.el}if(_t&&zt(_t,Y),!wt&&(et=at&&at.onVnodeMounted)){const Nt=L;zt(()=>ee(et,dt,Nt),Y)}(L.shapeFlag&256||dt&&Ui(dt.vnode)&&dt.vnode.shapeFlag&256)&&E.a&&zt(E.a,Y),E.isMounted=!0,L=V=j=null}};E.scope.on();const Q=E.effect=new Fo(tt);E.scope.off();const $=E.update=Q.run.bind(Q),rt=E.job=Q.runIfDirty.bind(Q);rt.i=E,rt.id=E.uid,Q.scheduler=()=>xr(rt),Te(E,!0),$()},y=(E,L,V)=>{L.component=E;const j=E.vnode.props;E.vnode=L,E.next=null,$l(E,L.props,j,V),th(E,L.children,V),ue(),qr(E),fe()},A=(E,L,V,j,Y,z,J,tt,Q=!1)=>{const $=E&&E.children,rt=E?E.shapeFlag:0,et=L.children,{patchFlag:st,shapeFlag:at}=L;if(st>0){if(st&128){M($,et,V,j,Y,z,J,tt,Q);return}else if(st&256){F($,et,V,j,Y,z,J,tt,Q);return}}at&8?(rt&16&&W($,Y,z),et!==$&&c(V,et)):rt&16?at&16?M($,et,V,j,Y,z,J,tt,Q):W($,Y,z,!0):(rt&8&&c(V,""),at&16&&C(et,V,j,Y,z,J,tt,Q))},F=(E,L,V,j,Y,z,J,tt,Q)=>{E=E||Ge,L=L||Ge;const $=E.length,rt=L.length,et=Math.min($,rt);let st;for(st=0;st<et;st++){const at=L[st]=Q?ye(L[st]):ne(L[st]);v(E[st],at,V,null,Y,z,J,tt,Q)}$>rt?W(E,Y,z,!0,!1,et):C(L,V,j,Y,z,J,tt,Q,et)},M=(E,L,V,j,Y,z,J,tt,Q)=>{let $=0;const rt=L.length;let et=E.length-1,st=rt-1;for(;$<=et&&$<=st;){const at=E[$],lt=L[$]=Q?ye(L[$]):ne(L[$]);if(ze(at,lt))v(at,lt,V,null,Y,z,J,tt,Q);else break;$++}for(;$<=et&&$<=st;){const at=E[et],lt=L[st]=Q?ye(L[st]):ne(L[st]);if(ze(at,lt))v(at,lt,V,null,Y,z,J,tt,Q);else break;et--,st--}if($>et){if($<=st){const at=st+1,lt=at<rt?L[at].el:j;for(;$<=st;)v(null,L[$]=Q?ye(L[$]):ne(L[$]),V,lt,Y,z,J,tt,Q),$++}}else if($>st)for(;$<=et;)q(E[$],Y,z,!0),$++;else{const at=$,lt=$,_t=new Map;for($=lt;$<=st;$++){const Ut=L[$]=Q?ye(L[$]):ne(L[$]);Ut.key!=null&&_t.set(Ut.key,$)}let dt,xt=0;const vt=st-lt+1;let wt=!1,Nt=0;const pe=new Array(vt);for($=0;$<vt;$++)pe[$]=0;for($=at;$<=et;$++){const Ut=E[$];if(xt>=vt){q(Ut,Y,z,!0);continue}let Xt;if(Ut.key!=null)Xt=_t.get(Ut.key);else for(dt=lt;dt<=st;dt++)if(pe[dt-lt]===0&&ze(Ut,L[dt])){Xt=dt;break}Xt===void 0?q(Ut,Y,z,!0):(pe[Xt-lt]=$+1,Xt>=Nt?Nt=Xt:wt=!0,v(Ut,L[Xt],V,null,Y,z,J,tt,Q),xt++)}const we=wt?rh(pe):Ge;for(dt=we.length-1,$=vt-1;$>=0;$--){const Ut=lt+$,Xt=L[Ut],Ur=L[Ut+1],Br=Ut+1<rt?Ur.el||Ur.placeholder:j;pe[$]===0?v(null,Xt,V,Br,Y,z,J,tt,Q):wt&&(dt<0||$!==we[dt]?G(Xt,V,Br,2):dt--)}}},G=(E,L,V,j,Y=null)=>{const{el:z,type:J,transition:tt,children:Q,shapeFlag:$}=E;if($&6){G(E.component.subTree,L,V,j);return}if($&128){E.suspense.move(L,V,j);return}if($&64){J.move(E,L,V,nt);return}if(J===kt){n(z,L,V);for(let et=0;et<Q.length;et++)G(Q[et],L,V,j);n(E.anchor,L,V);return}if(J===Vn){h(E,L,V);return}if(j!==2&&$&1&&tt)if(j===0)tt.beforeEnter(z),n(z,L,V),zt(()=>tt.enter(z),Y);else{const{leave:et,delayLeave:st,afterLeave:at}=tt,lt=()=>{E.ctx.isUnmounted?r(z):n(z,L,V)},_t=()=>{z._isLeaving&&z[Al](!0),et(z,()=>{lt(),at&&at()})};st?st(z,lt,_t):_t()}else n(z,L,V)},q=(E,L,V,j=!1,Y=!1)=>{const{type:z,props:J,ref:tt,children:Q,dynamicChildren:$,shapeFlag:rt,patchFlag:et,dirs:st,cacheIndex:at}=E;if(et===-2&&(Y=!1),tt!=null&&(ue(),Ii(tt,null,V,E,!0),fe()),at!=null&&(L.renderCache[at]=void 0),rt&256){L.ctx.deactivate(E);return}const lt=rt&1&&st,_t=!Ui(E);let dt;if(_t&&(dt=J&&J.onVnodeBeforeUnmount)&&ee(dt,L,E),rt&6)it(E.component,V,j);else{if(rt&128){E.suspense.unmount(V,j);return}lt&&Pe(E,null,L,"beforeUnmount"),rt&64?E.type.remove(E,L,V,nt,j):$&&!$.hasOnce&&(z!==kt||et>0&&et&64)?W($,L,V,!1,!0):(z===kt&&et&384||!Y&&rt&16)&&W(Q,L,V),j&&B(E)}(_t&&(dt=J&&J.onVnodeUnmounted)||lt)&&zt(()=>{dt&&ee(dt,L,E),lt&&Pe(E,null,L,"unmounted")},V)},B=E=>{const{type:L,el:V,anchor:j,transition:Y}=E;if(L===kt){X(V,j);return}if(L===Vn){m(E);return}const z=()=>{r(V),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(E.shapeFlag&1&&Y&&!Y.persisted){const{leave:J,delayLeave:tt}=Y,Q=()=>J(V,z);tt?tt(E.el,z,Q):Q()}else z()},X=(E,L)=>{let V;for(;E!==L;)V=p(E),r(E),E=V;r(L)},it=(E,L,V)=>{const{bum:j,scope:Y,job:z,subTree:J,um:tt,m:Q,a:$}=E;Jr(Q),Jr($),j&&Nn(j),Y.stop(),z&&(z.flags|=8,q(J,E,L,V)),tt&&zt(tt,L),zt(()=>{E.isUnmounted=!0},L)},W=(E,L,V,j=!1,Y=!1,z=0)=>{for(let J=z;J<E.length;J++)q(E[J],L,V,j,Y)},O=E=>{if(E.shapeFlag&6)return O(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const L=p(E.anchor||E.el),V=L&&L[Pl];return V?p(V):L};let H=!1;const Z=(E,L,V)=>{E==null?L._vnode&&q(L._vnode,null,null,!0):v(L._vnode||null,E,L,null,null,null,V),L._vnode=E,H||(H=!0,qr(),Xo(),H=!1)},nt={p:v,um:q,m:G,r:B,mt:U,mc:C,pc:A,pbc:x,n:O,o:t};return{render:Z,hydrate:void 0,createApp:Kl(Z)}}function Bn({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Te({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ga(t,e,i=!1){const n=t.children,r=e.children;if(ht(n)&&ht(r))for(let s=0;s<n.length;s++){const a=n[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=ye(r[s]),o.el=a.el),!i&&o.patchFlag!==-2&&ga(a,o)),o.type===Mn&&o.patchFlag!==-1&&(o.el=a.el),o.type===Ce&&!o.el&&(o.el=a.el)}}function rh(t){const e=t.slice(),i=[0];let n,r,s,a,o;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(r=i[i.length-1],t[r]<u){e[n]=r,i.push(n);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,t[i[o]]<u?s=o+1:a=o;u<t[i[s]]&&(s>0&&(e[n]=i[s-1]),i[s]=n)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=e[a];return i}function pa(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:pa(e)}function Jr(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const sh=Symbol.for("v-scx"),oh=()=>on(sh);function Ve(t,e,i){return _a(t,e,i)}function _a(t,e,i=Ct){const{immediate:n,deep:r,flush:s,once:a}=i,o=It({},i),l=e&&n||!e&&s!=="post";let u;if(Yi){if(s==="sync"){const d=oh();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=re,d.resume=re,d.pause=re,d}}const c=Gt;o.call=(d,g,v)=>se(d,c,g,v);let _=!1;s==="post"?o.scheduler=d=>{zt(d,c&&c.suspense)}:s!=="sync"&&(_=!0,o.scheduler=(d,g)=>{g?d():xr(d)}),o.augmentJob=d=>{e&&(d.flags|=4),_&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const p=bl(t,e,o);return Yi&&(u?u.push(p):l&&p()),p}function ah(t,e,i){const n=this.proxy,r=Et(t)?t.includes(".")?ma(n,t):()=>n[t]:t.bind(n,n);let s;ct(e)?s=e:(s=e.handler,i=e);const a=tn(this),o=_a(r,s.bind(n),i);return a(),o}function ma(t,e){const i=e.split(".");return()=>{let n=t;for(let r=0;r<i.length&&n;r++)n=n[i[r]];return n}}const lh=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Jt(e)}Modifiers`]||t[`${Fe(e)}Modifiers`];function hh(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||Ct;let r=i;const s=e.startsWith("update:"),a=s&&lh(n,e.slice(7));a&&(a.trim&&(r=i.map(c=>Et(c)?c.trim():c)),a.number&&(r=i.map(Ua)));let o,l=n[o=On(e)]||n[o=On(Jt(e))];!l&&s&&(l=n[o=On(Fe(e))]),l&&se(l,t,6,r);const u=n[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,se(u,t,6,r)}}function ya(t,e,i=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const s=t.emits;let a={},o=!1;if(!ct(t)){const l=u=>{const c=ya(u,e,!0);c&&(o=!0,It(a,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(Tt(t)&&n.set(t,null),null):(ht(s)?s.forEach(l=>a[l]=null):It(a,s),Tt(t)&&n.set(t,a),a)}function En(t,e){return!t||!Sn(e)?!1:(e=e.slice(2).replace(/Once$/,""),yt(t,e[0].toLowerCase()+e.slice(1))||yt(t,Fe(e))||yt(t,e))}function Qr(t){const{type:e,vnode:i,proxy:n,withProxy:r,propsOptions:[s],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:_,data:p,setupState:d,ctx:g,inheritAttrs:v}=t,S=fn(t);let P,f;try{if(i.shapeFlag&4){const m=r||n,b=m;P=ne(u.call(b,m,c,_,d,p,g)),f=o}else{const m=e;P=ne(m.length>1?m(_,{attrs:o,slots:a,emit:l}):m(_,null)),f=e.props?o:ch(o)}}catch(m){Vi.length=0,An(m,t,1),P=ut(Ce)}let h=P;if(f&&v!==!1){const m=Object.keys(f),{shapeFlag:b}=h;m.length&&b&7&&(s&&m.some(ur)&&(f=dh(f,s)),h=We(h,f,!1,!0))}return i.dirs&&(h=We(h,null,!1,!0),h.dirs=h.dirs?h.dirs.concat(i.dirs):i.dirs),i.transition&&wr(h,i.transition),P=h,fn(S),P}const ch=t=>{let e;for(const i in t)(i==="class"||i==="style"||Sn(i))&&((e||(e={}))[i]=t[i]);return e},dh=(t,e)=>{const i={};for(const n in t)(!ur(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function uh(t,e,i){const{props:n,children:r,component:s}=t,{props:a,children:o,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Zr(n,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let _=0;_<c.length;_++){const p=c[_];if(a[p]!==n[p]&&!En(u,p))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Zr(n,a,u):!0:!!a;return!1}function Zr(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(e[s]!==t[s]&&!En(i,s))return!0}return!1}function fh({vnode:t,parent:e},i){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=i,e=e.parent;else break}}const va=t=>t.__isSuspense;function gh(t,e){e&&e.pendingBranch?ht(t)?e.effects.push(...t):e.effects.push(t):wl(t)}const kt=Symbol.for("v-fgt"),Mn=Symbol.for("v-txt"),Ce=Symbol.for("v-cmt"),Vn=Symbol.for("v-stc"),Vi=[];let Yt=null;function Pt(t=!1){Vi.push(Yt=t?null:[])}function ph(){Vi.pop(),Yt=Vi[Vi.length-1]||null}let Ki=1;function ts(t,e=!1){Ki+=t,t<0&&Yt&&e&&(Yt.hasOnce=!0)}function ba(t){return t.dynamicChildren=Ki>0?Yt||Ge:null,ph(),Ki>0&&Yt&&Yt.push(t),t}function Ot(t,e,i,n,r,s){return ba(bt(t,e,i,n,r,s,!0))}function Ee(t,e,i,n,r){return ba(ut(t,e,i,n,r,!0))}function pn(t){return t?t.__v_isVNode===!0:!1}function ze(t,e){return t.type===e.type&&t.key===e.key}const Sa=({key:t})=>t??null,an=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Et(t)||Dt(t)||ct(t)?{i:Zt,r:t,k:e,f:!!i}:t:null);function bt(t,e=null,i=null,n=0,r=null,s=t===kt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Sa(e),ref:e&&an(e),scopeId:Jo,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Zt};return o?(Er(l,i),s&128&&t.normalize(l)):i&&(l.shapeFlag|=Et(i)?8:16),Ki>0&&!a&&Yt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Yt.push(l),l}const ut=_h;function _h(t,e=null,i=null,n=0,r=null,s=!1){if((!t||t===Il)&&(t=Ce),pn(t)){const o=We(t,e,!0);return i&&Er(o,i),Ki>0&&!s&&Yt&&(o.shapeFlag&6?Yt[Yt.indexOf(t)]=o:Yt.push(o)),o.patchFlag=-2,o}if(Rh(t)&&(t=t.__vccOpts),e){e=mh(e);let{class:o,style:l}=e;o&&!Et(o)&&(e.class=$i(o)),Tt(l)&&(Cr(l)&&!ht(l)&&(l=It({},l)),e.style=ce(l))}const a=Et(t)?1:va(t)?128:Tl(t)?64:Tt(t)?4:ct(t)?2:0;return bt(t,e,i,n,r,a,s,!0)}function mh(t){return t?Cr(t)||la(t)?It({},t):t:null}function We(t,e,i=!1,n=!1){const{props:r,ref:s,patchFlag:a,children:o,transition:l}=t,u=e?vh(r||{},e):r,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Sa(u),ref:e&&e.ref?i&&s?ht(s)?s.concat(an(e)):[s,an(e)]:an(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==kt?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&We(t.ssContent),ssFallback:t.ssFallback&&We(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&wr(c,l.clone(c)),c}function yh(t=" ",e=0){return ut(Mn,null,t,e)}function sn(t="",e=!1){return e?(Pt(),Ee(Ce,null,t)):ut(Ce,null,t)}function ne(t){return t==null||typeof t=="boolean"?ut(Ce):ht(t)?ut(kt,null,t.slice()):pn(t)?ye(t):ut(Mn,null,String(t))}function ye(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:We(t)}function Er(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ht(e))i=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Er(t,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!la(e)?e._ctx=Zt:r===3&&Zt&&(Zt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ct(e)?(e={default:e,_ctx:Zt},i=32):(e=String(e),n&64?(i=16,e=[yh(e)]):i=8);t.children=e,t.shapeFlag|=i}function vh(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=$i([e.class,n.class]));else if(r==="style")e.style=ce([e.style,n.style]);else if(Sn(r)){const s=e[r],a=n[r];a&&s!==a&&!(ht(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=n[r])}return e}function ee(t,e,i,n=null){se(t,e,7,[i,n])}const bh=sa();let Sh=0;function Ch(t,e,i){const n=t.type,r=(e?e.appContext:t.appContext)||bh,s={uid:Sh++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new za(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ca(n,r),emitsOptions:ya(n,r),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:n.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=hh.bind(null,s),t.ce&&t.ce(s),s}let Gt=null;const Mr=()=>Gt||Zt;let _n,lr;{const t=Pn(),e=(i,n)=>{let r;return(r=t[i])||(r=t[i]=[]),r.push(n),s=>{r.length>1?r.forEach(a=>a(s)):r[0](s)}};_n=e("__VUE_INSTANCE_SETTERS__",i=>Gt=i),lr=e("__VUE_SSR_SETTERS__",i=>Yi=i)}const tn=t=>{const e=Gt;return _n(t),t.scope.on(),()=>{t.scope.off(),_n(e)}},es=()=>{Gt&&Gt.scope.off(),_n(null)};function Ca(t){return t.vnode.shapeFlag&4}let Yi=!1;function xh(t,e=!1,i=!1){e&&lr(e);const{props:n,children:r}=t.vnode,s=Ca(t);Xl(t,n,s,e),Zl(t,r,i||e);const a=s?wh(t,e):void 0;return e&&lr(!1),a}function wh(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Bl);const{setup:n}=i;if(n){ue();const r=t.setupContext=n.length>1?Th(t):null,s=tn(t),a=Qi(n,t,0,[t.props,r]),o=wo(a);if(fe(),s(),(o||t.sp)&&!Ui(t)&&Zo(t),o){if(a.then(es,es),e)return a.then(l=>{is(t,l)}).catch(l=>{An(l,t,0)});t.asyncDep=a}else is(t,a)}else xa(t)}function is(t,e,i){ct(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Tt(e)&&(t.setupState=zo(e)),xa(t)}function xa(t,e,i){const n=t.type;t.render||(t.render=n.render||re);{const r=tn(t);ue();try{Vl(t)}finally{fe(),r()}}}const Ph={get(t,e){return Lt(t,"get",""),t[e]}};function Th(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,Ph),slots:t.slots,emit:t.emit,expose:e}}function Fr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(zo(fl(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Bi)return Bi[i](t)},has(e,i){return i in e||i in Bi}})):t.proxy}function Ah(t,e=!0){return ct(t)?t.displayName||t.name:t.name||e&&t.__name}function Rh(t){return ct(t)&&"__vccOpts"in t}const He=(t,e)=>yl(t,e,Yi);function wa(t,e,i){const n=arguments.length;return n===2?Tt(e)&&!ht(e)?pn(e)?ut(t,null,[e]):ut(t,e):ut(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&pn(i)&&(i=[i]),ut(t,e,i))}const Eh="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hr;const ns=typeof window<"u"&&window.trustedTypes;if(ns)try{hr=ns.createPolicy("vue",{createHTML:t=>t})}catch{}const Pa=hr?t=>hr.createHTML(t):t=>t,Mh="http://www.w3.org/2000/svg",Fh="http://www.w3.org/1998/Math/MathML",he=typeof document<"u"?document:null,rs=he&&he.createElement("template"),kh={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const r=e==="svg"?he.createElementNS(Mh,t):e==="mathml"?he.createElementNS(Fh,t):i?he.createElement(t,{is:i}):he.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>he.createTextNode(t),createComment:t=>he.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>he.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,r,s){const a=i?i.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),i),!(r===s||!(r=r.nextSibling)););else{rs.innerHTML=Pa(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=rs.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},Oh=Symbol("_vtc");function Nh(t,e,i){const n=t[Oh];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const ss=Symbol("_vod"),Lh=Symbol("_vsh"),Gh=Symbol(""),Dh=/(^|;)\s*display\s*:/;function Ih(t,e,i){const n=t.style,r=Et(i);let s=!1;if(i&&!r){if(e)if(Et(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();i[o]==null&&ln(n,o,"")}else for(const a in e)i[a]==null&&ln(n,a,"");for(const a in i)a==="display"&&(s=!0),ln(n,a,i[a])}else if(r){if(e!==i){const a=n[Gh];a&&(i+=";"+a),n.cssText=i,s=Dh.test(i)}}else e&&t.removeAttribute("style");ss in t&&(t[ss]=s?n.display:"",t[Lh]&&(n.display="none"))}const os=/\s*!important$/;function ln(t,e,i){if(ht(i))i.forEach(n=>ln(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=Uh(t,e);os.test(i)?t.setProperty(Fe(n),i.replace(os,""),"important"):t[n]=i}}const as=["Webkit","Moz","ms"],Hn={};function Uh(t,e){const i=Hn[e];if(i)return i;let n=Jt(e);if(n!=="filter"&&n in t)return Hn[e]=n;n=wn(n);for(let r=0;r<as.length;r++){const s=as[r]+n;if(s in t)return Hn[e]=s}return e}const ls="http://www.w3.org/1999/xlink";function hs(t,e,i,n,r,s=ja(e)){n&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(ls,e.slice(6,e.length)):t.setAttributeNS(ls,e,i):i==null||s&&!Ro(i)?t.removeAttribute(e):t.setAttribute(e,s?"":xe(i)?String(i):i)}function cs(t,e,i,n,r){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?Pa(i):i);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(o!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let a=!1;if(i===""||i==null){const o=typeof t[e];o==="boolean"?i=Ro(i):i==null&&o==="string"?(i="",a=!0):o==="number"&&(i=0,a=!0)}try{t[e]=i}catch{}a&&t.removeAttribute(r||e)}function Bh(t,e,i,n){t.addEventListener(e,i,n)}function Vh(t,e,i,n){t.removeEventListener(e,i,n)}const ds=Symbol("_vei");function Hh(t,e,i,n,r=null){const s=t[ds]||(t[ds]={}),a=s[e];if(n&&a)a.value=n;else{const[o,l]=Wh(e);if(n){const u=s[e]=zh(n,r);Bh(t,o,u,l)}else a&&(Vh(t,o,a,l),s[e]=void 0)}}const us=/(?:Once|Passive|Capture)$/;function Wh(t){let e;if(us.test(t)){e={};let n;for(;n=t.match(us);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Fe(t.slice(2)),e]}let Wn=0;const qh=Promise.resolve(),jh=()=>Wn||(qh.then(()=>Wn=0),Wn=Date.now());function zh(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;se(Kh(n,i.value),e,5,[n])};return i.value=t,i.attached=jh(),i}function Kh(t,e){if(ht(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const fs=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Yh=(t,e,i,n,r,s)=>{const a=r==="svg";e==="class"?Nh(t,n,a):e==="style"?Ih(t,i,n):Sn(e)?ur(e)||Hh(t,e,i,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Xh(t,e,n,a))?(cs(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hs(t,e,n,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Et(n))?cs(t,Jt(e),n,s,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),hs(t,e,n,a))};function Xh(t,e,i,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&fs(e)&&ct(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return fs(e)&&Et(i)?!1:e in t}const $h=It({patchProp:Yh},kh);let gs;function Jh(){return gs||(gs=eh($h))}const Qh=((...t)=>{const e=Jh().createApp(...t),{mount:i}=e;return e.mount=n=>{const r=tc(n);if(!r)return;const s=e._component;!ct(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=i(r,!1,Zh(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e});function Zh(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function tc(t){return Et(t)?document.querySelector(t):t}var ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ec(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hn={exports:{}},Ke={},qn={},jn={},_s;function ft(){return _s||(_s=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof ps<"u"?ps:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:i(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return t.Konva.angleDeg?r*e:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var r;return(r=t.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(r){t.glob.Konva=r}};const n=r=>{t.Konva[r.prototype.getClassName()]=r};t._registerNode=n,t.Konva._injectGlobal(t.Konva)})(jn)),jn}var zn={},ms;function At(){return ms||(ms=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=ft();class i{constructor(m=[1,0,0,1,0,0]){this.dirty=!1,this.m=m&&m.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(m){m.m[0]=this.m[0],m.m[1]=this.m[1],m.m[2]=this.m[2],m.m[3]=this.m[3],m.m[4]=this.m[4],m.m[5]=this.m[5]}point(m){const b=this.m;return{x:b[0]*m.x+b[2]*m.y+b[4],y:b[1]*m.x+b[3]*m.y+b[5]}}translate(m,b){return this.m[4]+=this.m[0]*m+this.m[2]*b,this.m[5]+=this.m[1]*m+this.m[3]*b,this}scale(m,b){return this.m[0]*=m,this.m[1]*=m,this.m[2]*=b,this.m[3]*=b,this}rotate(m){const b=Math.cos(m),T=Math.sin(m),N=this.m[0]*b+this.m[2]*T,C=this.m[1]*b+this.m[3]*T,w=this.m[0]*-T+this.m[2]*b,x=this.m[1]*-T+this.m[3]*b;return this.m[0]=N,this.m[1]=C,this.m[2]=w,this.m[3]=x,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(m,b){const T=this.m[0]+this.m[2]*b,N=this.m[1]+this.m[3]*b,C=this.m[2]+this.m[0]*m,w=this.m[3]+this.m[1]*m;return this.m[0]=T,this.m[1]=N,this.m[2]=C,this.m[3]=w,this}multiply(m){const b=this.m[0]*m.m[0]+this.m[2]*m.m[1],T=this.m[1]*m.m[0]+this.m[3]*m.m[1],N=this.m[0]*m.m[2]+this.m[2]*m.m[3],C=this.m[1]*m.m[2]+this.m[3]*m.m[3],w=this.m[0]*m.m[4]+this.m[2]*m.m[5]+this.m[4],x=this.m[1]*m.m[4]+this.m[3]*m.m[5]+this.m[5];return this.m[0]=b,this.m[1]=T,this.m[2]=N,this.m[3]=C,this.m[4]=w,this.m[5]=x,this}invert(){const m=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*m,T=-this.m[1]*m,N=-this.m[2]*m,C=this.m[0]*m,w=m*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),x=m*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=T,this.m[2]=N,this.m[3]=C,this.m[4]=w,this.m[5]=x,this}getMatrix(){return this.m}decompose(){const m=this.m[0],b=this.m[1],T=this.m[2],N=this.m[3],C=this.m[4],w=this.m[5],x=m*N-b*T,R={x:C,y:w,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(m!=0||b!=0){const k=Math.sqrt(m*m+b*b);R.rotation=b>0?Math.acos(m/k):-Math.acos(m/k),R.scaleX=k,R.scaleY=x/k,R.skewX=(m*T+b*N)/x,R.skewY=0}else if(T!=0||N!=0){const k=Math.sqrt(T*T+N*N);R.rotation=Math.PI/2-(N>0?Math.acos(-T/k):-Math.acos(T/k)),R.scaleX=x/k,R.scaleY=k,R.skewX=0,R.skewY=(m*T+b*N)/x}return R.rotation=t.Util._getRotation(R.rotation),R}}t.Transform=i;const n="[object Array]",r="[object Number]",s="[object String]",a="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",c="",_="0",p="Konva warning: ",d="Konva error: ",g="rgb(",v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let P=[];const f=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(h){setTimeout(h,60)};t.Util={_isElement(h){return!!(h&&h.nodeType==1)},_isFunction(h){return!!(h&&h.constructor&&h.call&&h.apply)},_isPlainObject(h){return!!h&&h.constructor===Object},_isArray(h){return Object.prototype.toString.call(h)===n},_isNumber(h){return Object.prototype.toString.call(h)===r&&!isNaN(h)&&isFinite(h)},_isString(h){return Object.prototype.toString.call(h)===s},_isBoolean(h){return Object.prototype.toString.call(h)===a},isObject(h){return h instanceof Object},isValidSelector(h){if(typeof h!="string")return!1;const m=h[0];return m==="#"||m==="."||m===m.toUpperCase()},_sign(h){return h===0||h>0?1:-1},requestAnimFrame(h){P.push(h),P.length===1&&f(function(){const m=P;P=[],m.forEach(function(b){b()})})},createCanvasElement(){const h=document.createElement("canvas");try{h.style=h.style||{}}catch{}return h},createImageElement(){return document.createElement("img")},_isInDocument(h){for(;h=h.parentNode;)if(h==document)return!0;return!1},_urlToImage(h,m){const b=t.Util.createImageElement();b.onload=function(){m(b)},b.src=h},_rgbToHex(h,m,b){return((1<<24)+(h<<16)+(m<<8)+b).toString(16).slice(1)},_hexToRgb(h){h=h.replace(u,c);const m=parseInt(h,16);return{r:m>>16&255,g:m>>8&255,b:m&255}},getRandomColor(){let h=(Math.random()*16777215<<0).toString(16);for(;h.length<6;)h=_+h;return u+h},getRGB(h){let m;return h in v?(m=v[h],{r:m[0],g:m[1],b:m[2]}):h[0]===u?this._hexToRgb(h.substring(1)):h.substr(0,4)===g?(m=S.exec(h.replace(/ /g,"")),{r:parseInt(m[1],10),g:parseInt(m[2],10),b:parseInt(m[3],10)}):{r:0,g:0,b:0}},colorToRGBA(h){return h=h||"black",t.Util._namedColorToRBA(h)||t.Util._hex3ColorToRGBA(h)||t.Util._hex4ColorToRGBA(h)||t.Util._hex6ColorToRGBA(h)||t.Util._hex8ColorToRGBA(h)||t.Util._rgbColorToRGBA(h)||t.Util._rgbaColorToRGBA(h)||t.Util._hslColorToRGBA(h)},_namedColorToRBA(h){const m=v[h.toLowerCase()];return m?{r:m[0],g:m[1],b:m[2],a:1}:null},_rgbColorToRGBA(h){if(h.indexOf("rgb(")===0){h=h.match(/rgb\(([^)]+)\)/)[1];const m=h.split(/ *, */).map(Number);return{r:m[0],g:m[1],b:m[2],a:1}}},_rgbaColorToRGBA(h){if(h.indexOf("rgba(")===0){h=h.match(/rgba\(([^)]+)\)/)[1];const m=h.split(/ *, */).map((b,T)=>b.slice(-1)==="%"?T===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:m[0],g:m[1],b:m[2],a:m[3]}}},_hex8ColorToRGBA(h){if(h[0]==="#"&&h.length===9)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:parseInt(h.slice(7,9),16)/255}},_hex6ColorToRGBA(h){if(h[0]==="#"&&h.length===7)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:1}},_hex4ColorToRGBA(h){if(h[0]==="#"&&h.length===5)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:parseInt(h[4]+h[4],16)/255}},_hex3ColorToRGBA(h){if(h[0]==="#"&&h.length===4)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:1}},_hslColorToRGBA(h){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(h)){const[m,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(h),T=Number(b[0])/360,N=Number(b[1])/100,C=Number(b[2])/100;let w,x,R;if(N===0)return R=C*255,{r:Math.round(R),g:Math.round(R),b:Math.round(R),a:1};C<.5?w=C*(1+N):w=C+N-C*N;const k=2*C-w,I=[0,0,0];for(let U=0;U<3;U++)x=T+1/3*-(U-1),x<0&&x++,x>1&&x--,6*x<1?R=k+(w-k)*6*x:2*x<1?R=w:3*x<2?R=k+(w-k)*(2/3-x)*6:R=k,I[U]=R*255;return{r:Math.round(I[0]),g:Math.round(I[1]),b:Math.round(I[2]),a:1}}},haveIntersection(h,m){return!(m.x>h.x+h.width||m.x+m.width<h.x||m.y>h.y+h.height||m.y+m.height<h.y)},cloneObject(h){const m={};for(const b in h)this._isPlainObject(h[b])?m[b]=this.cloneObject(h[b]):this._isArray(h[b])?m[b]=this.cloneArray(h[b]):m[b]=h[b];return m},cloneArray(h){return h.slice(0)},degToRad(h){return h*o},radToDeg(h){return h*l},_degToRad(h){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(h)},_radToDeg(h){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(h)},_getRotation(h){return e.Konva.angleDeg?t.Util.radToDeg(h):h},_capitalize(h){return h.charAt(0).toUpperCase()+h.slice(1)},throw(h){throw new Error(d+h)},error(h){console.error(d+h)},warn(h){e.Konva.showWarnings&&console.warn(p+h)},each(h,m){for(const b in h)m(b,h[b])},_inRange(h,m,b){return m<=h&&h<b},_getProjectionToSegment(h,m,b,T,N,C){let w,x,R;const k=(h-b)*(h-b)+(m-T)*(m-T);if(k==0)w=h,x=m,R=(N-b)*(N-b)+(C-T)*(C-T);else{const I=((N-h)*(b-h)+(C-m)*(T-m))/k;I<0?(w=h,x=m,R=(h-N)*(h-N)+(m-C)*(m-C)):I>1?(w=b,x=T,R=(b-N)*(b-N)+(T-C)*(T-C)):(w=h+I*(b-h),x=m+I*(T-m),R=(w-N)*(w-N)+(x-C)*(x-C))}return[w,x,R]},_getProjectionToLine(h,m,b){const T=t.Util.cloneObject(h);let N=Number.MAX_VALUE;return m.forEach(function(C,w){if(!b&&w===m.length-1)return;const x=m[(w+1)%m.length],R=t.Util._getProjectionToSegment(C.x,C.y,x.x,x.y,h.x,h.y),k=R[0],I=R[1],U=R[2];U<N&&(T.x=k,T.y=I,N=U)}),T},_prepareArrayForTween(h,m,b){const T=[],N=[];if(h.length>m.length){const w=m;m=h,h=w}for(let w=0;w<h.length;w+=2)T.push({x:h[w],y:h[w+1]});for(let w=0;w<m.length;w+=2)N.push({x:m[w],y:m[w+1]});const C=[];return N.forEach(function(w){const x=t.Util._getProjectionToLine(w,T,b);C.push(x.x),C.push(x.y)}),C},_prepareToStringify(h){let m;h.visitedByCircularReferenceRemoval=!0;for(const b in h)if(h.hasOwnProperty(b)&&h[b]&&typeof h[b]=="object"){if(m=Object.getOwnPropertyDescriptor(h,b),h[b].visitedByCircularReferenceRemoval||t.Util._isElement(h[b]))if(m.configurable)delete h[b];else return null;else if(t.Util._prepareToStringify(h[b])===null)if(m.configurable)delete h[b];else return null}return delete h.visitedByCircularReferenceRemoval,h},_assign(h,m){for(const b in m)h[b]=m[b];return h},_getFirstPointerId(h){return h.touches?h.changedTouches[0].identifier:h.pointerId||999},releaseCanvas(...h){e.Konva.releaseCanvasOnDestroy&&h.forEach(m=>{m.width=0,m.height=0})},drawRoundedRectPath(h,m,b,T){let N=0,C=0,w=0,x=0;typeof T=="number"?N=C=w=x=Math.min(T,m/2,b/2):(N=Math.min(T[0]||0,m/2,b/2),C=Math.min(T[1]||0,m/2,b/2),x=Math.min(T[2]||0,m/2,b/2),w=Math.min(T[3]||0,m/2,b/2)),h.moveTo(N,0),h.lineTo(m-C,0),h.arc(m-C,C,C,Math.PI*3/2,0,!1),h.lineTo(m,b-x),h.arc(m-x,b-x,x,0,Math.PI/2,!1),h.lineTo(w,b),h.arc(w,b-w,w,Math.PI/2,Math.PI,!1),h.lineTo(0,N),h.arc(N,N,N,Math.PI,Math.PI*3/2,!1)}}})(zn)),zn}var Ye={},ae={},le={},ys;function Ta(){if(ys)return le;ys=1,Object.defineProperty(le,"__esModule",{value:!0}),le.HitContext=le.SceneContext=le.Context=void 0;const t=At(),e=ft();function i(P){const f=[],h=P.length,m=t.Util;for(let b=0;b<h;b++){let T=P[b];m._isNumber(T)?T=Math.round(T*1e3)/1e3:m._isString(T)||(T=T+""),f.push(T)}return f}const n=",",r="(",s=")",a="([",o="])",l=";",u="()",c="=",_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],d=100;let g=class{constructor(f){this.canvas=f,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(f){f.fillEnabled()&&this._fill(f)}_fill(f){}strokeShape(f){f.hasStroke()&&this._stroke(f)}_stroke(f){}fillStrokeShape(f){f.attrs.fillAfterStrokeEnabled?(this.strokeShape(f),this.fillShape(f)):(this.fillShape(f),this.strokeShape(f))}getTrace(f,h){let m=this.traceArr,b=m.length,T="",N,C,w,x;for(N=0;N<b;N++)C=m[N],w=C.method,w?(x=C.args,T+=w,f?T+=u:t.Util._isArray(x[0])?T+=a+x.join(n)+o:(h&&(x=x.map(R=>typeof R=="number"?Math.floor(R):R)),T+=r+x.join(n)+s)):(T+=C.property,f||(T+=c+C.val)),T+=l;return T}clearTrace(){this.traceArr=[]}_trace(f){let h=this.traceArr,m;h.push(f),m=h.length,m>=d&&h.shift()}reset(){const f=this.getCanvas().getPixelRatio();this.setTransform(1*f,0,0,1*f,0,0)}getCanvas(){return this.canvas}clear(f){const h=this.getCanvas();f?this.clearRect(f.x||0,f.y||0,f.width||0,f.height||0):this.clearRect(0,0,h.getWidth()/h.pixelRatio,h.getHeight()/h.pixelRatio)}_applyLineCap(f){const h=f.attrs.lineCap;h&&this.setAttr("lineCap",h)}_applyOpacity(f){const h=f.getAbsoluteOpacity();h!==1&&this.setAttr("globalAlpha",h)}_applyLineJoin(f){const h=f.attrs.lineJoin;h&&this.setAttr("lineJoin",h)}setAttr(f,h){this._context[f]=h}arc(f,h,m,b,T,N){this._context.arc(f,h,m,b,T,N)}arcTo(f,h,m,b,T){this._context.arcTo(f,h,m,b,T)}beginPath(){this._context.beginPath()}bezierCurveTo(f,h,m,b,T,N){this._context.bezierCurveTo(f,h,m,b,T,N)}clearRect(f,h,m,b){this._context.clearRect(f,h,m,b)}clip(...f){this._context.clip.apply(this._context,f)}closePath(){this._context.closePath()}createImageData(f,h){const m=arguments;if(m.length===2)return this._context.createImageData(f,h);if(m.length===1)return this._context.createImageData(f)}createLinearGradient(f,h,m,b){return this._context.createLinearGradient(f,h,m,b)}createPattern(f,h){return this._context.createPattern(f,h)}createRadialGradient(f,h,m,b,T,N){return this._context.createRadialGradient(f,h,m,b,T,N)}drawImage(f,h,m,b,T,N,C,w,x){const R=arguments,k=this._context;R.length===3?k.drawImage(f,h,m):R.length===5?k.drawImage(f,h,m,b,T):R.length===9&&k.drawImage(f,h,m,b,T,N,C,w,x)}ellipse(f,h,m,b,T,N,C,w){this._context.ellipse(f,h,m,b,T,N,C,w)}isPointInPath(f,h,m,b){return m?this._context.isPointInPath(m,f,h,b):this._context.isPointInPath(f,h,b)}fill(...f){this._context.fill.apply(this._context,f)}fillRect(f,h,m,b){this._context.fillRect(f,h,m,b)}strokeRect(f,h,m,b){this._context.strokeRect(f,h,m,b)}fillText(f,h,m,b){b?this._context.fillText(f,h,m,b):this._context.fillText(f,h,m)}measureText(f){return this._context.measureText(f)}getImageData(f,h,m,b){return this._context.getImageData(f,h,m,b)}lineTo(f,h){this._context.lineTo(f,h)}moveTo(f,h){this._context.moveTo(f,h)}rect(f,h,m,b){this._context.rect(f,h,m,b)}roundRect(f,h,m,b,T){this._context.roundRect(f,h,m,b,T)}putImageData(f,h,m){this._context.putImageData(f,h,m)}quadraticCurveTo(f,h,m,b){this._context.quadraticCurveTo(f,h,m,b)}restore(){this._context.restore()}rotate(f){this._context.rotate(f)}save(){this._context.save()}scale(f,h){this._context.scale(f,h)}setLineDash(f){this._context.setLineDash?this._context.setLineDash(f):"mozDash"in this._context?this._context.mozDash=f:"webkitLineDash"in this._context&&(this._context.webkitLineDash=f)}getLineDash(){return this._context.getLineDash()}setTransform(f,h,m,b,T,N){this._context.setTransform(f,h,m,b,T,N)}stroke(f){f?this._context.stroke(f):this._context.stroke()}strokeText(f,h,m,b){this._context.strokeText(f,h,m,b)}transform(f,h,m,b,T,N){this._context.transform(f,h,m,b,T,N)}translate(f,h){this._context.translate(f,h)}_enableTrace(){let f=this,h=_.length,m=this.setAttr,b,T;const N=function(C){let w=f[C],x;f[C]=function(){return T=i(Array.prototype.slice.call(arguments,0)),x=w.apply(f,arguments),f._trace({method:C,args:T}),x}};for(b=0;b<h;b++)N(_[b]);f.setAttr=function(){m.apply(f,arguments);const C=arguments[0];let w=arguments[1];(C==="shadowOffsetX"||C==="shadowOffsetY"||C==="shadowBlur")&&(w=w/this.canvas.getPixelRatio()),f._trace({property:C,val:w})}}_applyGlobalCompositeOperation(f){const h=f.attrs.globalCompositeOperation;!h||h==="source-over"||this.setAttr("globalCompositeOperation",h)}};le.Context=g,p.forEach(function(P){Object.defineProperty(g.prototype,P,{get(){return this._context[P]},set(f){this._context[P]=f}})});class v extends g{constructor(f,{willReadFrequently:h=!1}={}){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:h})}_fillColor(f){const h=f.fill();this.setAttr("fillStyle",h),f._fillFunc(this)}_fillPattern(f){this.setAttr("fillStyle",f._getFillPattern()),f._fillFunc(this)}_fillLinearGradient(f){const h=f._getLinearGradient();h&&(this.setAttr("fillStyle",h),f._fillFunc(this))}_fillRadialGradient(f){const h=f._getRadialGradient();h&&(this.setAttr("fillStyle",h),f._fillFunc(this))}_fill(f){const h=f.fill(),m=f.getFillPriority();if(h&&m==="color"){this._fillColor(f);return}const b=f.getFillPatternImage();if(b&&m==="pattern"){this._fillPattern(f);return}const T=f.getFillLinearGradientColorStops();if(T&&m==="linear-gradient"){this._fillLinearGradient(f);return}const N=f.getFillRadialGradientColorStops();if(N&&m==="radial-gradient"){this._fillRadialGradient(f);return}h?this._fillColor(f):b?this._fillPattern(f):T?this._fillLinearGradient(f):N&&this._fillRadialGradient(f)}_strokeLinearGradient(f){const h=f.getStrokeLinearGradientStartPoint(),m=f.getStrokeLinearGradientEndPoint(),b=f.getStrokeLinearGradientColorStops(),T=this.createLinearGradient(h.x,h.y,m.x,m.y);if(b){for(let N=0;N<b.length;N+=2)T.addColorStop(b[N],b[N+1]);this.setAttr("strokeStyle",T)}}_stroke(f){const h=f.dash(),m=f.getStrokeScaleEnabled();if(f.hasStroke()){if(!m){this.save();const T=this.getCanvas().getPixelRatio();this.setTransform(T,0,0,T,0,0)}this._applyLineCap(f),h&&f.dashEnabled()&&(this.setLineDash(h),this.setAttr("lineDashOffset",f.dashOffset())),this.setAttr("lineWidth",f.strokeWidth()),f.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),f.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(f):this.setAttr("strokeStyle",f.stroke()),f._strokeFunc(this),m||this.restore()}}_applyShadow(f){var h,m,b;const T=(h=f.getShadowRGBA())!==null&&h!==void 0?h:"black",N=(m=f.getShadowBlur())!==null&&m!==void 0?m:5,C=(b=f.getShadowOffset())!==null&&b!==void 0?b:{x:0,y:0},w=f.getAbsoluteScale(),x=this.canvas.getPixelRatio(),R=w.x*x,k=w.y*x;this.setAttr("shadowColor",T),this.setAttr("shadowBlur",N*Math.min(Math.abs(R),Math.abs(k))),this.setAttr("shadowOffsetX",C.x*R),this.setAttr("shadowOffsetY",C.y*k)}}le.SceneContext=v;class S extends g{constructor(f){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:!0})}_fill(f){this.save(),this.setAttr("fillStyle",f.colorKey),f._fillFuncHit(this),this.restore()}strokeShape(f){f.hasHitStroke()&&this._stroke(f)}_stroke(f){if(f.hasHitStroke()){const h=f.getStrokeScaleEnabled();if(!h){this.save();const T=this.getCanvas().getPixelRatio();this.setTransform(T,0,0,T,0,0)}this._applyLineCap(f);const m=f.hitStrokeWidth(),b=m==="auto"?f.strokeWidth():m;this.setAttr("lineWidth",b),this.setAttr("strokeStyle",f.colorKey),f._strokeFuncHit(this),h||this.restore()}}}return le.HitContext=S,le}var vs;function Fn(){if(vs)return ae;vs=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.HitCanvas=ae.SceneCanvas=ae.Canvas=void 0;const t=At(),e=Ta(),i=ft();let n;function r(){if(n)return n;const l=t.Util.createCanvasElement(),u=l.getContext("2d");return n=(function(){const c=i.Konva._global.devicePixelRatio||1,_=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return c/_})(),t.Util.releaseCanvas(l),n}let s=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const _=(u||{}).pixelRatio||i.Konva.pixelRatio||r();this.pixelRatio=_,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const c=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/c,this.getHeight()/c)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const c=this.pixelRatio;this.getContext()._context.scale(c,c)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,c){this.setWidth(u||0),this.setHeight(c||0)}toDataURL(u,c){try{return this._canvas.toDataURL(u,c)}catch{try{return this._canvas.toDataURL()}catch(p){return t.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ae.Canvas=s;class a extends s{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new e.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}ae.SceneCanvas=a;class o extends s{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(u.width,u.height)}}return ae.HitCanvas=o,ae}var Kn={},bs;function kr(){return bs||(bs=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=ft(),i=At();t.DD={get isDragging(){let n=!1;return t.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return t.DD._dragElements.forEach(r=>{n=r.node}),n},_dragElements:new Map,_drag(n){const r=[];t.DD._dragElements.forEach((s,a)=>{const{node:o}=s,l=o.getStage();l.setPointersPositions(n),s.pointerId===void 0&&(s.pointerId=i.Util._getFirstPointerId(n));const u=l._changedPointerPositions.find(c=>c.id===s.pointerId);if(u){if(s.dragStatus!=="dragging"){const c=o.dragDistance();if(Math.max(Math.abs(u.x-s.startPointerPos.x),Math.abs(u.y-s.startPointerPos.y))<c||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,s),r.push(o)}}),r.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:n},!0)})},_endDragBefore(n){const r=[];t.DD._dragElements.forEach(s=>{const{node:a}=s,o=a.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(c=>c.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const u=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;u&&r.indexOf(u)===-1&&r.push(u)}),r.forEach(s=>{s.draw()})},_endDragAfter(n){t.DD._dragElements.forEach((r,s)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:n},!0),r.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(Kn)),Kn}var Yn={},Wt={},Ss;function pt(){if(Ss)return Wt;Ss=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.RGBComponent=n,Wt.alphaComponent=r,Wt.getNumberValidator=s,Wt.getNumberOrArrayOfNumbersValidator=a,Wt.getNumberOrAutoValidator=o,Wt.getStringValidator=l,Wt.getStringOrGradientValidator=u,Wt.getFunctionValidator=c,Wt.getNumberArrayValidator=_,Wt.getBooleanValidator=p,Wt.getComponentValidator=d;const t=ft(),e=At();function i(g){return e.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||e.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function n(g){return g>255?255:g<0?0:Math.round(g)}function r(g){return g>1?1:g<1e-4?1e-4:g}function s(){if(t.Konva.isUnminified)return function(g,v){return e.Util._isNumber(g)||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a number.'),g}}function a(g){if(t.Konva.isUnminified)return function(v,S){let P=e.Util._isNumber(v),f=e.Util._isArray(v)&&v.length==g;return!P&&!f&&e.Util.warn(i(v)+' is a not valid value for "'+S+'" attribute. The value should be a number or Array<number>('+g+")"),v}}function o(){if(t.Konva.isUnminified)return function(g,v){return e.Util._isNumber(g)||g==="auto"||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a number or "auto".'),g}}function l(){if(t.Konva.isUnminified)return function(g,v){return e.Util._isString(g)||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a string.'),g}}function u(){if(t.Konva.isUnminified)return function(g,v){const S=e.Util._isString(g),P=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return S||P||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a string or a native gradient.'),g}}function c(){if(t.Konva.isUnminified)return function(g,v){return e.Util._isFunction(g)||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a function.'),g}}function _(){if(t.Konva.isUnminified)return function(g,v){const S=Int8Array?Object.getPrototypeOf(Int8Array):null;return S&&g instanceof S||(e.Util._isArray(g)?g.forEach(function(P){e.Util._isNumber(P)||e.Util.warn('"'+v+'" attribute has non numeric element '+P+". Make sure that all elements are numbers.")}):e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a array of numbers.')),g}}function p(){if(t.Konva.isUnminified)return function(g,v){return g===!0||g===!1||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a boolean.'),g}}function d(g){if(t.Konva.isUnminified)return function(v,S){return v==null||e.Util.isObject(v)||e.Util.warn(i(v)+' is a not valid value for "'+S+'" attribute. The value should be an object with properties '+g),v}}return Wt}var Cs;function gt(){return Cs||(Cs=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=At(),i=pt(),n="get",r="set";t.Factory={addGetterSetter(s,a,o,l,u){t.Factory.addGetter(s,a,o),t.Factory.addSetter(s,a,l,u),t.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,o){const l=n+e.Util._capitalize(a);s.prototype[l]=s.prototype[l]||function(){const u=this.attrs[a];return u===void 0?o:u}},addSetter(s,a,o,l){const u=r+e.Util._capitalize(a);s.prototype[u]||t.Factory.overWriteSetter(s,a,o,l)},overWriteSetter(s,a,o,l){const u=r+e.Util._capitalize(a);s.prototype[u]=function(c){return o&&c!==void 0&&c!==null&&(c=o.call(this,c,a)),this._setAttr(a,c),l&&l.call(this),this}},addComponentsGetterSetter(s,a,o,l,u){const c=o.length,_=e.Util._capitalize,p=n+_(a),d=r+_(a);s.prototype[p]=function(){const v={};for(let S=0;S<c;S++){const P=o[S];v[P]=this.getAttr(a+_(P))}return v};const g=(0,i.getComponentValidator)(o);s.prototype[d]=function(v){const S=this.attrs[a];l&&(v=l.call(this,v,a)),g&&g.call(this,v,a);for(const P in v)v.hasOwnProperty(P)&&this._setAttr(a+_(P),v[P]);return v||o.forEach(P=>{this._setAttr(a+_(P),void 0)}),this._fireChangeEvent(a,S,v),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){const o=e.Util._capitalize(a),l=r+o,u=n+o;s.prototype[a]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(s,a,o,l){e.Util.error("Adding deprecated "+a);const u=n+e.Util._capitalize(a),c=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[u]=function(){e.Util.error(c);const _=this.attrs[a];return _===void 0?o:_},t.Factory.addSetter(s,a,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){e.Util.each(a,function(o,l){const u=s.prototype[l],c=n+e.Util._capitalize(o),_=r+e.Util._capitalize(o);function p(){u.apply(this,arguments),e.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[o]=p,s.prototype[c]=p,s.prototype[_]=p})},afterSetFilter(){this._filterUpToDate=!1}}})(Yn)),Yn}var xs;function Rt(){if(xs)return Ye;xs=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Node=void 0;const t=Fn(),e=kr(),i=gt(),n=ft(),r=At(),s=pt(),a="absoluteOpacity",o="allEventListeners",l="absoluteTransform",u="absoluteScale",c="canvas",_="Change",p="children",d="konva",g="listening",v="mouseenter",S="mouseleave",P="pointerenter",f="pointerleave",h="touchenter",m="touchleave",b="set",T="Shape",N=" ",C="stage",w="transform",x="Stage",R="visible",k=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(N);let I=1,U=class cr{constructor(y){this._id=I++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(y),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(y){(y===w||y===l)&&this._cache.get(y)?this._cache.get(y).dirty=!0:y?this._cache.delete(y):this._cache.clear()}_getCache(y,A){let F=this._cache.get(y);return(F===void 0||(y===w||y===l)&&F.dirty===!0)&&(F=A.call(this),this._cache.set(y,F)),F}_calculate(y,A,F){if(!this._attachedDepsListeners.get(y)){const M=A.map(G=>G+"Change.konva").join(N);this.on(M,()=>{this._clearCache(y)}),this._attachedDepsListeners.set(y,!0)}return this._getCache(y,F)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(y){this._clearCache(y),y===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:y,filter:A,hit:F,buffer:M}=this._cache.get(c);r.Util.releaseCanvas(y,A,F,M),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(y){const A=y||{};let F={};(A.x===void 0||A.y===void 0||A.width===void 0||A.height===void 0)&&(F=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let M=Math.ceil(A.width||F.width),G=Math.ceil(A.height||F.height),q=A.pixelRatio,B=A.x===void 0?Math.floor(F.x):A.x,X=A.y===void 0?Math.floor(F.y):A.y,it=A.offset||0,W=A.drawBorder||!1,O=A.hitCanvasPixelRatio||1;if(!M||!G){r.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const H=Math.abs(Math.round(F.x)-B)>.5?1:0,Z=Math.abs(Math.round(F.y)-X)>.5?1:0;M+=it*2+H,G+=it*2+Z,B-=it,X-=it;const nt=new t.SceneCanvas({pixelRatio:q,width:M,height:G}),ot=new t.SceneCanvas({pixelRatio:q,width:0,height:0,willReadFrequently:!0}),E=new t.HitCanvas({pixelRatio:O,width:M,height:G}),L=nt.getContext(),V=E.getContext(),j=new t.SceneCanvas({width:nt.width/nt.pixelRatio+Math.abs(B),height:nt.height/nt.pixelRatio+Math.abs(X),pixelRatio:nt.pixelRatio}),Y=j.getContext();return E.isCache=!0,nt.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,A.imageSmoothingEnabled===!1&&(nt.getContext()._context.imageSmoothingEnabled=!1,ot.getContext()._context.imageSmoothingEnabled=!1),L.save(),V.save(),Y.save(),L.translate(-B,-X),V.translate(-B,-X),Y.translate(-B,-X),j.x=B,j.y=X,this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this.drawScene(nt,this,j),this.drawHit(E,this),this._isUnderCache=!1,L.restore(),V.restore(),W&&(L.save(),L.beginPath(),L.rect(0,0,M,G),L.closePath(),L.setAttr("strokeStyle","red"),L.setAttr("lineWidth",5),L.stroke(),L.restore()),this._cache.set(c,{scene:nt,filter:ot,hit:E,buffer:j,x:B,y:X}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(y){throw new Error('abstract "getClientRect" method call')}_transformedRect(y,A){const F=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}];let M=1/0,G=1/0,q=-1/0,B=-1/0;const X=this.getAbsoluteTransform(A);return F.forEach(function(it){const W=X.point(it);M===void 0&&(M=q=W.x,G=B=W.y),M=Math.min(M,W.x),G=Math.min(G,W.y),q=Math.max(q,W.x),B=Math.max(B,W.y)}),{x:M,y:G,width:q-M,height:B-G}}_drawCachedSceneCanvas(y){y.save(),y._applyOpacity(this),y._applyGlobalCompositeOperation(this);const A=this._getCanvasCache();y.translate(A.x,A.y);const F=this._getCachedSceneCanvas(),M=F.pixelRatio;y.drawImage(F._canvas,0,0,F.width/M,F.height/M),y.restore()}_drawCachedHitCanvas(y){const A=this._getCanvasCache(),F=A.hit;y.save(),y.translate(A.x,A.y),y.drawImage(F._canvas,0,0,F.width/F.pixelRatio,F.height/F.pixelRatio),y.restore()}_getCachedSceneCanvas(){let y=this.filters(),A=this._getCanvasCache(),F=A.scene,M=A.filter,G=M.getContext(),q,B,X,it;if(y){if(!this._filterUpToDate){const W=F.pixelRatio;M.setSize(F.width/F.pixelRatio,F.height/F.pixelRatio);try{for(q=y.length,G.clear(),G.drawImage(F._canvas,0,0,F.getWidth()/W,F.getHeight()/W),B=G.getImageData(0,0,M.getWidth(),M.getHeight()),X=0;X<q;X++){if(it=y[X],typeof it!="function"){r.Util.error("Filter should be type of function, but got "+typeof it+" instead. Please check correct filters");continue}it.call(this,B),G.putImageData(B,0,0)}}catch(O){r.Util.error("Unable to apply filter. "+O.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return M}return F}on(y,A){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const F=y.split(N);for(let M=0;M<F.length;M++){const q=F[M].split("."),B=q[0],X=q[1]||"";this.eventListeners[B]||(this.eventListeners[B]=[]),this.eventListeners[B].push({name:X,handler:A})}return this}off(y,A){let F=(y||"").split(N),M=F.length,G,q,B,X,it,W;if(this._cache&&this._cache.delete(o),!y)for(q in this.eventListeners)this._off(q);for(G=0;G<M;G++)if(B=F[G],X=B.split("."),it=X[0],W=X[1],it)this.eventListeners[it]&&this._off(it,W,A);else for(q in this.eventListeners)this._off(q,W,A);return this}dispatchEvent(y){const A={target:this,type:y.type,evt:y};return this.fire(y.type,A),this}addEventListener(y,A){return this.on(y,function(F){A.call(this,F.evt)}),this}removeEventListener(y){return this.off(y),this}_delegate(y,A,F){const M=this;this.on(y,function(G){const q=G.target.findAncestors(A,!0,M);for(let B=0;B<q.length;B++)G=r.Util.cloneObject(G),G.currentTarget=q[B],F.call(q[B],G)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(C),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const y=this.getParent();y&&y.children&&(y.children.splice(this.index,1),y._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(y){const A="get"+r.Util._capitalize(y);return r.Util._isFunction(this[A])?this[A]():this.attrs[y]}getAncestors(){let y=this.getParent(),A=[];for(;y;)A.push(y),y=y.getParent();return A}getAttrs(){return this.attrs||{}}setAttrs(y){return this._batchTransformChanges(()=>{let A,F;if(!y)return this;for(A in y)A!==p&&(F=b+r.Util._capitalize(A),r.Util._isFunction(this[F])?this[F](y[A]):this._setAttr(A,y[A]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(y){if(!this.listening())return!1;const F=this.getParent();return F&&F!==y&&this!==y?F._isListening(y):!0}isVisible(){return this._getCache(R,this._isVisible)}_isVisible(y){if(!this.visible())return!1;const F=this.getParent();return F&&F!==y&&this!==y?F._isVisible(y):!0}shouldDrawHit(y,A=!1){if(y)return this._isVisible(y)&&this._isListening(y);const F=this.getLayer();let M=!1;e.DD._dragElements.forEach(q=>{q.dragStatus==="dragging"&&(q.node.nodeType==="Stage"||q.node.getLayer()===F)&&(M=!0)});const G=!A&&!n.Konva.hitOnDragEnabled&&(M||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!G}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let y=this.getDepth(),A=this,F=0,M,G,q,B;function X(W){for(M=[],G=W.length,q=0;q<G;q++)B=W[q],F++,B.nodeType!==T&&(M=M.concat(B.getChildren().slice())),B._id===A._id&&(q=G);M.length>0&&M[0].getDepth()<=y&&X(M)}const it=this.getStage();return A.nodeType!==x&&it&&X(it.getChildren()),F}getDepth(){let y=0,A=this.parent;for(;A;)y++,A=A.parent;return y}_batchTransformChanges(y){this._batchingTransformChange=!0,y(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(w),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(y){return this._batchTransformChanges(()=>{this.x(y.x),this.y(y.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const y=this.getStage();if(!y)return null;const A=y.getPointerPosition();if(!A)return null;const F=this.getAbsoluteTransform().copy();return F.invert(),F.point(A)}getAbsolutePosition(y){let A=!1,F=this.parent;for(;F;){if(F.isCached()){A=!0;break}F=F.parent}A&&!y&&(y=!0);const M=this.getAbsoluteTransform(y).getMatrix(),G=new r.Transform,q=this.offset();return G.m=M.slice(),G.translate(q.x,q.y),G.getTranslation()}setAbsolutePosition(y){const{x:A,y:F,...M}=this._clearTransform();this.attrs.x=A,this.attrs.y=F,this._clearCache(w);const G=this._getAbsoluteTransform().copy();return G.invert(),G.translate(y.x,y.y),y={x:this.attrs.x+G.getTranslation().x,y:this.attrs.y+G.getTranslation().y},this._setTransform(M),this.setPosition({x:y.x,y:y.y}),this._clearCache(w),this._clearSelfAndDescendantCache(l),this}_setTransform(y){let A;for(A in y)this.attrs[A]=y[A]}_clearTransform(){const y={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,y}move(y){let A=y.x,F=y.y,M=this.x(),G=this.y();return A!==void 0&&(M+=A),F!==void 0&&(G+=F),this.setPosition({x:M,y:G}),this}_eachAncestorReverse(y,A){let F=[],M=this.getParent(),G,q;if(!(A&&A._id===this._id)){for(F.unshift(this);M&&(!A||M._id!==A._id);)F.unshift(M),M=M.parent;for(G=F.length,q=0;q<G;q++)y(F[q])}}rotate(y){return this.rotation(this.rotation()+y),this}moveToTop(){if(!this.parent)return r.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const y=this.index,A=this.parent.getChildren().length;return y<A-1?(this.parent.children.splice(y,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return r.Util.warn("Node has no parent. moveUp function is ignored."),!1;const y=this.index,A=this.parent.getChildren().length;return y<A-1?(this.parent.children.splice(y,1),this.parent.children.splice(y+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return r.Util.warn("Node has no parent. moveDown function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.splice(y-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return r.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(y){if(!this.parent)return r.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(y<0||y>=this.parent.children.length)&&r.Util.warn("Unexpected value "+y+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const A=this.index;return this.parent.children.splice(A,1),this.parent.children.splice(y,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let y=this.opacity();const A=this.getParent();return A&&!A._isUnderCache&&(y*=A.getAbsoluteOpacity()),y}moveTo(y){return this.getParent()!==y&&(this._remove(),y.add(this)),this}toObject(){let y=this.getAttrs(),A,F,M,G,q;const B={attrs:{},className:this.getClassName()};for(A in y)F=y[A],q=r.Util.isObject(F)&&!r.Util._isPlainObject(F)&&!r.Util._isArray(F),!q&&(M=typeof this[A]=="function"&&this[A],delete y[A],G=M?M.call(this):null,y[A]=F,G!==F&&(B.attrs[A]=F));return r.Util._prepareToStringify(B)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(y,A,F){const M=[];A&&this._isMatch(y)&&M.push(this);let G=this.parent;for(;G;){if(G===F)return M;G._isMatch(y)&&M.push(G),G=G.parent}return M}isAncestorOf(y){return!1}findAncestor(y,A,F){return this.findAncestors(y,A,F)[0]}_isMatch(y){if(!y)return!1;if(typeof y=="function")return y(this);let A=y.replace(/ /g,"").split(","),F=A.length,M,G;for(M=0;M<F;M++)if(G=A[M],r.Util.isValidSelector(G)||(r.Util.warn('Selector "'+G+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),r.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),r.Util.warn("Konva is awesome, right?")),G.charAt(0)==="#"){if(this.id()===G.slice(1))return!0}else if(G.charAt(0)==="."){if(this.hasName(G.slice(1)))return!0}else if(this.className===G||this.nodeType===G)return!0;return!1}getLayer(){const y=this.getParent();return y?y.getLayer():null}getStage(){return this._getCache(C,this._getStage)}_getStage(){const y=this.getParent();return y?y.getStage():null}fire(y,A={},F){return A.target=A.target||this,F?this._fireAndBubble(y,A):this._fire(y,A),this}getAbsoluteTransform(y){return y?this._getAbsoluteTransform(y):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(y){let A;if(y)return A=new r.Transform,this._eachAncestorReverse(function(F){const M=F.transformsEnabled();M==="all"?A.multiply(F.getTransform()):M==="position"&&A.translate(F.x()-F.offsetX(),F.y()-F.offsetY())},y),A;{A=this._cache.get(l)||new r.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(A):A.reset();const F=this.transformsEnabled();if(F==="all")A.multiply(this.getTransform());else if(F==="position"){const M=this.attrs.x||0,G=this.attrs.y||0,q=this.attrs.offsetX||0,B=this.attrs.offsetY||0;A.translate(M-q,G-B)}return A.dirty=!1,A}}getAbsoluteScale(y){let A=this;for(;A;)A._isUnderCache&&(y=A),A=A.getParent();const M=this.getAbsoluteTransform(y).decompose();return{x:M.scaleX,y:M.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(w,this._getTransform)}_getTransform(){var y,A;const F=this._cache.get(w)||new r.Transform;F.reset();const M=this.x(),G=this.y(),q=n.Konva.getAngle(this.rotation()),B=(y=this.attrs.scaleX)!==null&&y!==void 0?y:1,X=(A=this.attrs.scaleY)!==null&&A!==void 0?A:1,it=this.attrs.skewX||0,W=this.attrs.skewY||0,O=this.attrs.offsetX||0,H=this.attrs.offsetY||0;return(M!==0||G!==0)&&F.translate(M,G),q!==0&&F.rotate(q),(it!==0||W!==0)&&F.skew(it,W),(B!==1||X!==1)&&F.scale(B,X),(O!==0||H!==0)&&F.translate(-1*O,-1*H),F.dirty=!1,F}clone(y){let A=r.Util.cloneObject(this.attrs),F,M,G,q,B;for(F in y)A[F]=y[F];const X=new this.constructor(A);for(F in this.eventListeners)for(M=this.eventListeners[F],G=M.length,q=0;q<G;q++)B=M[q],B.name.indexOf(d)<0&&(X.eventListeners[F]||(X.eventListeners[F]=[]),X.eventListeners[F].push(B));return X}_toKonvaCanvas(y){y=y||{};const A=this.getClientRect(),F=this.getStage(),M=y.x!==void 0?y.x:Math.floor(A.x),G=y.y!==void 0?y.y:Math.floor(A.y),q=y.pixelRatio||1,B=new t.SceneCanvas({width:y.width||Math.ceil(A.width)||(F?F.width():0),height:y.height||Math.ceil(A.height)||(F?F.height():0),pixelRatio:q}),X=B.getContext(),it=new t.SceneCanvas({width:B.width/B.pixelRatio+Math.abs(M),height:B.height/B.pixelRatio+Math.abs(G),pixelRatio:B.pixelRatio});return y.imageSmoothingEnabled===!1&&(X._context.imageSmoothingEnabled=!1),X.save(),(M||G)&&X.translate(-1*M,-1*G),this.drawScene(B,void 0,it),X.restore(),B}toCanvas(y){return this._toKonvaCanvas(y)._canvas}toDataURL(y){y=y||{};const A=y.mimeType||null,F=y.quality||null,M=this._toKonvaCanvas(y).toDataURL(A,F);return y.callback&&y.callback(M),M}toImage(y){return new Promise((A,F)=>{try{const M=y?.callback;M&&delete y.callback,r.Util._urlToImage(this.toDataURL(y),function(G){A(G),M?.(G)})}catch(M){F(M)}})}toBlob(y){return new Promise((A,F)=>{try{const M=y?.callback;M&&delete y.callback,this.toCanvas(y).toBlob(G=>{A(G),M?.(G)},y?.mimeType,y?.quality)}catch(M){F(M)}})}setSize(y){return this.width(y.width),this.height(y.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(y,A,F){let M=this.eventListeners[y],G,q,B;for(G=0;G<M.length;G++)if(q=M[G].name,B=M[G].handler,(q!=="konva"||A==="konva")&&(!A||q===A)&&(!F||F===B)){if(M.splice(G,1),M.length===0){delete this.eventListeners[y];break}G--}}_fireChangeEvent(y,A,F){this._fire(y+_,{oldVal:A,newVal:F})}addName(y){if(!this.hasName(y)){const A=this.name(),F=A?A+" "+y:y;this.name(F)}return this}hasName(y){if(!y)return!1;const A=this.name();return A?(A||"").split(/\s/g).indexOf(y)!==-1:!1}removeName(y){const A=(this.name()||"").split(/\s/g),F=A.indexOf(y);return F!==-1&&(A.splice(F,1),this.name(A.join(" "))),this}setAttr(y,A){const F=this[b+r.Util._capitalize(y)];return r.Util._isFunction(F)?F.call(this,A):this._setAttr(y,A),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const y=this.getLayer()||this.getStage();y?.batchDraw()}}_setAttr(y,A){const F=this.attrs[y];F===A&&!r.Util.isObject(A)||(A==null?delete this.attrs[y]:this.attrs[y]=A,this._shouldFireChangeEvents&&this._fireChangeEvent(y,F,A),this._requestDraw())}_setComponentAttr(y,A,F){let M;F!==void 0&&(M=this.attrs[y],M||(this.attrs[y]=this.getAttr(y)),this.attrs[y][A]=F,this._fireChangeEvent(y,M,F))}_fireAndBubble(y,A,F){A&&this.nodeType===T&&(A.target=this);const M=[v,S,P,f,h,m];if(!(M.indexOf(y)!==-1&&(F&&(this===F||this.isAncestorOf&&this.isAncestorOf(F))||this.nodeType==="Stage"&&!F))){this._fire(y,A);const q=M.indexOf(y)!==-1&&F&&F.isAncestorOf&&F.isAncestorOf(this)&&!F.isAncestorOf(this.parent);(A&&!A.cancelBubble||!A)&&this.parent&&this.parent.isListening()&&!q&&(F&&F.parent?this._fireAndBubble.call(this.parent,y,A,F):this._fireAndBubble.call(this.parent,y,A))}}_getProtoListeners(y){var A,F,M;const G=(A=this._cache.get(o))!==null&&A!==void 0?A:{};let q=G?.[y];if(q===void 0){q=[];let B=Object.getPrototypeOf(this);for(;B;){const X=(M=(F=B.eventListeners)===null||F===void 0?void 0:F[y])!==null&&M!==void 0?M:[];q.push(...X),B=Object.getPrototypeOf(B)}G[y]=q,this._cache.set(o,G)}return q}_fire(y,A){A=A||{},A.currentTarget=this,A.type=y;const F=this._getProtoListeners(y);if(F)for(let G=0;G<F.length;G++)F[G].handler.call(this,A);const M=this.eventListeners[y];if(M)for(let G=0;G<M.length;G++)M[G].handler.call(this,A)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(y){const A=y?y.pointerId:void 0,F=this.getStage(),M=this.getAbsolutePosition();if(!F)return;const G=F._getPointerById(A)||F._changedPointerPositions[0]||M;e.DD._dragElements.set(this._id,{node:this,startPointerPos:G,offset:{x:G.x-M.x,y:G.y-M.y},dragStatus:"ready",pointerId:A})}startDrag(y,A=!0){e.DD._dragElements.has(this._id)||this._createDragElement(y);const F=e.DD._dragElements.get(this._id);F.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:y&&y.evt},A)}_setDragPosition(y,A){const F=this.getStage()._getPointerById(A.pointerId);if(!F)return;let M={x:F.x-A.offset.x,y:F.y-A.offset.y};const G=this.dragBoundFunc();if(G!==void 0){const q=G.call(this,M,y);q?M=q:r.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==M.x||this._lastPos.y!==M.y)&&(this.setAbsolutePosition(M),this._requestDraw()),this._lastPos=M}stopDrag(y){const A=e.DD._dragElements.get(this._id);A&&(A.dragStatus="stopped"),e.DD._endDragBefore(y),e.DD._endDragAfter(y)}setDraggable(y){this._setAttr("draggable",y),this._dragChange()}isDragging(){const y=e.DD._dragElements.get(this._id);return y?y.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(y){if(!(!(y.evt.button!==void 0)||n.Konva.dragButtons.indexOf(y.evt.button)>=0)||this.isDragging())return;let M=!1;e.DD._dragElements.forEach(G=>{this.isAncestorOf(G.node)&&(M=!0)}),M||this._createDragElement(y)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const A=e.DD._dragElements.get(this._id),F=A&&A.dragStatus==="dragging",M=A&&A.dragStatus==="ready";F?this.stopDrag():M&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(y={x:0,y:0}){const A=this.getStage();if(!A)return!1;const F={x:-y.x,y:-y.y,width:A.width()+2*y.x,height:A.height()+2*y.y};return r.Util.haveIntersection(F,this.getClientRect())}static create(y,A){return r.Util._isString(y)&&(y=JSON.parse(y)),this._createNode(y,A)}static _createNode(y,A){let F=cr.prototype.getClassName.call(y),M=y.children,G,q,B;A&&(y.attrs.container=A),n.Konva[F]||(r.Util.warn('Can not find a node with class name "'+F+'". Fallback to "Shape".'),F="Shape");const X=n.Konva[F];if(G=new X(y.attrs),M)for(q=M.length,B=0;B<q;B++)G.add(cr._createNode(M[B]));return G}};Ye.Node=U,U.prototype.nodeType="Node",U.prototype._attrsAffectingSize=[],U.prototype.eventListeners={},U.prototype.on.call(U.prototype,k,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(w),this._clearSelfAndDescendantCache(l)}),U.prototype.on.call(U.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(R)}),U.prototype.on.call(U.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),U.prototype.on.call(U.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const D=i.Factory.addGetterSetter;return D(U,"zIndex"),D(U,"absolutePosition"),D(U,"position"),D(U,"x",0,(0,s.getNumberValidator)()),D(U,"y",0,(0,s.getNumberValidator)()),D(U,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),D(U,"opacity",1,(0,s.getNumberValidator)()),D(U,"name","",(0,s.getStringValidator)()),D(U,"id","",(0,s.getStringValidator)()),D(U,"rotation",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(U,"scale",["x","y"]),D(U,"scaleX",1,(0,s.getNumberValidator)()),D(U,"scaleY",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(U,"skew",["x","y"]),D(U,"skewX",0,(0,s.getNumberValidator)()),D(U,"skewY",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(U,"offset",["x","y"]),D(U,"offsetX",0,(0,s.getNumberValidator)()),D(U,"offsetY",0,(0,s.getNumberValidator)()),D(U,"dragDistance",void 0,(0,s.getNumberValidator)()),D(U,"width",0,(0,s.getNumberValidator)()),D(U,"height",0,(0,s.getNumberValidator)()),D(U,"listening",!0,(0,s.getBooleanValidator)()),D(U,"preventDefault",!0,(0,s.getBooleanValidator)()),D(U,"filters",void 0,function(K){return this._filterUpToDate=!1,K}),D(U,"visible",!0,(0,s.getBooleanValidator)()),D(U,"transformsEnabled","all",(0,s.getStringValidator)()),D(U,"size"),D(U,"dragBoundFunc"),D(U,"draggable",!1,(0,s.getBooleanValidator)()),i.Factory.backCompat(U,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Ye}var Xe={},ws;function kn(){if(ws)return Xe;ws=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Container=void 0;const t=gt(),e=Rt(),i=pt();let n=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){const a=this.children||[];return s?a.filter(s):a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let o=0;o<s.length;o++)this.add(s[o]);return this}const a=s[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const a=this._generalFind(s,!0);return a.length>0?a[0]:void 0}_generalFind(s,a){const o=[];return this._descendants(l=>{const u=l._isMatch(s);return u&&o.push(l),!!(u&&a)}),o}_descendants(s){let a=!1;const o=this.getChildren();for(const l of o){if(a=s(l),a)return!0;if(l.hasChildren()&&(a=l._descendants(s),a))return!0}return!1}toObject(){const s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(a=>{s.children.push(a.toObject())}),s}isAncestorOf(s){let a=s.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(s){const a=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(o){a.add(o.clone())}),a}getAllIntersections(s){const a=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(s)&&a.push(o)}),a}_clearSelfAndDescendantCache(s){var a;super._clearSelfAndDescendantCache(s),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(o){o._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(a,o){a.index=o}),this._requestDraw()}drawScene(s,a,o){const l=this.getLayer(),u=s||l&&l.getCanvas(),c=u&&u.getContext(),_=this._getCanvasCache(),p=_&&_.scene,d=u&&u.isCache;if(!this.isVisible()&&!d)return this;if(p){c.save();const g=this.getAbsoluteTransform(a).getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",u,a,o);return this}drawHit(s,a){if(!this.shouldDrawHit(a))return this;const o=this.getLayer(),l=s||o&&o.hitCanvas,u=l&&l.getContext(),c=this._getCanvasCache();if(c&&c.hit){u.save();const p=this.getAbsoluteTransform(a).getMatrix();u.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",l,a);return this}_drawChildren(s,a,o,l){var u;const c=a&&a.getContext(),_=this.clipWidth(),p=this.clipHeight(),d=this.clipFunc(),g=typeof _=="number"&&typeof p=="number"||d,v=o===this;if(g){c.save();const P=this.getAbsoluteTransform(o);let f=P.getMatrix();c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),c.beginPath();let h;if(d)h=d.call(this,c,this);else{const m=this.clipX(),b=this.clipY();c.rect(m||0,b||0,_,p)}c.clip.apply(c,h),f=P.copy().invert().getMatrix(),c.transform(f[0],f[1],f[2],f[3],f[4],f[5])}const S=!v&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";S&&(c.save(),c._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(P){P[s](a,o,l)}),S&&c.restore(),g&&c.restore()}getClientRect(s={}){var a;const o=s.skipTransform,l=s.relativeTo;let u,c,_,p,d={x:1/0,y:1/0,width:0,height:0};const g=this;(a=this.children)===null||a===void 0||a.forEach(function(P){if(!P.visible())return;const f=P.getClientRect({relativeTo:g,skipShadow:s.skipShadow,skipStroke:s.skipStroke});f.width===0&&f.height===0||(u===void 0?(u=f.x,c=f.y,_=f.x+f.width,p=f.y+f.height):(u=Math.min(u,f.x),c=Math.min(c,f.y),_=Math.max(_,f.x+f.width),p=Math.max(p,f.y+f.height)))});const v=this.find("Shape");let S=!1;for(let P=0;P<v.length;P++)if(v[P]._isVisible(this)){S=!0;break}return S&&u!==void 0?d={x:u,y:c,width:_-u,height:p-c}:d={x:0,y:0,width:0,height:0},o?d:this._transformedRect(d,l)}};return Xe.Container=n,t.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(n,"clipX",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipY",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipWidth",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipHeight",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipFunc"),Xe}var Xn={},_e={},Ps;function Aa(){if(Ps)return _e;Ps=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.getCapturedShape=n,_e.createEvent=r,_e.hasPointerCapture=s,_e.setPointerCapture=a,_e.releaseCapture=o;const t=ft(),e=new Map,i=t.Konva._global.PointerEvent!==void 0;function n(l){return e.get(l)}function r(l){return{evt:l,pointerId:l.pointerId}}function s(l,u){return e.get(l)===u}function a(l,u){o(l),u.getStage()&&(e.set(l,u),i&&u._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}function o(l,u){const c=e.get(l);if(!c)return;const _=c.getStage();_&&_.content,e.delete(l),i&&c._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return _e}var Ts;function ic(){return Ts||(Ts=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=At(),i=gt(),n=kn(),r=ft(),s=Fn(),a=kr(),o=ft(),l=Aa(),u="Stage",c="string",_="px",p="mouseout",d="mouseleave",g="mouseover",v="mouseenter",S="mousemove",P="mousedown",f="mouseup",h="pointermove",m="pointerdown",b="pointerup",T="pointercancel",N="lostpointercapture",C="pointerout",w="pointerleave",x="pointerover",R="pointerenter",k="contextmenu",I="touchstart",U="touchend",D="touchmove",K="touchcancel",y="wheel",A=5,F=[[v,"_pointerenter"],[P,"_pointerdown"],[S,"_pointermove"],[f,"_pointerup"],[d,"_pointerleave"],[I,"_pointerdown"],[D,"_pointermove"],[U,"_pointerup"],[K,"_pointercancel"],[g,"_pointerover"],[y,"_wheel"],[k,"_contextmenu"],[m,"_pointerdown"],[h,"_pointermove"],[b,"_pointerup"],[T,"_pointercancel"],[w,"_pointerleave"],[N,"_lostpointercapture"]],M={mouse:{[C]:p,[w]:d,[x]:g,[R]:v,[h]:S,[m]:P,[b]:f,[T]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[C]:"touchout",[w]:"touchleave",[x]:"touchover",[R]:"touchenter",[h]:D,[m]:I,[b]:U,[T]:K,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[C]:C,[w]:w,[x]:x,[R]:R,[h]:h,[m]:m,[b]:b,[T]:T,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},G=W=>W.indexOf("pointer")>=0?"pointer":W.indexOf("touch")>=0?"touch":"mouse",q=W=>{const O=G(W);if(O==="pointer")return r.Konva.pointerEventsEnabled&&M.pointer;if(O==="touch")return M.touch;if(O==="mouse")return M.mouse};function B(W={}){return(W.clipFunc||W.clipWidth||W.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),W}const X="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class it extends n.Container{constructor(O){super(B(O)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{B(this.attrs)}),this._checkVisibility()}_validateAdd(O){const H=O.getType()==="Layer",Z=O.getType()==="FastLayer";H||Z||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const O=this.visible()?"":"none";this.content.style.display=O}setContainer(O){if(typeof O===c){let H;if(O.charAt(0)==="."){const Z=O.slice(1);O=document.getElementsByClassName(Z)[0]}else O.charAt(0)!=="#"?H=O:H=O.slice(1),O=document.getElementById(H);if(!O)throw"Can not find container in document with id "+H}return this._setAttr("container",O),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),O.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const O=this.children,H=O.length;for(let Z=0;Z<H;Z++)O[Z].clear();return this}clone(O){return O||(O={}),O.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,O)}destroy(){super.destroy();const O=this.content;O&&e.Util._isInDocument(O)&&this.container().removeChild(O);const H=t.stages.indexOf(this);return H>-1&&t.stages.splice(H,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const O=this._pointerPositions[0]||this._changedPointerPositions[0];return O?{x:O.x,y:O.y}:(e.Util.warn(X),null)}_getPointerById(O){return this._pointerPositions.find(H=>H.id===O)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(O){O=O||{},O.x=O.x||0,O.y=O.y||0,O.width=O.width||this.width(),O.height=O.height||this.height();const H=new s.SceneCanvas({width:O.width,height:O.height,pixelRatio:O.pixelRatio||1}),Z=H.getContext()._context,nt=this.children;return(O.x||O.y)&&Z.translate(-1*O.x,-1*O.y),nt.forEach(function(ot){if(!ot.isVisible())return;const E=ot._toKonvaCanvas(O);Z.drawImage(E._canvas,O.x,O.y,E.getWidth()/E.getPixelRatio(),E.getHeight()/E.getPixelRatio())}),H}getIntersection(O){if(!O)return null;const H=this.children,Z=H.length,nt=Z-1;for(let ot=nt;ot>=0;ot--){const E=H[ot].getIntersection(O);if(E)return E}return null}_resizeDOM(){const O=this.width(),H=this.height();this.content&&(this.content.style.width=O+_,this.content.style.height=H+_),this.bufferCanvas.setSize(O,H),this.bufferHitCanvas.setSize(O,H),this.children.forEach(Z=>{Z.setSize({width:O,height:H}),Z.draw()})}add(O,...H){if(arguments.length>1){for(let nt=0;nt<arguments.length;nt++)this.add(arguments[nt]);return this}super.add(O);const Z=this.children.length;return Z>A&&e.Util.warn("The stage has "+Z+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),O.setSize({width:this.width(),height:this.height()}),O.draw(),r.Konva.isBrowser&&this.content.appendChild(O.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(O){return l.hasPointerCapture(O,this)}setPointerCapture(O){l.setPointerCapture(O,this)}releaseCapture(O){l.releaseCapture(O,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&F.forEach(([O,H])=>{this.content.addEventListener(O,Z=>{this[H](Z)},{passive:!1})})}_pointerenter(O){this.setPointersPositions(O);const H=q(O.type);H&&this._fire(H.pointerenter,{evt:O,target:this,currentTarget:this})}_pointerover(O){this.setPointersPositions(O);const H=q(O.type);H&&this._fire(H.pointerover,{evt:O,target:this,currentTarget:this})}_getTargetShape(O){let H=this[O+"targetShape"];return H&&!H.getStage()&&(H=null),H}_pointerleave(O){const H=q(O.type),Z=G(O.type);if(!H)return;this.setPointersPositions(O);const nt=this._getTargetShape(Z),ot=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;nt&&ot?(nt._fireAndBubble(H.pointerout,{evt:O}),nt._fireAndBubble(H.pointerleave,{evt:O}),this._fire(H.pointerleave,{evt:O,target:this,currentTarget:this}),this[Z+"targetShape"]=null):ot&&(this._fire(H.pointerleave,{evt:O,target:this,currentTarget:this}),this._fire(H.pointerout,{evt:O,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(O){const H=q(O.type),Z=G(O.type);if(!H)return;this.setPointersPositions(O);let nt=!1;this._changedPointerPositions.forEach(ot=>{const E=this.getIntersection(ot);if(a.DD.justDragged=!1,r.Konva["_"+Z+"ListenClick"]=!0,!E||!E.isListening()){this[Z+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&E.setPointerCapture(ot.id),this[Z+"ClickStartShape"]=E,E._fireAndBubble(H.pointerdown,{evt:O,pointerId:ot.id}),nt=!0;const L=O.type.indexOf("touch")>=0;E.preventDefault()&&O.cancelable&&L&&O.preventDefault()}),nt||this._fire(H.pointerdown,{evt:O,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(O){const H=q(O.type),Z=G(O.type);if(!H||(r.Konva.isDragging()&&a.DD.node.preventDefault()&&O.cancelable&&O.preventDefault(),this.setPointersPositions(O),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const ot={};let E=!1;const L=this._getTargetShape(Z);this._changedPointerPositions.forEach(V=>{const j=l.getCapturedShape(V.id)||this.getIntersection(V),Y=V.id,z={evt:O,pointerId:Y},J=L!==j;if(J&&L&&(L._fireAndBubble(H.pointerout,{...z},j),L._fireAndBubble(H.pointerleave,{...z},j)),j){if(ot[j._id])return;ot[j._id]=!0}j&&j.isListening()?(E=!0,J&&(j._fireAndBubble(H.pointerover,{...z},L),j._fireAndBubble(H.pointerenter,{...z},L),this[Z+"targetShape"]=j),j._fireAndBubble(H.pointermove,{...z})):L&&(this._fire(H.pointerover,{evt:O,target:this,currentTarget:this,pointerId:Y}),this[Z+"targetShape"]=null)}),E||this._fire(H.pointermove,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(O){const H=q(O.type),Z=G(O.type);if(!H)return;this.setPointersPositions(O);const nt=this[Z+"ClickStartShape"],ot=this[Z+"ClickEndShape"],E={};let L=!1;this._changedPointerPositions.forEach(V=>{const j=l.getCapturedShape(V.id)||this.getIntersection(V);if(j){if(j.releaseCapture(V.id),E[j._id])return;E[j._id]=!0}const Y=V.id,z={evt:O,pointerId:Y};let J=!1;r.Konva["_"+Z+"InDblClickWindow"]?(J=!0,clearTimeout(this[Z+"DblTimeout"])):a.DD.justDragged||(r.Konva["_"+Z+"InDblClickWindow"]=!0,clearTimeout(this[Z+"DblTimeout"])),this[Z+"DblTimeout"]=setTimeout(function(){r.Konva["_"+Z+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),j&&j.isListening()?(L=!0,this[Z+"ClickEndShape"]=j,j._fireAndBubble(H.pointerup,{...z}),r.Konva["_"+Z+"ListenClick"]&&nt&&nt===j&&(j._fireAndBubble(H.pointerclick,{...z}),J&&ot&&ot===j&&j._fireAndBubble(H.pointerdblclick,{...z}))):(this[Z+"ClickEndShape"]=null,r.Konva["_"+Z+"ListenClick"]&&this._fire(H.pointerclick,{evt:O,target:this,currentTarget:this,pointerId:Y}),J&&this._fire(H.pointerdblclick,{evt:O,target:this,currentTarget:this,pointerId:Y}))}),L||this._fire(H.pointerup,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+Z+"ListenClick"]=!1,O.cancelable&&Z!=="touch"&&Z!=="pointer"&&O.preventDefault()}_contextmenu(O){this.setPointersPositions(O);const H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(k,{evt:O}):this._fire(k,{evt:O,target:this,currentTarget:this})}_wheel(O){this.setPointersPositions(O);const H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(y,{evt:O}):this._fire(y,{evt:O,target:this,currentTarget:this})}_pointercancel(O){this.setPointersPositions(O);const H=l.getCapturedShape(O.pointerId)||this.getIntersection(this.getPointerPosition());H&&H._fireAndBubble(b,l.createEvent(O)),l.releaseCapture(O.pointerId)}_lostpointercapture(O){l.releaseCapture(O.pointerId)}setPointersPositions(O){const H=this._getContentPosition();let Z=null,nt=null;O=O||window.event,O.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(O.touches,ot=>{this._pointerPositions.push({id:ot.identifier,x:(ot.clientX-H.left)/H.scaleX,y:(ot.clientY-H.top)/H.scaleY})}),Array.prototype.forEach.call(O.changedTouches||O.touches,ot=>{this._changedPointerPositions.push({id:ot.identifier,x:(ot.clientX-H.left)/H.scaleX,y:(ot.clientY-H.top)/H.scaleY})})):(Z=(O.clientX-H.left)/H.scaleX,nt=(O.clientY-H.top)/H.scaleY,this.pointerPos={x:Z,y:nt},this._pointerPositions=[{x:Z,y:nt,id:e.Util._getFirstPointerId(O)}],this._changedPointerPositions=[{x:Z,y:nt,id:e.Util._getFirstPointerId(O)}])}_setPointerPosition(O){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(O)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const O=this.content.getBoundingClientRect();return{top:O.top,left:O.left,scaleX:O.width/this.content.clientWidth||1,scaleY:O.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const O=this.container();if(!O)throw"Stage has no container. A container is required.";O.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),O.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(O){O.batchDraw()}),this}}t.Stage=it,it.prototype.nodeType=u,(0,o._registerNode)(it),i.Factory.addGetterSetter(it,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(W=>{W.batchDraw()})})})(Xn)),Xn}var $e={},$n={},As;function Mt(){return As||(As=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=ft(),i=At(),n=gt(),r=Rt(),s=pt(),a=ft(),o=Aa(),l="hasShadow",u="shadowRGBA",c="patternImage",_="linearGradient",p="radialGradient";let d;function g(){return d||(d=i.Util.createCanvasElement().getContext("2d"),d)}t.shapes={};function v(w){const x=this.attrs.fillRule;x?w.fill(x):w.fill()}function S(w){w.stroke()}function P(w){const x=this.attrs.fillRule;x?w.fill(x):w.fill()}function f(w){w.stroke()}function h(){this._clearCache(l)}function m(){this._clearCache(u)}function b(){this._clearCache(c)}function T(){this._clearCache(_)}function N(){this._clearCache(p)}class C extends r.Node{constructor(x){super(x);let R;for(;R=i.Util.getRandomColor(),!(R&&!(R in t.shapes)););this.colorKey=R,t.shapes[R]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const R=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(R&&R.setTransform){const k=new i.Transform;k.translate(this.fillPatternX(),this.fillPatternY()),k.rotate(e.Konva.getAngle(this.fillPatternRotation())),k.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),k.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const I=k.getMatrix(),U=typeof DOMMatrix>"u"?{a:I[0],b:I[1],c:I[2],d:I[3],e:I[4],f:I[5]}:new DOMMatrix(I);R.setTransform(U)}return R}}_getLinearGradient(){return this._getCache(_,this.__getLinearGradient)}__getLinearGradient(){const x=this.fillLinearGradientColorStops();if(x){const R=g(),k=this.fillLinearGradientStartPoint(),I=this.fillLinearGradientEndPoint(),U=R.createLinearGradient(k.x,k.y,I.x,I.y);for(let D=0;D<x.length;D+=2)U.addColorStop(x[D],x[D+1]);return U}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){const x=this.fillRadialGradientColorStops();if(x){const R=g(),k=this.fillRadialGradientStartPoint(),I=this.fillRadialGradientEndPoint(),U=R.createRadialGradient(k.x,k.y,this.fillRadialGradientStartRadius(),I.x,I.y,this.fillRadialGradientEndRadius());for(let D=0;D<x.length;D+=2)U.addColorStop(x[D],x[D+1]);return U}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const x=i.Util.colorToRGBA(this.shadowColor());if(x)return"rgba("+x.r+","+x.g+","+x.b+","+x.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const x=this.hitStrokeWidth();return x==="auto"?this.hasStroke():this.strokeEnabled()&&!!x}intersects(x){const R=this.getStage();if(!R)return!1;const k=R.bufferHitCanvas;return k.getContext().clear(),this.drawHit(k,void 0,!0),k.context.getImageData(Math.round(x.x),Math.round(x.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(x){var R;if(!((R=this.attrs.perfectDrawEnabled)!==null&&R!==void 0?R:!0))return!1;const I=x||this.hasFill(),U=this.hasStroke(),D=this.getAbsoluteOpacity()!==1;if(I&&U&&D)return!0;const K=this.hasShadow(),y=this.shadowForStrokeEnabled();return!!(I&&U&&K&&y)}setStrokeHitEnabled(x){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),x?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const x=this.size();return{x:this._centroid?-x.width/2:0,y:this._centroid?-x.height/2:0,width:x.width,height:x.height}}getClientRect(x={}){let R=!1,k=this.getParent();for(;k;){if(k.isCached()){R=!0;break}k=k.getParent()}const I=x.skipTransform,U=x.relativeTo||R&&this.getStage()||void 0,D=this.getSelfRect(),y=!x.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,A=D.width+y,F=D.height+y,M=!x.skipShadow&&this.hasShadow(),G=M?this.shadowOffsetX():0,q=M?this.shadowOffsetY():0,B=A+Math.abs(G),X=F+Math.abs(q),it=M&&this.shadowBlur()||0,W=B+it*2,O=X+it*2,H={width:W,height:O,x:-(y/2+it)+Math.min(G,0)+D.x,y:-(y/2+it)+Math.min(q,0)+D.y};return I?H:this._transformedRect(H,U)}drawScene(x,R,k){const I=this.getLayer(),U=x||I.getCanvas(),D=U.getContext(),K=this._getCanvasCache(),y=this.getSceneFunc(),A=this.hasShadow();let F;const M=R===this;if(!this.isVisible()&&!M)return this;if(K){D.save();const G=this.getAbsoluteTransform(R).getMatrix();return D.transform(G[0],G[1],G[2],G[3],G[4],G[5]),this._drawCachedSceneCanvas(D),D.restore(),this}if(!y)return this;if(D.save(),this._useBufferCanvas()){F=this.getStage();const G=k||F.bufferCanvas,q=G.getContext();q.clear(),q.save(),q._applyLineJoin(this);const B=this.getAbsoluteTransform(R).getMatrix();q.transform(B[0],B[1],B[2],B[3],B[4],B[5]),y.call(this,q,this),q.restore();const X=G.pixelRatio;A&&D._applyShadow(this),D._applyOpacity(this),D._applyGlobalCompositeOperation(this),D.drawImage(G._canvas,G.x||0,G.y||0,G.width/X,G.height/X)}else{if(D._applyLineJoin(this),!M){const G=this.getAbsoluteTransform(R).getMatrix();D.transform(G[0],G[1],G[2],G[3],G[4],G[5]),D._applyOpacity(this),D._applyGlobalCompositeOperation(this)}A&&D._applyShadow(this),y.call(this,D,this)}return D.restore(),this}drawHit(x,R,k=!1){if(!this.shouldDrawHit(R,k))return this;const I=this.getLayer(),U=x||I.hitCanvas,D=U&&U.getContext(),K=this.hitFunc()||this.sceneFunc(),y=this._getCanvasCache(),A=y&&y.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),A){D.save();const M=this.getAbsoluteTransform(R).getMatrix();return D.transform(M[0],M[1],M[2],M[3],M[4],M[5]),this._drawCachedHitCanvas(D),D.restore(),this}if(!K)return this;if(D.save(),D._applyLineJoin(this),!(this===R)){const M=this.getAbsoluteTransform(R).getMatrix();D.transform(M[0],M[1],M[2],M[3],M[4],M[5])}return K.call(this,D,this),D.restore(),this}drawHitFromCache(x=0){const R=this._getCanvasCache(),k=this._getCachedSceneCanvas(),I=R.hit,U=I.getContext(),D=I.getWidth(),K=I.getHeight();U.clear(),U.drawImage(k._canvas,0,0,D,K);try{const y=U.getImageData(0,0,D,K),A=y.data,F=A.length,M=i.Util._hexToRgb(this.colorKey);for(let G=0;G<F;G+=4)A[G+3]>x?(A[G]=M.r,A[G+1]=M.g,A[G+2]=M.b,A[G+3]=255):A[G+3]=0;U.putImageData(y,0,0)}catch(y){i.Util.error("Unable to draw hit graph from cached scene canvas. "+y.message)}return this}hasPointerCapture(x){return o.hasPointerCapture(x,this)}setPointerCapture(x){o.setPointerCapture(x,this)}releaseCapture(x){o.releaseCapture(x,this)}}t.Shape=C,C.prototype._fillFunc=v,C.prototype._strokeFunc=S,C.prototype._fillFuncHit=P,C.prototype._strokeFuncHit=f,C.prototype._centroid=!1,C.prototype.nodeType="Shape",(0,a._registerNode)(C),C.prototype.eventListeners={},C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",h),C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",T),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",N),n.Factory.addGetterSetter(C,"stroke",void 0,(0,s.getStringOrGradientValidator)()),n.Factory.addGetterSetter(C,"strokeWidth",2,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(C,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(C,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(C,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(C,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(C,"lineJoin"),n.Factory.addGetterSetter(C,"lineCap"),n.Factory.addGetterSetter(C,"sceneFunc"),n.Factory.addGetterSetter(C,"hitFunc"),n.Factory.addGetterSetter(C,"dash"),n.Factory.addGetterSetter(C,"dashOffset",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowColor",void 0,(0,s.getStringValidator)()),n.Factory.addGetterSetter(C,"shadowBlur",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowOpacity",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(C,"shadowOffsetX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowOffsetY",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternImage"),n.Factory.addGetterSetter(C,"fill",void 0,(0,s.getStringOrGradientValidator)()),n.Factory.addGetterSetter(C,"fillPatternX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternY",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(C,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(C,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(C,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(C,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(C,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(C,"fillEnabled",!0),n.Factory.addGetterSetter(C,"strokeEnabled",!0),n.Factory.addGetterSetter(C,"shadowEnabled",!0),n.Factory.addGetterSetter(C,"dashEnabled",!0),n.Factory.addGetterSetter(C,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(C,"fillPriority","color"),n.Factory.addComponentsGetterSetter(C,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(C,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(C,"fillPatternScaleX",1,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternScaleY",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(C,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(C,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(C,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(C,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(C,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(C,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(C,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(C,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(C,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(C,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(C,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(C,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(C,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(C,"fillPatternRotation",0),n.Factory.addGetterSetter(C,"fillRule",void 0,(0,s.getStringValidator)()),n.Factory.backCompat(C,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})($n)),$n}var Rs;function Ra(){if(Rs)return $e;Rs=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.Layer=void 0;const t=At(),e=kn(),i=Rt(),n=gt(),r=Fn(),s=pt(),a=Mt(),o=ft(),l="#",u="beforeDraw",c="draw",_=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=_.length;let d=class extends e.Container{constructor(v){super(v),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(v){return this.getContext().clear(v),this.getHitCanvas().getContext().clear(v),this}setZIndex(v){super.setZIndex(v);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),v<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[v+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const S=this.getStage();return!S||!S.content?!1:(S.content.removeChild(this.getNativeCanvasElement()),this.index<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[this.index+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const v=this.getStage();if(v){const S=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),S[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const v=this.getStage();if(v){const S=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),S[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const v=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),v&&v.parentNode&&t.Util._isInDocument(v)&&v.parentNode.removeChild(v),this}getStage(){return this.parent}setSize({width:v,height:S}){return this.canvas.setSize(v,S),this.hitCanvas.setSize(v,S),this._setSmoothEnabled(),this}_validateAdd(v){const S=v.getType();S!=="Group"&&S!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(v){return v=v||{},v.width=v.width||this.getWidth(),v.height=v.height||this.getHeight(),v.x=v.x!==void 0?v.x:this.x(),v.y=v.y!==void 0?v.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,v)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(v){if(!this.isListening()||!this.isVisible())return null;let S=1,P=!1;for(;;){for(let f=0;f<p;f++){const h=_[f],m=this._getIntersection({x:v.x+h.x*S,y:v.y+h.y*S}),b=m.shape;if(b)return b;if(P=!!m.antialiased,!m.antialiased)break}if(P)S+=1;else return null}}_getIntersection(v){const S=this.hitCanvas.pixelRatio,P=this.hitCanvas.context.getImageData(Math.round(v.x*S),Math.round(v.y*S),1,1).data,f=P[3];if(f===255){const h=t.Util._rgbToHex(P[0],P[1],P[2]),m=a.shapes[l+h];return m?{shape:m}:{antialiased:!0}}else if(f>0)return{antialiased:!0};return{}}drawScene(v,S,P){const f=this.getLayer(),h=v||f&&f.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),e.Container.prototype.drawScene.call(this,h,S,P),this._fire(c,{node:this}),this}drawHit(v,S){const P=this.getLayer(),f=v||P&&P.hitCanvas;return P&&P.clearBeforeDraw()&&P.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,f,S),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(v){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(v)}getHitGraphEnabled(v){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const v=this.parent;!!this.hitCanvas._canvas.parentNode?v.content.removeChild(this.hitCanvas._canvas):v.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return $e.Layer=d,d.prototype.nodeType="Layer",(0,o._registerNode)(d),n.Factory.addGetterSetter(d,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(d,"clearBeforeDraw",!0),n.Factory.addGetterSetter(d,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),$e}var Je={},Es;function nc(){if(Es)return Je;Es=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.FastLayer=void 0;const t=At(),e=Ra(),i=ft();let n=class extends e.Layer{constructor(s){super(s),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Je.FastLayer=n,n.prototype.nodeType="FastLayer",(0,i._registerNode)(n),Je}var Qe={},Ms;function Or(){if(Ms)return Qe;Ms=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Group=void 0;const t=At(),e=kn(),i=ft();let n=class extends e.Container{_validateAdd(s){const a=s.getType();a!=="Group"&&a!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return Qe.Group=n,n.prototype.nodeType="Group",(0,i._registerNode)(n),Qe}var Ze={},Fs;function Nr(){if(Fs)return Ze;Fs=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.Animation=void 0;const t=ft(),e=At(),i=(function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class Le{constructor(s,a){this.id=Le.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=s,this.setLayers(a)}setLayers(s){let a=[];return s&&(a=Array.isArray(s)?s:[s]),this.layers=a,this}getLayers(){return this.layers}addLayer(s){const a=this.layers,o=a.length;for(let l=0;l<o;l++)if(a[l]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const a=Le.animations,o=a.length;for(let l=0;l<o;l++)if(a[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),Le._addAnimation(this),this}stop(){return Le._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const a=s.id,o=this.animations,l=o.length;for(let u=0;u<l;u++)if(o[u].id===a){this.animations.splice(u,1);break}}static _runFrames(){const s={},a=this.animations;for(let o=0;o<a.length;o++){const l=a[o],u=l.layers,c=l.func;l._updateFrameObject(i());const _=u.length;let p;if(c?p=c.call(l,l.frame)!==!1:p=!0,!!p)for(let d=0;d<_;d++){const g=u[d];g._id!==void 0&&(s[g._id]=g)}}for(const o in s)s.hasOwnProperty(o)&&s[o].batchDraw()}static _animationLoop(){const s=Le;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return Ze.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,Ze}var Jn={},ks;function rc(){return ks||(ks=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=At(),i=Nr(),n=Rt(),r=ft(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,l=3,u=["fill","stroke","shadowColor"];let c=0;class _{constructor(g,v,S,P,f,h,m){this.prop=g,this.propFunc=v,this.begin=P,this._pos=P,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=m,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=f-this.begin,this.pause()}fire(g){const v=this[g];v&&v()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===o?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(g){const v=this,S=g.node,P=S._id,f=g.easing||t.Easings.Linear,h=!!g.yoyo;let m,b;typeof g.duration>"u"?m=.3:g.duration===0?m=.001:m=g.duration,this.node=S,this._id=c++;const T=S.getLayer()||(S instanceof r.Konva.Stage?S.getLayers():null);T||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){v.tween.onEnterFrame()},T),this.tween=new _(b,function(N){v._tweenFunc(N)},f,0,1,m*1e3,h),this._addListeners(),p.attrs[P]||(p.attrs[P]={}),p.attrs[P][this._id]||(p.attrs[P][this._id]={}),p.tweens[P]||(p.tweens[P]={});for(b in g)s[b]===void 0&&this._addAttr(b,g[b]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,v){const S=this.node,P=S._id;let f,h,m,b,T;const N=p.tweens[P][g];N&&delete p.attrs[P][N][g];let C=S.getAttr(g);if(e.Util._isArray(v))if(f=[],h=Math.max(v.length,C.length),g==="points"&&v.length!==C.length&&(v.length>C.length?(b=C,C=e.Util._prepareArrayForTween(C,v,S.closed())):(m=v,v=e.Util._prepareArrayForTween(v,C,S.closed()))),g.indexOf("fill")===0)for(let w=0;w<h;w++)if(w%2===0)f.push(v[w]-C[w]);else{const x=e.Util.colorToRGBA(C[w]);T=e.Util.colorToRGBA(v[w]),C[w]=x,f.push({r:T.r-x.r,g:T.g-x.g,b:T.b-x.b,a:T.a-x.a})}else for(let w=0;w<h;w++)f.push(v[w]-C[w]);else u.indexOf(g)!==-1?(C=e.Util.colorToRGBA(C),T=e.Util.colorToRGBA(v),f={r:T.r-C.r,g:T.g-C.g,b:T.b-C.b,a:T.a-C.a}):f=v-C;p.attrs[P][this._id][g]={start:C,diff:f,end:v,trueEnd:m,trueStart:b},p.tweens[P][g]=this._id}_tweenFunc(g){const v=this.node,S=p.attrs[v._id][this._id];let P,f,h,m,b,T,N,C;for(P in S){if(f=S[P],h=f.start,m=f.diff,C=f.end,e.Util._isArray(h))if(b=[],N=Math.max(h.length,C.length),P.indexOf("fill")===0)for(T=0;T<N;T++)T%2===0?b.push((h[T]||0)+m[T]*g):b.push("rgba("+Math.round(h[T].r+m[T].r*g)+","+Math.round(h[T].g+m[T].g*g)+","+Math.round(h[T].b+m[T].b*g)+","+(h[T].a+m[T].a*g)+")");else for(T=0;T<N;T++)b.push((h[T]||0)+m[T]*g);else u.indexOf(P)!==-1?b="rgba("+Math.round(h.r+m.r*g)+","+Math.round(h.g+m.g*g)+","+Math.round(h.b+m.b*g)+","+(h.a+m.a*g)+")":b=h+m*g;v.setAttr(P,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,v=p.attrs[g._id][this._id];v.points&&v.points.trueEnd&&g.setAttr("points",v.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,v=p.attrs[g._id][this._id];v.points&&v.points.trueStart&&g.points(v.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,v=this._id,S=p.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const P in S)delete p.tweens[g][P];delete p.attrs[g][v],p.tweens[g]&&(Object.keys(p.tweens[g]).length===0&&delete p.tweens[g],Object.keys(p.attrs[g]).length===0&&delete p.attrs[g])}}t.Tween=p,p.attrs={},p.tweens={},n.Node.prototype.to=function(d){const g=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),g&&g()},new p(d).play()},t.Easings={BackEaseIn(d,g,v,S){return v*(d/=S)*d*((1.70158+1)*d-1.70158)+g},BackEaseOut(d,g,v,S){return v*((d=d/S-1)*d*((1.70158+1)*d+1.70158)+1)+g},BackEaseInOut(d,g,v,S){let P=1.70158;return(d/=S/2)<1?v/2*(d*d*(((P*=1.525)+1)*d-P))+g:v/2*((d-=2)*d*(((P*=1.525)+1)*d+P)+2)+g},ElasticEaseIn(d,g,v,S,P,f){let h=0;return d===0?g:(d/=S)===1?g+v:(f||(f=S*.3),!P||P<Math.abs(v)?(P=v,h=f/4):h=f/(2*Math.PI)*Math.asin(v/P),-(P*Math.pow(2,10*(d-=1))*Math.sin((d*S-h)*(2*Math.PI)/f))+g)},ElasticEaseOut(d,g,v,S,P,f){let h=0;return d===0?g:(d/=S)===1?g+v:(f||(f=S*.3),!P||P<Math.abs(v)?(P=v,h=f/4):h=f/(2*Math.PI)*Math.asin(v/P),P*Math.pow(2,-10*d)*Math.sin((d*S-h)*(2*Math.PI)/f)+v+g)},ElasticEaseInOut(d,g,v,S,P,f){let h=0;return d===0?g:(d/=S/2)===2?g+v:(f||(f=S*(.3*1.5)),!P||P<Math.abs(v)?(P=v,h=f/4):h=f/(2*Math.PI)*Math.asin(v/P),d<1?-.5*(P*Math.pow(2,10*(d-=1))*Math.sin((d*S-h)*(2*Math.PI)/f))+g:P*Math.pow(2,-10*(d-=1))*Math.sin((d*S-h)*(2*Math.PI)/f)*.5+v+g)},BounceEaseOut(d,g,v,S){return(d/=S)<1/2.75?v*(7.5625*d*d)+g:d<2/2.75?v*(7.5625*(d-=1.5/2.75)*d+.75)+g:d<2.5/2.75?v*(7.5625*(d-=2.25/2.75)*d+.9375)+g:v*(7.5625*(d-=2.625/2.75)*d+.984375)+g},BounceEaseIn(d,g,v,S){return v-t.Easings.BounceEaseOut(S-d,0,v,S)+g},BounceEaseInOut(d,g,v,S){return d<S/2?t.Easings.BounceEaseIn(d*2,0,v,S)*.5+g:t.Easings.BounceEaseOut(d*2-S,0,v,S)*.5+v*.5+g},EaseIn(d,g,v,S){return v*(d/=S)*d+g},EaseOut(d,g,v,S){return-v*(d/=S)*(d-2)+g},EaseInOut(d,g,v,S){return(d/=S/2)<1?v/2*d*d+g:-v/2*(--d*(d-2)-1)+g},StrongEaseIn(d,g,v,S){return v*(d/=S)*d*d*d*d+g},StrongEaseOut(d,g,v,S){return v*((d=d/S-1)*d*d*d*d+1)+g},StrongEaseInOut(d,g,v,S){return(d/=S/2)<1?v/2*d*d*d*d*d+g:v/2*((d-=2)*d*d*d*d+2)+g},Linear(d,g,v,S){return v*d/S+g}}})(Jn)),Jn}var Os;function sc(){return Os||(Os=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=ft(),i=At(),n=Rt(),r=kn(),s=ic(),a=Ra(),o=nc(),l=Or(),u=kr(),c=Mt(),_=Nr(),p=rc(),d=Ta(),g=Fn();t.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:n.Node,Container:r.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:_.Animation,Tween:p.Tween,Easings:p.Easings,Context:d.Context,Canvas:g.Canvas}),t.default=t.Konva})(qn)),qn}var ti={},Ns;function oc(){if(Ns)return ti;Ns=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.Arc=void 0;const t=gt(),e=Mt(),i=ft(),n=pt(),r=ft();let s=class extends e.Shape{_sceneFunc(o){const l=i.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,u),o.arc(0,0,this.innerRadius(),l,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),u=this.clockwise(),c=i.Konva.getAngle(u?360-this.angle():this.angle()),_=Math.cos(Math.min(c,Math.PI)),p=1,d=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),g=Math.sin(Math.min(c,Math.PI/2)),v=_*(_>0?o:l),S=p*l,P=d*(d>0?o:l),f=g*(g>0?l:o);return{x:v,y:u?-1*f:P,width:S-v,height:f-P}}};return ti.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1,(0,n.getBooleanValidator)()),ti}var ei={},ii={},Ls;function Ea(){if(Ls)return ii;Ls=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Line=void 0;const t=gt(),e=ft(),i=Mt(),n=pt();function r(o,l,u,c,_,p,d){const g=Math.sqrt(Math.pow(u-o,2)+Math.pow(c-l,2)),v=Math.sqrt(Math.pow(_-u,2)+Math.pow(p-c,2)),S=d*g/(g+v),P=d*v/(g+v),f=u-S*(_-o),h=c-S*(p-l),m=u+P*(_-o),b=c+P*(p-l);return[f,h,m,b]}function s(o,l){const u=o.length,c=[];for(let _=2;_<u-2;_+=2){const p=r(o[_-2],o[_-1],o[_],o[_+1],o[_+2],o[_+3],l);isNaN(p[0])||(c.push(p[0]),c.push(p[1]),c.push(o[_]),c.push(o[_+1]),c.push(p[2]),c.push(p[3]))}return c}let a=class extends i.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const u=this.points(),c=u.length,_=this.tension(),p=this.closed(),d=this.bezier();if(!c)return;let g=0;if(l.beginPath(),l.moveTo(u[0],u[1]),_!==0&&c>4){const v=this.getTensionPoints(),S=v.length;for(g=p?0:4,p||l.quadraticCurveTo(v[0],v[1],v[2],v[3]);g<S-2;)l.bezierCurveTo(v[g++],v[g++],v[g++],v[g++],v[g++],v[g++]);p||l.quadraticCurveTo(v[S-2],v[S-1],u[c-2],u[c-1])}else if(d)for(g=2;g<c;)l.bezierCurveTo(u[g++],u[g++],u[g++],u[g++],u[g++],u[g++]);else for(g=2;g<c;g+=2)l.lineTo(u[g],u[g+1]);p?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),u=l.length,c=this.tension(),_=r(l[u-2],l[u-1],l[0],l[1],l[2],l[3],c),p=r(l[u-4],l[u-3],l[u-2],l[u-1],l[0],l[1],c),d=s(l,c);return[_[2],_[3]].concat(d).concat([p[0],p[1],l[u-2],l[u-1],p[2],p[3],_[0],_[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let u=l[0],c=l[0],_=l[1],p=l[1],d,g;for(let v=0;v<l.length/2;v++)d=l[v*2],g=l[v*2+1],u=Math.min(u,d),c=Math.max(c,d),_=Math.min(_,g),p=Math.max(p,g);return{x:u,y:_,width:c-u,height:p-_}}};return ii.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(a),t.Factory.addGetterSetter(a,"closed",!1),t.Factory.addGetterSetter(a,"bezier",!1),t.Factory.addGetterSetter(a,"tension",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(a,"points",[],(0,n.getNumberArrayValidator)()),ii}var ni={},Qn={},Gs;function ac(){return Gs||(Gs=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,o,l)=>{let u,c;const p=l/2;u=0;for(let d=0;d<20;d++)c=p*t.tValues[20][d]+p,u+=t.cValues[20][d]*n(a,o,c);return p*u};t.getCubicArcLength=e;const i=(a,o,l)=>{l===void 0&&(l=1);const u=a[0]-2*a[1]+a[2],c=o[0]-2*o[1]+o[2],_=2*a[1]-2*a[0],p=2*o[1]-2*o[0],d=4*(u*u+c*c),g=4*(u*_+c*p),v=_*_+p*p;if(d===0)return l*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(o[2]-o[0],2));const S=g/(2*d),P=v/d,f=l+S,h=P-S*S,m=f*f+h>0?Math.sqrt(f*f+h):0,b=S*S+h>0?Math.sqrt(S*S+h):0,T=S+Math.sqrt(S*S+h)!==0?h*Math.log(Math.abs((f+m)/(S+b))):0;return Math.sqrt(d)/2*(f*m-S*b+T)};t.getQuadraticArcLength=i;function n(a,o,l){const u=r(1,l,a),c=r(1,l,o),_=u*u+c*c;return Math.sqrt(_)}const r=(a,o,l)=>{const u=l.length-1;let c,_;if(u===0)return 0;if(a===0){_=0;for(let p=0;p<=u;p++)_+=t.binomialCoefficients[u][p]*Math.pow(1-o,u-p)*Math.pow(o,p)*l[p];return _}else{c=new Array(u);for(let p=0;p<u;p++)c[p]=u*(l[p+1]-l[p]);return r(a-1,o,c)}},s=(a,o,l)=>{let u=1,c=a/o,_=(a-l(c))/o,p=0;for(;u>.001;){const d=l(c+_),g=Math.abs(a-d)/o;if(g<u)u=g,c+=_;else{const v=l(c-_),S=Math.abs(a-v)/o;S<u?(u=S,c-=_):_/=2}if(p++,p>500)break}return c};t.t2length=s})(Qn)),Qn}var Ds;function Lr(){if(Ds)return ni;Ds=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.Path=void 0;const t=gt(),e=ft(),i=Mt(),n=ac();let r=class qt extends i.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=qt.parsePathData(this.data()),this.pathLength=qt.getPathLength(this.dataArray)}_sceneFunc(a){const o=this.dataArray;a.beginPath();let l=!1;for(let u=0;u<o.length;u++){const c=o[u].command,_=o[u].points;switch(c){case"L":a.lineTo(_[0],_[1]);break;case"M":a.moveTo(_[0],_[1]);break;case"C":a.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);break;case"Q":a.quadraticCurveTo(_[0],_[1],_[2],_[3]);break;case"A":const p=_[0],d=_[1],g=_[2],v=_[3],S=_[4],P=_[5],f=_[6],h=_[7],m=g>v?g:v,b=g>v?1:g/v,T=g>v?v/g:1;a.translate(p,d),a.rotate(f),a.scale(b,T),a.arc(0,0,m,S,S+P,1-h),a.scale(1/b,1/T),a.rotate(-f),a.translate(-p,-d);break;case"z":l=!0,a.closePath();break}}!l&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(d){if(d.command==="A"){const g=d.points[4],v=d.points[5],S=d.points[4]+v;let P=Math.PI/180;if(Math.abs(g-S)<P&&(P=Math.abs(g-S)),v<0)for(let f=g-P;f>S;f-=P){const h=qt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],f,0);a.push(h.x,h.y)}else for(let f=g+P;f<S;f+=P){const h=qt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],f,0);a.push(h.x,h.y)}}else if(d.command==="C")for(let g=0;g<=1;g+=.01){const v=qt.getPointOnCubicBezier(g,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);a.push(v.x,v.y)}else a=a.concat(d.points)});let o=a[0],l=a[0],u=a[1],c=a[1],_,p;for(let d=0;d<a.length/2;d++)_=a[d*2],p=a[d*2+1],isNaN(_)||(o=Math.min(o,_),l=Math.max(l,_)),isNaN(p)||(u=Math.min(u,p),c=Math.max(c,p));return{x:o,y:u,width:l-o,height:c-u}}getLength(){return this.pathLength}getPointAtLength(a){return qt.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,o,l,u){return Math.sqrt((l-a)*(l-a)+(u-o)*(u-o))}static getPathLength(a){let o=0;for(let l=0;l<a.length;++l)o+=a[l].pathLength;return o}static getPointAtLengthOfDataArray(a,o){let l,u=0,c=o.length;if(!c)return null;for(;u<c&&a>o[u].pathLength;)a-=o[u].pathLength,++u;if(u===c)return l=o[u-1].points.slice(-2),{x:l[0],y:l[1]};if(a<.01)return o[u].command==="M"?(l=o[u].points.slice(0,2),{x:l[0],y:l[1]}):{x:o[u].start.x,y:o[u].start.y};const _=o[u],p=_.points;switch(_.command){case"L":return qt.getPointOnLine(a,_.start.x,_.start.y,p[0],p[1]);case"C":return qt.getPointOnCubicBezier((0,n.t2length)(a,qt.getPathLength(o),m=>(0,n.getCubicArcLength)([_.start.x,p[0],p[2],p[4]],[_.start.y,p[1],p[3],p[5]],m)),_.start.x,_.start.y,p[0],p[1],p[2],p[3],p[4],p[5]);case"Q":return qt.getPointOnQuadraticBezier((0,n.t2length)(a,qt.getPathLength(o),m=>(0,n.getQuadraticArcLength)([_.start.x,p[0],p[2]],[_.start.y,p[1],p[3]],m)),_.start.x,_.start.y,p[0],p[1],p[2],p[3]);case"A":const d=p[0],g=p[1],v=p[2],S=p[3],P=p[5],f=p[6];let h=p[4];return h+=P*a/_.pathLength,qt.getPointOnEllipticalArc(d,g,v,S,h,f)}return null}static getPointOnLine(a,o,l,u,c,_,p){_=_??o,p=p??l;const d=this.getLineLength(o,l,u,c);if(d<1e-10)return{x:o,y:l};if(u===o)return{x:_,y:p+(c>l?a:-a)};const g=(c-l)/(u-o),v=Math.sqrt(a*a/(1+g*g))*(u<o?-1:1),S=g*v;if(Math.abs(p-l-g*(_-o))<1e-10)return{x:_+v,y:p+S};const P=((_-o)*(u-o)+(p-l)*(c-l))/(d*d),f=o+P*(u-o),h=l+P*(c-l),m=this.getLineLength(_,p,f,h),b=Math.sqrt(a*a-m*m),T=Math.sqrt(b*b/(1+g*g))*(u<o?-1:1),N=g*T;return{x:f+T,y:h+N}}static getPointOnCubicBezier(a,o,l,u,c,_,p,d,g){function v(b){return b*b*b}function S(b){return 3*b*b*(1-b)}function P(b){return 3*b*(1-b)*(1-b)}function f(b){return(1-b)*(1-b)*(1-b)}const h=d*v(a)+_*S(a)+u*P(a)+o*f(a),m=g*v(a)+p*S(a)+c*P(a)+l*f(a);return{x:h,y:m}}static getPointOnQuadraticBezier(a,o,l,u,c,_,p){function d(f){return f*f}function g(f){return 2*f*(1-f)}function v(f){return(1-f)*(1-f)}const S=_*d(a)+u*g(a)+o*v(a),P=p*d(a)+c*g(a)+l*v(a);return{x:S,y:P}}static getPointOnEllipticalArc(a,o,l,u,c,_){const p=Math.cos(_),d=Math.sin(_),g={x:l*Math.cos(c),y:u*Math.sin(c)};return{x:a+(g.x*p-g.y*d),y:o+(g.x*d+g.y*p)}}static parsePathData(a){if(!a)return[];let o=a;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let S=0;S<l.length;S++)o=o.replace(new RegExp(l[S],"g"),"|"+l[S]);const u=o.split("|"),c=[],_=[];let p=0,d=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let v;for(let S=1;S<u.length;S++){let P=u[S],f=P.charAt(0);for(P=P.slice(1),_.length=0;v=g.exec(P);)_.push(v[0]);const h=[];for(let m=0,b=_.length;m<b;m++){if(_[m]==="00"){h.push(0,0);continue}const T=parseFloat(_[m]);isNaN(T)?h.push(0):h.push(T)}for(;h.length>0&&!isNaN(h[0]);){let m="",b=[];const T=p,N=d;let C,w,x,R,k,I,U,D,K,y;switch(f){case"l":p+=h.shift(),d+=h.shift(),m="L",b.push(p,d);break;case"L":p=h.shift(),d=h.shift(),b.push(p,d);break;case"m":const A=h.shift(),F=h.shift();if(p+=A,d+=F,m="M",c.length>2&&c[c.length-1].command==="z"){for(let M=c.length-2;M>=0;M--)if(c[M].command==="M"){p=c[M].points[0]+A,d=c[M].points[1]+F;break}}b.push(p,d),f="l";break;case"M":p=h.shift(),d=h.shift(),m="M",b.push(p,d),f="L";break;case"h":p+=h.shift(),m="L",b.push(p,d);break;case"H":p=h.shift(),m="L",b.push(p,d);break;case"v":d+=h.shift(),m="L",b.push(p,d);break;case"V":d=h.shift(),m="L",b.push(p,d);break;case"C":b.push(h.shift(),h.shift(),h.shift(),h.shift()),p=h.shift(),d=h.shift(),b.push(p,d);break;case"c":b.push(p+h.shift(),d+h.shift(),p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="C",b.push(p,d);break;case"S":w=p,x=d,C=c[c.length-1],C.command==="C"&&(w=p+(p-C.points[2]),x=d+(d-C.points[3])),b.push(w,x,h.shift(),h.shift()),p=h.shift(),d=h.shift(),m="C",b.push(p,d);break;case"s":w=p,x=d,C=c[c.length-1],C.command==="C"&&(w=p+(p-C.points[2]),x=d+(d-C.points[3])),b.push(w,x,p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="C",b.push(p,d);break;case"Q":b.push(h.shift(),h.shift()),p=h.shift(),d=h.shift(),b.push(p,d);break;case"q":b.push(p+h.shift(),d+h.shift()),p+=h.shift(),d+=h.shift(),m="Q",b.push(p,d);break;case"T":w=p,x=d,C=c[c.length-1],C.command==="Q"&&(w=p+(p-C.points[0]),x=d+(d-C.points[1])),p=h.shift(),d=h.shift(),m="Q",b.push(w,x,p,d);break;case"t":w=p,x=d,C=c[c.length-1],C.command==="Q"&&(w=p+(p-C.points[0]),x=d+(d-C.points[1])),p+=h.shift(),d+=h.shift(),m="Q",b.push(w,x,p,d);break;case"A":R=h.shift(),k=h.shift(),I=h.shift(),U=h.shift(),D=h.shift(),K=p,y=d,p=h.shift(),d=h.shift(),m="A",b=this.convertEndpointToCenterParameterization(K,y,p,d,U,D,R,k,I);break;case"a":R=h.shift(),k=h.shift(),I=h.shift(),U=h.shift(),D=h.shift(),K=p,y=d,p+=h.shift(),d+=h.shift(),m="A",b=this.convertEndpointToCenterParameterization(K,y,p,d,U,D,R,k,I);break}c.push({command:m||f,points:b,start:{x:T,y:N},pathLength:this.calcLength(T,N,m||f,b)})}(f==="z"||f==="Z")&&c.push({command:"z",points:[],start:void 0,pathLength:0})}return c}static calcLength(a,o,l,u){let c,_,p,d;const g=qt;switch(l){case"L":return g.getLineLength(a,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([a,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([a,u[0],u[2]],[o,u[1],u[3]],1);case"A":c=0;const v=u[4],S=u[5],P=u[4]+S;let f=Math.PI/180;if(Math.abs(v-P)<f&&(f=Math.abs(v-P)),_=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),S<0)for(d=v-f;d>P;d-=f)p=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],d,0),c+=g.getLineLength(_.x,_.y,p.x,p.y),_=p;else for(d=v+f;d<P;d+=f)p=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],d,0),c+=g.getLineLength(_.x,_.y,p.x,p.y),_=p;return p=g.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],P,0),c+=g.getLineLength(_.x,_.y,p.x,p.y),c}return 0}static convertEndpointToCenterParameterization(a,o,l,u,c,_,p,d,g){const v=g*(Math.PI/180),S=Math.cos(v)*(a-l)/2+Math.sin(v)*(o-u)/2,P=-1*Math.sin(v)*(a-l)/2+Math.cos(v)*(o-u)/2,f=S*S/(p*p)+P*P/(d*d);f>1&&(p*=Math.sqrt(f),d*=Math.sqrt(f));let h=Math.sqrt((p*p*(d*d)-p*p*(P*P)-d*d*(S*S))/(p*p*(P*P)+d*d*(S*S)));c===_&&(h*=-1),isNaN(h)&&(h=0);const m=h*p*P/d,b=h*-d*S/p,T=(a+l)/2+Math.cos(v)*m-Math.sin(v)*b,N=(o+u)/2+Math.sin(v)*m+Math.cos(v)*b,C=function(D){return Math.sqrt(D[0]*D[0]+D[1]*D[1])},w=function(D,K){return(D[0]*K[0]+D[1]*K[1])/(C(D)*C(K))},x=function(D,K){return(D[0]*K[1]<D[1]*K[0]?-1:1)*Math.acos(w(D,K))},R=x([1,0],[(S-m)/p,(P-b)/d]),k=[(S-m)/p,(P-b)/d],I=[(-1*S-m)/p,(-1*P-b)/d];let U=x(k,I);return w(k,I)<=-1&&(U=Math.PI),w(k,I)>=1&&(U=0),_===0&&U>0&&(U=U-2*Math.PI),_===1&&U<0&&(U=U+2*Math.PI),[T,N,p,d,R,U,v,_]}};return ni.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(r),t.Factory.addGetterSetter(r,"data"),ni}var Is;function lc(){if(Is)return ei;Is=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Arrow=void 0;const t=gt(),e=Ea(),i=pt(),n=ft(),r=Lr();let s=class extends e.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,u=this.points();let c=u;const _=this.tension()!==0&&u.length>4;_&&(c=this.getTensionPoints());const p=this.pointerLength(),d=u.length;let g,v;if(_){const f=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],u[d-2],u[d-1]],h=r.Path.calcLength(c[c.length-4],c[c.length-3],"C",f),m=r.Path.getPointOnQuadraticBezier(Math.min(1,1-p/h),f[0],f[1],f[2],f[3],f[4],f[5]);g=u[d-2]-m.x,v=u[d-1]-m.y}else g=u[d-2]-u[d-4],v=u[d-1]-u[d-3];const S=(Math.atan2(v,g)+l)%l,P=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[d-2],u[d-1]),o.rotate(S),o.moveTo(0,0),o.lineTo(-p,P/2),o.lineTo(-p,-P/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),_?(g=(c[0]+c[2])/2-u[0],v=(c[1]+c[3])/2-u[1]):(g=u[2]-u[0],v=u[3]-u[1]),o.rotate((Math.atan2(-v,-g)+l)%l),o.moveTo(0,0),o.lineTo(-p,P/2),o.lineTo(-p,-P/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}};return ei.Arrow=s,s.prototype.className="Arrow",(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"pointerLength",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerWidth",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerAtBeginning",!1),t.Factory.addGetterSetter(s,"pointerAtEnding",!0),ei}var ri={},Us;function hc(){if(Us)return ri;Us=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Circle=void 0;const t=gt(),e=Mt(),i=pt(),n=ft();let r=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return ri.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),ri}var si={},Bs;function cc(){if(Bs)return si;Bs=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Ellipse=void 0;const t=gt(),e=Mt(),i=pt(),n=ft();let r=class extends e.Shape{_sceneFunc(a){const o=this.radiusX(),l=this.radiusY();a.beginPath(),a.save(),o!==l&&a.scale(1,l/o),a.arc(0,0,o,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return si.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(r),t.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),t.Factory.addGetterSetter(r,"radiusX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"radiusY",0,(0,i.getNumberValidator)()),si}var oi={},Vs;function dc(){if(Vs)return oi;Vs=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.Image=void 0;const t=At(),e=gt(),i=Mt(),n=ft(),r=pt();class s extends i.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),u=this.getHeight(),c=this.cornerRadius(),_=this.attrs.image;let p;if(_){const d=this.attrs.cropWidth,g=this.attrs.cropHeight;d&&g?p=[_,this.cropX(),this.cropY(),d,g,0,0,l,u]:p=[_,0,0,l,u]}(this.hasFill()||this.hasStroke()||c)&&(o.beginPath(),c?t.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)),_&&(c&&o.clip(),o.drawImage.apply(o,p))}_hitFunc(o){const l=this.width(),u=this.height(),c=this.cornerRadius();o.beginPath(),c?t.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,u=null){const c=t.Util.createImageElement();c.onload=function(){const _=new s({image:c});l(_)},c.onerror=u,c.crossOrigin="Anonymous",c.src=o}}return oi.Image=s,s.prototype.className="Image",(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,r.getNumberValidator)()),oi}var Ae={},Hs;function uc(){if(Hs)return Ae;Hs=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.Tag=Ae.Label=void 0;const t=gt(),e=Mt(),i=Or(),n=pt(),r=ft(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",o="none",l="up",u="right",c="down",_="left",p=s.length;let d=class extends i.Group{constructor(S){super(S),this.on("add.konva",function(P){this._addListeners(P.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(S){let P=this,f;const h=function(){P._sync()};for(f=0;f<p;f++)S.on(s[f]+a,h)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let S=this.getText(),P=this.getTag(),f,h,m,b,T,N,C;if(S&&P){switch(f=S.width(),h=S.height(),m=P.pointerDirection(),b=P.pointerWidth(),C=P.pointerHeight(),T=0,N=0,m){case l:T=f/2,N=-1*C;break;case u:T=f+b,N=h/2;break;case c:T=f/2,N=h+C;break;case _:T=-1*b,N=h/2;break}P.setAttrs({x:-1*T,y:-1*N,width:f,height:h}),S.setAttrs({x:-1*T,y:-1*N})}}};Ae.Label=d,d.prototype.className="Label",(0,r._registerNode)(d);class g extends e.Shape{_sceneFunc(S){const P=this.width(),f=this.height(),h=this.pointerDirection(),m=this.pointerWidth(),b=this.pointerHeight(),T=this.cornerRadius();let N=0,C=0,w=0,x=0;typeof T=="number"?N=C=w=x=Math.min(T,P/2,f/2):(N=Math.min(T[0]||0,P/2,f/2),C=Math.min(T[1]||0,P/2,f/2),x=Math.min(T[2]||0,P/2,f/2),w=Math.min(T[3]||0,P/2,f/2)),S.beginPath(),S.moveTo(N,0),h===l&&(S.lineTo((P-m)/2,0),S.lineTo(P/2,-1*b),S.lineTo((P+m)/2,0)),S.lineTo(P-C,0),S.arc(P-C,C,C,Math.PI*3/2,0,!1),h===u&&(S.lineTo(P,(f-b)/2),S.lineTo(P+m,f/2),S.lineTo(P,(f+b)/2)),S.lineTo(P,f-x),S.arc(P-x,f-x,x,0,Math.PI/2,!1),h===c&&(S.lineTo((P+m)/2,f),S.lineTo(P/2,f+b),S.lineTo((P-m)/2,f)),S.lineTo(w,f),S.arc(w,f-w,w,Math.PI/2,Math.PI,!1),h===_&&(S.lineTo(0,(f+b)/2),S.lineTo(-1*m,f/2),S.lineTo(0,(f-b)/2)),S.lineTo(0,N),S.arc(N,N,N,Math.PI,Math.PI*3/2,!1),S.closePath(),S.fillStrokeShape(this)}getSelfRect(){let S=0,P=0,f=this.pointerWidth(),h=this.pointerHeight(),m=this.pointerDirection(),b=this.width(),T=this.height();return m===l?(P-=h,T+=h):m===c?T+=h:m===_?(S-=f*1.5,b+=f):m===u&&(b+=f*1.5),{x:S,y:P,width:b,height:T}}}return Ae.Tag=g,g.prototype.className="Tag",(0,r._registerNode)(g),t.Factory.addGetterSetter(g,"pointerDirection",o),t.Factory.addGetterSetter(g,"pointerWidth",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(g,"pointerHeight",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(g,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Ae}var ai={},Ws;function Ma(){if(Ws)return ai;Ws=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Rect=void 0;const t=gt(),e=Mt(),i=ft(),n=At(),r=pt();let s=class extends e.Shape{_sceneFunc(o){const l=this.cornerRadius(),u=this.width(),c=this.height();o.beginPath(),l?n.Util.drawRoundedRectPath(o,u,c,l):o.rect(0,0,u,c),o.closePath(),o.fillStrokeShape(this)}};return ai.Rect=s,s.prototype.className="Rect",(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),ai}var li={},qs;function fc(){if(qs)return li;qs=1,Object.defineProperty(li,"__esModule",{value:!0}),li.RegularPolygon=void 0;const t=gt(),e=Mt(),i=pt(),n=ft();let r=class extends e.Shape{_sceneFunc(a){const o=this._getPoints();a.beginPath(),a.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)a.lineTo(o[l].x,o[l].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let u=0;u<a;u++)l.push({x:o*Math.sin(u*2*Math.PI/a),y:-1*o*Math.cos(u*2*Math.PI/a)});return l}getSelfRect(){const a=this._getPoints();let o=a[0].x,l=a[0].y,u=a[0].x,c=a[0].y;return a.forEach(_=>{o=Math.min(o,_.x),l=Math.max(l,_.x),u=Math.min(u,_.y),c=Math.max(c,_.y)}),{x:o,y:u,width:l-o,height:c-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return li.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"sides",0,(0,i.getNumberValidator)()),li}var hi={},js;function gc(){if(js)return hi;js=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Ring=void 0;const t=gt(),e=Mt(),i=pt(),n=ft(),r=Math.PI*2;let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,r,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),r,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return hi.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),hi}var ci={},zs;function pc(){if(zs)return ci;zs=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Sprite=void 0;const t=gt(),e=Mt(),i=Nr(),n=pt(),r=ft();let s=class extends e.Shape{constructor(o){super(o),this._updated=!0,this.anim=new i.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),u=this.frameIndex(),c=u*4,_=this.animations()[l],p=this.frameOffsets(),d=_[c+0],g=_[c+1],v=_[c+2],S=_[c+3],P=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,v,S),o.closePath(),o.fillStrokeShape(this)),P)if(p){const f=p[l],h=u*2;o.drawImage(P,d,g,v,S,f[h+0],f[h+1],v,S)}else o.drawImage(P,d,g,v,S,0,0,v,S)}_hitFunc(o){const l=this.animation(),u=this.frameIndex(),c=u*4,_=this.animations()[l],p=this.frameOffsets(),d=_[c+2],g=_[c+3];if(o.beginPath(),p){const v=p[l],S=u*2;o.rect(v[S+0],v[S+1],d,g)}else o.rect(0,0,d,g);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),u=this.animations(),c=u[l],_=c.length/4;o<_-1?this.frameIndex(o+1):this.frameIndex(0)}};return ci.Sprite=s,s.prototype.className="Sprite",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"animation"),t.Factory.addGetterSetter(s,"animations"),t.Factory.addGetterSetter(s,"frameOffsets"),t.Factory.addGetterSetter(s,"image"),t.Factory.addGetterSetter(s,"frameIndex",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"frameRate",17,(0,n.getNumberValidator)()),t.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),ci}var di={},Ks;function _c(){if(Ks)return di;Ks=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Star=void 0;const t=gt(),e=Mt(),i=pt(),n=ft();let r=class extends e.Shape{_sceneFunc(a){const o=this.innerRadius(),l=this.outerRadius(),u=this.numPoints();a.beginPath(),a.moveTo(0,0-l);for(let c=1;c<u*2;c++){const _=c%2===0?l:o,p=_*Math.sin(c*Math.PI/u),d=-1*_*Math.cos(c*Math.PI/u);a.lineTo(p,d)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return di.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"numPoints",5,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),di}var Oe={},Ys;function Fa(){if(Ys)return Oe;Ys=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.Text=void 0,Oe.stringToArray=a;const t=At(),e=gt(),i=Mt(),n=ft(),r=pt(),s=ft();function a(q){return[...q].reduce((B,X,it,W)=>{if(new RegExp("\\p{Emoji}","u").test(X)){const O=W[it+1];O&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(O)?(B.push(X+O),W[it+1]=""):B.push(X)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(X+(W[it+1]||""))?B.push(X+W[it+1]):it>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(X)?B[B.length-1]+=X:X&&B.push(X);return B},[])}const o="auto",l="center",u="inherit",c="justify",_="Change.konva",p="2d",d="-",g="left",v="text",S="Text",P="top",f="bottom",h="middle",m="normal",b="px ",T=" ",N="right",C="rtl",w="word",x="char",R="none",k="…",I=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],U=I.length;function D(q){return q.split(",").map(B=>{B=B.trim();const X=B.indexOf(" ")>=0,it=B.indexOf('"')>=0||B.indexOf("'")>=0;return X&&!it&&(B=`"${B}"`),B}).join(", ")}let K;function y(){return K||(K=t.Util.createCanvasElement().getContext(p),K)}function A(q){q.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F(q){q.setAttr("miterLimit",2),q.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function M(q){return q=q||{},!q.fillLinearGradientColorStops&&!q.fillRadialGradientColorStops&&!q.fillPatternImage&&(q.fill=q.fill||"black"),q}let G=class extends i.Shape{constructor(B){super(M(B)),this._partialTextX=0,this._partialTextY=0;for(let X=0;X<U;X++)this.on(I[X]+_,this._setTextData);this._setTextData()}_sceneFunc(B){const X=this.textArr,it=X.length;if(!this.text())return;let W=this.padding(),O=this.fontSize(),H=this.lineHeight()*O,Z=this.verticalAlign(),nt=this.direction(),ot=0,E=this.align(),L=this.getWidth(),V=this.letterSpacing(),j=this.fill(),Y=this.textDecoration(),z=Y.indexOf("underline")!==-1,J=Y.indexOf("line-through")!==-1,tt;nt=nt===u?B.direction:nt;let Q=H/2,$=h;if(n.Konva._fixTextRendering){const rt=this.measureSize("M");$="alphabetic",Q=(rt.fontBoundingBoxAscent-rt.fontBoundingBoxDescent)/2+H/2}for(nt===C&&B.setAttr("direction",nt),B.setAttr("font",this._getContextFont()),B.setAttr("textBaseline",$),B.setAttr("textAlign",g),Z===h?ot=(this.getHeight()-it*H-W*2)/2:Z===f&&(ot=this.getHeight()-it*H-W*2),B.translate(W,ot+W),tt=0;tt<it;tt++){let rt=0,et=0;const st=X[tt],at=st.text,lt=st.width,_t=st.lastInParagraph;if(B.save(),E===N?rt+=L-lt-W*2:E===l&&(rt+=(L-lt-W*2)/2),z){B.save(),B.beginPath();const dt=n.Konva._fixTextRendering?Math.round(O/4):Math.round(O/2),xt=rt,vt=Q+et+dt;B.moveTo(xt,vt);const wt=E===c&&!_t?L-W*2:lt;B.lineTo(xt+Math.round(wt),vt),B.lineWidth=O/15;const Nt=this._getLinearGradient();B.strokeStyle=Nt||j,B.stroke(),B.restore()}if(J){B.save(),B.beginPath();const dt=n.Konva._fixTextRendering?-Math.round(O/4):0;B.moveTo(rt,Q+et+dt);const xt=E===c&&!_t?L-W*2:lt;B.lineTo(rt+Math.round(xt),Q+et+dt),B.lineWidth=O/15;const vt=this._getLinearGradient();B.strokeStyle=vt||j,B.stroke(),B.restore()}if(nt!==C&&(V!==0||E===c)){const dt=at.split(" ").length-1,xt=a(at);for(let vt=0;vt<xt.length;vt++){const wt=xt[vt];wt===" "&&!_t&&E===c&&(rt+=(L-W*2-lt)/dt),this._partialTextX=rt,this._partialTextY=Q+et,this._partialText=wt,B.fillStrokeShape(this),rt+=this.measureSize(wt).width+V}}else V!==0&&B.setAttr("letterSpacing",`${V}px`),this._partialTextX=rt,this._partialTextY=Q+et,this._partialText=at,B.fillStrokeShape(this);B.restore(),it>1&&(Q+=H)}}_hitFunc(B){const X=this.getWidth(),it=this.getHeight();B.beginPath(),B.rect(0,0,X,it),B.closePath(),B.fillStrokeShape(this)}setText(B){const X=t.Util._isString(B)?B:B==null?"":B+"";return this._setAttr(v,X),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(B){var X,it,W,O,H,Z,nt,ot,E,L,V;let j=y(),Y=this.fontSize(),z;j.save(),j.font=this._getContextFont(),z=j.measureText(B),j.restore();const J=Y/100;return{actualBoundingBoxAscent:(X=z.actualBoundingBoxAscent)!==null&&X!==void 0?X:71.58203125*J,actualBoundingBoxDescent:(it=z.actualBoundingBoxDescent)!==null&&it!==void 0?it:0,actualBoundingBoxLeft:(W=z.actualBoundingBoxLeft)!==null&&W!==void 0?W:-7.421875*J,actualBoundingBoxRight:(O=z.actualBoundingBoxRight)!==null&&O!==void 0?O:75.732421875*J,alphabeticBaseline:(H=z.alphabeticBaseline)!==null&&H!==void 0?H:0,emHeightAscent:(Z=z.emHeightAscent)!==null&&Z!==void 0?Z:100*J,emHeightDescent:(nt=z.emHeightDescent)!==null&&nt!==void 0?nt:-20*J,fontBoundingBoxAscent:(ot=z.fontBoundingBoxAscent)!==null&&ot!==void 0?ot:91*J,fontBoundingBoxDescent:(E=z.fontBoundingBoxDescent)!==null&&E!==void 0?E:21*J,hangingBaseline:(L=z.hangingBaseline)!==null&&L!==void 0?L:72.80000305175781*J,ideographicBaseline:(V=z.ideographicBaseline)!==null&&V!==void 0?V:-21*J,width:z.width,height:Y}}_getContextFont(){return this.fontStyle()+T+this.fontVariant()+T+(this.fontSize()+b)+D(this.fontFamily())}_addTextLine(B){this.align()===c&&(B=B.trim());const it=this._getTextWidth(B);return this.textArr.push({text:B,width:it,lastInParagraph:!1})}_getTextWidth(B){const X=this.letterSpacing(),it=B.length;return y().measureText(B).width+X*it}_setTextData(){let B=this.text().split(`
`),X=+this.fontSize(),it=0,W=this.lineHeight()*X,O=this.attrs.width,H=this.attrs.height,Z=O!==o&&O!==void 0,nt=H!==o&&H!==void 0,ot=this.padding(),E=O-ot*2,L=H-ot*2,V=0,j=this.wrap(),Y=j!==R,z=j!==x&&Y,J=this.ellipsis();this.textArr=[],y().font=this._getContextFont();const tt=J?this._getTextWidth(k):0;for(let Q=0,$=B.length;Q<$;++Q){let rt=B[Q],et=this._getTextWidth(rt);if(Z&&et>E)for(;rt.length>0;){let st=0,at=a(rt).length,lt="",_t=0;for(;st<at;){const dt=st+at>>>1,xt=a(rt),vt=xt.slice(0,dt+1).join(""),wt=this._getTextWidth(vt);(J&&nt&&V+W>L?wt+tt:wt)<=E?(st=dt+1,lt=vt,_t=wt):at=dt}if(lt){if(z){const vt=a(rt),wt=a(lt),Nt=vt[wt.length],pe=Nt===T||Nt===d;let we;if(pe&&_t<=E)we=wt.length;else{const Ut=wt.lastIndexOf(T),Xt=wt.lastIndexOf(d);we=Math.max(Ut,Xt)+1}we>0&&(st=we,lt=vt.slice(0,st).join(""),_t=this._getTextWidth(lt))}if(lt=lt.trimRight(),this._addTextLine(lt),it=Math.max(it,_t),V+=W,this._shouldHandleEllipsis(V)){this._tryToAddEllipsisToLastLine();break}if(rt=a(rt).slice(st).join("").trimLeft(),rt.length>0&&(et=this._getTextWidth(rt),et<=E)){this._addTextLine(rt),V+=W,it=Math.max(it,et);break}}else break}else this._addTextLine(rt),V+=W,it=Math.max(it,et),this._shouldHandleEllipsis(V)&&Q<$-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),nt&&V+W>L)break}this.textHeight=X,this.textWidth=it}_shouldHandleEllipsis(B){const X=+this.fontSize(),it=this.lineHeight()*X,W=this.attrs.height,O=W!==o&&W!==void 0,H=this.padding(),Z=W-H*2;return!(this.wrap()!==R)||O&&B+it>Z}_tryToAddEllipsisToLastLine(){const B=this.attrs.width,X=B!==o&&B!==void 0,it=this.padding(),W=B-it*2,O=this.ellipsis(),H=this.textArr[this.textArr.length-1];!H||!O||(X&&(this._getTextWidth(H.text+k)<W||(H.text=H.text.slice(0,H.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(H.text+k))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const B=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,X=this.hasShadow();return B&&X?!0:super._useBufferCanvas()}};return Oe.Text=G,G.prototype._fillFunc=A,G.prototype._strokeFunc=F,G.prototype.className=S,G.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(G),e.Factory.overWriteSetter(G,"width",(0,r.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(G,"height",(0,r.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(G,"direction",u),e.Factory.addGetterSetter(G,"fontFamily","Arial"),e.Factory.addGetterSetter(G,"fontSize",12,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(G,"fontStyle",m),e.Factory.addGetterSetter(G,"fontVariant",m),e.Factory.addGetterSetter(G,"padding",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(G,"align",g),e.Factory.addGetterSetter(G,"verticalAlign",P),e.Factory.addGetterSetter(G,"lineHeight",1,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(G,"wrap",w),e.Factory.addGetterSetter(G,"ellipsis",!1,(0,r.getBooleanValidator)()),e.Factory.addGetterSetter(G,"letterSpacing",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(G,"text","",(0,r.getStringValidator)()),e.Factory.addGetterSetter(G,"textDecoration",""),Oe}var ui={},Xs;function mc(){if(Xs)return ui;Xs=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.TextPath=void 0;const t=At(),e=gt(),i=Mt(),n=Lr(),r=Fa(),s=pt(),a=ft(),o="",l="normal";function u(p){p.fillText(this.partialText,0,0)}function c(p){p.strokeText(this.partialText,0,0)}let _=class extends i.Shape{constructor(d){super(d),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(d){if(!this.attrs.data)return null;const g=this.pathLength;return d-1>g?null:n.Path.getPointAtLengthOfDataArray(d,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(d){d.setAttr("font",this._getContextFont()),d.setAttr("textBaseline",this.textBaseline()),d.setAttr("textAlign","left"),d.save();const g=this.textDecoration(),v=this.fill(),S=this.fontSize(),P=this.glyphInfo;g==="underline"&&d.beginPath();for(let f=0;f<P.length;f++){d.save();const h=P[f].p0;d.translate(h.x,h.y),d.rotate(P[f].rotation),this.partialText=P[f].text,d.fillStrokeShape(this),g==="underline"&&(f===0&&d.moveTo(0,S/2+1),d.lineTo(S,S/2+1)),d.restore()}g==="underline"&&(d.strokeStyle=v,d.lineWidth=S/20,d.stroke()),d.restore()}_hitFunc(d){d.beginPath();const g=this.glyphInfo;if(g.length>=1){const v=g[0].p0;d.moveTo(v.x,v.y)}for(let v=0;v<g.length;v++){const S=g[v].p1;d.lineTo(S.x,S.y)}d.setAttr("lineWidth",this.fontSize()),d.setAttr("strokeStyle",this.colorKey),d.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(d){return r.Text.prototype.setText.call(this,d)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(d){const v=this.dummyCanvas.getContext("2d");v.save(),v.font=this._getContextFont();const S=v.measureText(d);return v.restore(),{width:S.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:d,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=d,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const v=this.letterSpacing(),S=this.align(),P=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*v,0);let h=0;S==="center"&&(h=Math.max(0,this.pathLength/2-f/2)),S==="right"&&(h=Math.max(0,this.pathLength-f));const m=(0,r.stringToArray)(this.text());let b=h;for(let T=0;T<m.length;T++){const N=this._getPointAtLength(b);if(!N)return;let C=this._getTextSize(m[T]).width+v;if(m[T]===" "&&S==="justify"){const U=this.text().split(" ").length-1;C+=(this.pathLength-f)/U}const w=this._getPointAtLength(b+C);if(!w)return;const x=n.Path.getLineLength(N.x,N.y,w.x,w.y);let R=0;if(P)try{R=P(m[T-1],m[T])*this.fontSize()}catch{R=0}N.x+=R,w.x+=R,this.textWidth+=R;const k=n.Path.getPointOnLine(R+x/2,N.x,N.y,w.x,w.y),I=Math.atan2(w.y-N.y,w.x-N.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:m[T],rotation:I,p0:N,p1:w}),b+=C}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const d=[];this.glyphInfo.forEach(function(b){d.push(b.p0.x),d.push(b.p0.y),d.push(b.p1.x),d.push(b.p1.y)});let g=d[0]||0,v=d[0]||0,S=d[1]||0,P=d[1]||0,f,h;for(let b=0;b<d.length/2;b++)f=d[b*2],h=d[b*2+1],g=Math.min(g,f),v=Math.max(v,f),S=Math.min(S,h),P=Math.max(P,h);const m=this.fontSize();return{x:g-m/2,y:S-m/2,width:v-g+m,height:P-S+m}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return ui.TextPath=_,_.prototype._fillFunc=u,_.prototype._strokeFunc=c,_.prototype._fillFuncHit=u,_.prototype._strokeFuncHit=c,_.prototype.className="TextPath",_.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(_),e.Factory.addGetterSetter(_,"data"),e.Factory.addGetterSetter(_,"fontFamily","Arial"),e.Factory.addGetterSetter(_,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"fontStyle",l),e.Factory.addGetterSetter(_,"align","left"),e.Factory.addGetterSetter(_,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"textBaseline","middle"),e.Factory.addGetterSetter(_,"fontVariant",l),e.Factory.addGetterSetter(_,"text",o),e.Factory.addGetterSetter(_,"textDecoration",""),e.Factory.addGetterSetter(_,"kerningFunc",void 0),ui}var fi={},$s;function yc(){if($s)return fi;$s=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Transformer=void 0;const t=At(),e=gt(),i=Rt(),n=Mt(),r=Ma(),s=Or(),a=ft(),o=pt(),l=ft(),u="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(C=>C+`.${u}`).join(" "),_="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],d={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in a.Konva._global;function v(C,w,x){if(C==="rotater")return x;w+=t.Util.degToRad(d[C]||0);const R=(t.Util.radToDeg(w)%360+360)%360;return t.Util._inRange(R,315+22.5,360)||t.Util._inRange(R,0,22.5)?"ns-resize":t.Util._inRange(R,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(R,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(R,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(R,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(R,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(R,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(R,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+R),"pointer")}const S=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function P(C){return{x:C.x+C.width/2*Math.cos(C.rotation)+C.height/2*Math.sin(-C.rotation),y:C.y+C.height/2*Math.cos(C.rotation)+C.width/2*Math.sin(C.rotation)}}function f(C,w,x){const R=x.x+(C.x-x.x)*Math.cos(w)-(C.y-x.y)*Math.sin(w),k=x.y+(C.x-x.x)*Math.sin(w)+(C.y-x.y)*Math.cos(w);return{...C,rotation:C.rotation+w,x:R,y:k}}function h(C,w){const x=P(C);return f(C,w,x)}function m(C,w,x){let R=w;for(let k=0;k<C.length;k++){const I=a.Konva.getAngle(C[k]),U=Math.abs(I-w)%(Math.PI*2);Math.min(U,Math.PI*2-U)<x&&(R=I)}return R}let b=0,T=class extends s.Group{constructor(w){super(w),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(w){return this.setNode(w),this}setNode(w){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([w])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(w=[]){this._nodes&&this._nodes.length&&this.detach();const x=w.filter(k=>k.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=w=x,w.length===1&&this.useSingleNodeRotation()?this.rotation(w[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(k=>{const I=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(k._attrsAffectingSize.length){const U=k._attrsAffectingSize.map(D=>D+"Change."+this._getEventNamespace()).join(" ");k.on(U,I)}k.on(p.map(U=>U+`.${this._getEventNamespace()}`).join(" "),I),k.on(`absoluteTransformChange.${this._getEventNamespace()}`,I),this._proxyDrag(k)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(w){let x;w.on(`dragstart.${this._getEventNamespace()}`,R=>{x=w.getAbsolutePosition(),!this.isDragging()&&w!==this.findOne(".back")&&this.startDrag(R,!1)}),w.on(`dragmove.${this._getEventNamespace()}`,R=>{if(!x)return;const k=w.getAbsolutePosition(),I=k.x-x.x,U=k.y-x.y;this.nodes().forEach(D=>{if(D===w||D.isDragging())return;const K=D.getAbsolutePosition();D.setAbsolutePosition({x:K.x+I,y:K.y+U}),D.startDrag(R)}),x=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(w=>{w.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(_),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(_,this.__getNodeRect)}__getNodeShape(w,x=this.rotation(),R){const k=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),I=w.getAbsoluteScale(R),U=w.getAbsolutePosition(R),D=k.x*I.x-w.offsetX()*I.x,K=k.y*I.y-w.offsetY()*I.y,y=(a.Konva.getAngle(w.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),A={x:U.x+D*Math.cos(y)+K*Math.sin(-y),y:U.y+K*Math.cos(y)+D*Math.sin(y),width:k.width*I.x,height:k.height*I.y,rotation:y};return f(A,-a.Konva.getAngle(x),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const x=[];this.nodes().map(y=>{const A=y.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),F=[{x:A.x,y:A.y},{x:A.x+A.width,y:A.y},{x:A.x+A.width,y:A.y+A.height},{x:A.x,y:A.y+A.height}],M=y.getAbsoluteTransform();F.forEach(function(G){const q=M.point(G);x.push(q)})});const R=new t.Transform;R.rotate(-a.Konva.getAngle(this.rotation()));let k=1/0,I=1/0,U=-1/0,D=-1/0;x.forEach(function(y){const A=R.point(y);k===void 0&&(k=U=A.x,I=D=A.y),k=Math.min(k,A.x),I=Math.min(I,A.y),U=Math.max(U,A.x),D=Math.max(D,A.y)}),R.invert();const K=R.point({x:k,y:I});return{x:K.x,y:K.y,width:U-k,height:D-I,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),S.forEach(w=>{this._createAnchor(w)}),this._createAnchor("rotater")}_createAnchor(w){const x=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:w+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),R=this;x.on("mousedown touchstart",function(k){R._handleMouseDown(k)}),x.on("dragstart",k=>{x.stopDrag(),k.cancelBubble=!0}),x.on("dragend",k=>{k.cancelBubble=!0}),x.on("mouseenter",()=>{const k=a.Konva.getAngle(this.rotation()),I=this.rotateAnchorCursor(),U=v(w,k,I);x.getStage().content&&(x.getStage().content.style.cursor=U),this._cursorChange=!0}),x.on("mouseout",()=>{x.getStage().content&&(x.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(x)}_createBack(){const w=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(x,R){const k=R.getParent(),I=k.padding();x.beginPath(),x.rect(-I,-I,R.width()+I*2,R.height()+I*2),x.moveTo(R.width()/2,-I),k.rotateEnabled()&&k.rotateLineVisible()&&x.lineTo(R.width()/2,-k.rotateAnchorOffset()*t.Util._sign(R.height())-I),x.fillStrokeShape(R)},hitFunc:(x,R)=>{if(!this.shouldOverdrawWholeArea())return;const k=this.padding();x.beginPath(),x.rect(-k,-k,R.width()+k*2,R.height()+k*2),x.fillStrokeShape(R)}});this.add(w),this._proxyDrag(w),w.on("dragstart",x=>{x.cancelBubble=!0}),w.on("dragmove",x=>{x.cancelBubble=!0}),w.on("dragend",x=>{x.cancelBubble=!0}),this.on("dragmove",x=>{this.update()})}_handleMouseDown(w){if(this._transforming)return;this._movingAnchorName=w.target.name().split(" ")[0];const x=this._getNodeRect(),R=x.width,k=x.height,I=Math.sqrt(Math.pow(R,2)+Math.pow(k,2));this.sin=Math.abs(k/I),this.cos=Math.abs(R/I),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const U=w.target.getAbsolutePosition(),D=w.target.getStage().getPointerPosition();this._anchorDragOffset={x:D.x-U.x,y:D.y-U.y},b++,this._fire("transformstart",{evt:w.evt,target:this.getNode()}),this._nodes.forEach(K=>{K._fire("transformstart",{evt:w.evt,target:K})})}_handleMouseMove(w){let x,R,k;const I=this.findOne("."+this._movingAnchorName),U=I.getStage();U.setPointersPositions(w);const D=U.getPointerPosition();let K={x:D.x-this._anchorDragOffset.x,y:D.y-this._anchorDragOffset.y};const y=I.getAbsolutePosition();this.anchorDragBoundFunc()&&(K=this.anchorDragBoundFunc()(y,K,w)),I.setAbsolutePosition(K);const A=I.getAbsolutePosition();if(y.x===A.x&&y.y===A.y)return;if(this._movingAnchorName==="rotater"){const W=this._getNodeRect();x=I.x()-W.width/2,R=-I.y()+W.height/2;let O=Math.atan2(-R,x)+Math.PI/2;W.height<0&&(O-=Math.PI);const Z=a.Konva.getAngle(this.rotation())+O,nt=a.Konva.getAngle(this.rotationSnapTolerance()),E=m(this.rotationSnaps(),Z,nt)-W.rotation,L=h(W,E);this._fitNodesInto(L,w);return}const F=this.shiftBehavior();let M;F==="inverted"?M=this.keepRatio()&&!w.shiftKey:F==="none"?M=this.keepRatio():M=this.keepRatio()||w.shiftKey;let G=this.centeredScaling()||w.altKey;if(this._movingAnchorName==="top-left"){if(M){const W=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};k=Math.sqrt(Math.pow(W.x-I.x(),2)+Math.pow(W.y-I.y(),2));const O=this.findOne(".top-left").x()>W.x?-1:1,H=this.findOne(".top-left").y()>W.y?-1:1;x=k*this.cos*O,R=k*this.sin*H,this.findOne(".top-left").x(W.x-x),this.findOne(".top-left").y(W.y-R)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(I.y());else if(this._movingAnchorName==="top-right"){if(M){const W=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};k=Math.sqrt(Math.pow(I.x()-W.x,2)+Math.pow(W.y-I.y(),2));const O=this.findOne(".top-right").x()<W.x?-1:1,H=this.findOne(".top-right").y()>W.y?-1:1;x=k*this.cos*O,R=k*this.sin*H,this.findOne(".top-right").x(W.x+x),this.findOne(".top-right").y(W.y-R)}var q=I.position();this.findOne(".top-left").y(q.y),this.findOne(".bottom-right").x(q.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(I.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(I.x());else if(this._movingAnchorName==="bottom-left"){if(M){const W=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};k=Math.sqrt(Math.pow(W.x-I.x(),2)+Math.pow(I.y()-W.y,2));const O=W.x<I.x()?-1:1,H=I.y()<W.y?-1:1;x=k*this.cos*O,R=k*this.sin*H,I.x(W.x-x),I.y(W.y+R)}q=I.position(),this.findOne(".top-left").x(q.x),this.findOne(".bottom-right").y(q.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(I.y());else if(this._movingAnchorName==="bottom-right"){if(M){const W=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};k=Math.sqrt(Math.pow(I.x()-W.x,2)+Math.pow(I.y()-W.y,2));const O=this.findOne(".bottom-right").x()<W.x?-1:1,H=this.findOne(".bottom-right").y()<W.y?-1:1;x=k*this.cos*O,R=k*this.sin*H,this.findOne(".bottom-right").x(W.x+x),this.findOne(".bottom-right").y(W.y+R)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(G=this.centeredScaling()||w.altKey,G){const W=this.findOne(".top-left"),O=this.findOne(".bottom-right"),H=W.x(),Z=W.y(),nt=this.getWidth()-O.x(),ot=this.getHeight()-O.y();O.move({x:-H,y:-Z}),W.move({x:nt,y:ot})}const B=this.findOne(".top-left").getAbsolutePosition();x=B.x,R=B.y;const X=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),it=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x,y:R,width:X,height:it,rotation:a.Konva.getAngle(this.rotation())},w)}_handleMouseUp(w){this._removeEvents(w)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(w){var x;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const R=this.getNode();b--,this._fire("transformend",{evt:w,target:R}),(x=this.getLayer())===null||x===void 0||x.batchDraw(),R&&this._nodes.forEach(k=>{var I;k._fire("transformend",{evt:w,target:k}),(I=k.getLayer())===null||I===void 0||I.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(w,x){const R=this._getNodeRect(),k=1;if(t.Util._inRange(w.width,-this.padding()*2-k,k)){this.update();return}if(t.Util._inRange(w.height,-this.padding()*2-k,k)){this.update();return}const I=new t.Transform;if(I.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("left")>=0){const M=I.point({x:-this.padding()*2,y:0});w.x+=M.x,w.y+=M.y,w.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=M.x,this._anchorDragOffset.y-=M.y}else if(this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("right")>=0){const M=I.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=M.x,this._anchorDragOffset.y-=M.y,w.width+=this.padding()*2}if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("top")>=0){const M=I.point({x:0,y:-this.padding()*2});w.x+=M.x,w.y+=M.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=M.x,this._anchorDragOffset.y-=M.y,w.height+=this.padding()*2}else if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const M=I.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=M.x,this._anchorDragOffset.y-=M.y,w.height+=this.padding()*2}if(this.boundBoxFunc()){const M=this.boundBoxFunc()(R,w);M?w=M:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const U=1e7,D=new t.Transform;D.translate(R.x,R.y),D.rotate(R.rotation),D.scale(R.width/U,R.height/U);const K=new t.Transform,y=w.width/U,A=w.height/U;this.flipEnabled()===!1?(K.translate(w.x,w.y),K.rotate(w.rotation),K.translate(w.width<0?w.width:0,w.height<0?w.height:0),K.scale(Math.abs(y),Math.abs(A))):(K.translate(w.x,w.y),K.rotate(w.rotation),K.scale(y,A));const F=K.multiply(D.invert());this._nodes.forEach(M=>{var G;const q=M.getParent().getAbsoluteTransform(),B=M.getTransform().copy();B.translate(M.offsetX(),M.offsetY());const X=new t.Transform;X.multiply(q.copy().invert()).multiply(F).multiply(q).multiply(B);const it=X.decompose();M.setAttrs(it),(G=M.getLayer())===null||G===void 0||G.batchDraw()}),this.rotation(t.Util._getRotation(w.rotation)),this._nodes.forEach(M=>{this._fire("transform",{evt:x,target:M}),M._fire("transform",{evt:x,target:M})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(w,x){this.findOne(w).setAttrs(x)}update(){var w;const x=this._getNodeRect();this.rotation(t.Util._getRotation(x.rotation));const R=x.width,k=x.height,I=this.enabledAnchors(),U=this.resizeEnabled(),D=this.padding(),K=this.anchorSize(),y=this.find("._anchor");y.forEach(F=>{F.setAttrs({width:K,height:K,offsetX:K/2,offsetY:K/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:K/2+D,offsetY:K/2+D,visible:U&&I.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:R/2,y:0,offsetY:K/2+D,visible:U&&I.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:R,y:0,offsetX:K/2-D,offsetY:K/2+D,visible:U&&I.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:k/2,offsetX:K/2+D,visible:U&&I.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:R,y:k/2,offsetX:K/2-D,visible:U&&I.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:k,offsetX:K/2+D,offsetY:K/2-D,visible:U&&I.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:R/2,y:k,offsetY:K/2-D,visible:U&&I.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:R,y:k,offsetX:K/2-D,offsetY:K/2-D,visible:U&&I.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:R/2,y:-this.rotateAnchorOffset()*t.Util._sign(k)-D,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:R,height:k,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const A=this.anchorStyleFunc();A&&y.forEach(F=>{A(F)}),(w=this.getLayer())===null||w===void 0||w.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const w=this.findOne("."+this._movingAnchorName);w&&w.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(w){return i.Node.prototype.clone.call(this,w)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};fi.Transformer=T,T.isTransforming=()=>b>0;function N(C){return C instanceof Array||t.Util.warn("enabledAnchors value should be an array"),C instanceof Array&&C.forEach(function(w){S.indexOf(w)===-1&&t.Util.warn("Unknown anchor name: "+w+". Available names are: "+S.join(", "))}),C||[]}return T.prototype.className="Transformer",(0,l._registerNode)(T),e.Factory.addGetterSetter(T,"enabledAnchors",S,N),e.Factory.addGetterSetter(T,"flipEnabled",!0,(0,o.getBooleanValidator)()),e.Factory.addGetterSetter(T,"resizeEnabled",!0),e.Factory.addGetterSetter(T,"anchorSize",10,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"rotateEnabled",!0),e.Factory.addGetterSetter(T,"rotateLineVisible",!0),e.Factory.addGetterSetter(T,"rotationSnaps",[]),e.Factory.addGetterSetter(T,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(T,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderEnabled",!0),e.Factory.addGetterSetter(T,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(T,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"anchorFill","white"),e.Factory.addGetterSetter(T,"anchorCornerRadius",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(T,"borderStrokeWidth",1,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderDash"),e.Factory.addGetterSetter(T,"keepRatio",!0),e.Factory.addGetterSetter(T,"shiftBehavior","default"),e.Factory.addGetterSetter(T,"centeredScaling",!1),e.Factory.addGetterSetter(T,"ignoreStroke",!1),e.Factory.addGetterSetter(T,"padding",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(T,"nodes"),e.Factory.addGetterSetter(T,"node"),e.Factory.addGetterSetter(T,"boundBoxFunc"),e.Factory.addGetterSetter(T,"anchorDragBoundFunc"),e.Factory.addGetterSetter(T,"anchorStyleFunc"),e.Factory.addGetterSetter(T,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(T,"useSingleNodeRotation",!0),e.Factory.backCompat(T,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),fi}var gi={},Js;function vc(){if(Js)return gi;Js=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Wedge=void 0;const t=gt(),e=Mt(),i=ft(),n=pt(),r=ft();let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return gi.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1),t.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),gi}var pi={},Qs;function bc(){if(Qs)return pi;Qs=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Blur=void 0;const t=gt(),e=Rt(),i=pt();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(l,u){const c=l.data,_=l.width,p=l.height;let d,g,v,S,P,f,h,m,b,T,N,C,w,x,R,k,I,U,D,K;const y=u+u+1,A=_-1,F=p-1,M=u+1,G=M*(M+1)/2,q=new n,B=r[u],X=s[u];let it=null,W=q,O=null,H=null;for(let Z=1;Z<y;Z++)W=W.next=new n,Z===M&&(it=W);W.next=q,v=g=0;for(let Z=0;Z<p;Z++){C=w=x=R=S=P=f=h=0,m=M*(k=c[g]),b=M*(I=c[g+1]),T=M*(U=c[g+2]),N=M*(D=c[g+3]),S+=G*k,P+=G*I,f+=G*U,h+=G*D,W=q;for(let nt=0;nt<M;nt++)W.r=k,W.g=I,W.b=U,W.a=D,W=W.next;for(let nt=1;nt<M;nt++)d=g+((A<nt?A:nt)<<2),S+=(W.r=k=c[d])*(K=M-nt),P+=(W.g=I=c[d+1])*K,f+=(W.b=U=c[d+2])*K,h+=(W.a=D=c[d+3])*K,C+=k,w+=I,x+=U,R+=D,W=W.next;O=q,H=it;for(let nt=0;nt<_;nt++)c[g+3]=D=h*B>>X,D!==0?(D=255/D,c[g]=(S*B>>X)*D,c[g+1]=(P*B>>X)*D,c[g+2]=(f*B>>X)*D):c[g]=c[g+1]=c[g+2]=0,S-=m,P-=b,f-=T,h-=N,m-=O.r,b-=O.g,T-=O.b,N-=O.a,d=v+((d=nt+u+1)<A?d:A)<<2,C+=O.r=c[d],w+=O.g=c[d+1],x+=O.b=c[d+2],R+=O.a=c[d+3],S+=C,P+=w,f+=x,h+=R,O=O.next,m+=k=H.r,b+=I=H.g,T+=U=H.b,N+=D=H.a,C-=k,w-=I,x-=U,R-=D,H=H.next,g+=4;v+=_}for(let Z=0;Z<_;Z++){w=x=R=C=P=f=h=S=0,g=Z<<2,m=M*(k=c[g]),b=M*(I=c[g+1]),T=M*(U=c[g+2]),N=M*(D=c[g+3]),S+=G*k,P+=G*I,f+=G*U,h+=G*D,W=q;for(let ot=0;ot<M;ot++)W.r=k,W.g=I,W.b=U,W.a=D,W=W.next;let nt=_;for(let ot=1;ot<=u;ot++)g=nt+Z<<2,S+=(W.r=k=c[g])*(K=M-ot),P+=(W.g=I=c[g+1])*K,f+=(W.b=U=c[g+2])*K,h+=(W.a=D=c[g+3])*K,C+=k,w+=I,x+=U,R+=D,W=W.next,ot<F&&(nt+=_);g=Z,O=q,H=it;for(let ot=0;ot<p;ot++)d=g<<2,c[d+3]=D=h*B>>X,D>0?(D=255/D,c[d]=(S*B>>X)*D,c[d+1]=(P*B>>X)*D,c[d+2]=(f*B>>X)*D):c[d]=c[d+1]=c[d+2]=0,S-=m,P-=b,f-=T,h-=N,m-=O.r,b-=O.g,T-=O.b,N-=O.a,d=Z+((d=ot+M)<F?d:F)*_<<2,S+=C+=O.r=c[d],P+=w+=O.g=c[d+1],f+=x+=O.b=c[d+2],h+=R+=O.a=c[d+3],O=O.next,m+=k=H.r,b+=I=H.g,T+=U=H.b,N+=D=H.a,C-=k,w-=I,x-=U,R-=D,H=H.next,g+=_}}const o=function(u){const c=Math.round(this.blurRadius());c>0&&a(u,c)};return pi.Blur=o,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),pi}var _i={},Zs;function Sc(){if(Zs)return _i;Zs=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Brighten=void 0;const t=gt(),e=Rt(),i=pt(),n=function(r){const s=this.brightness()*255,a=r.data,o=a.length;for(let l=0;l<o;l+=4)a[l]+=s,a[l+1]+=s,a[l+2]+=s};return _i.Brighten=n,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),_i}var mi={},to;function Cc(){if(to)return mi;to=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.Contrast=void 0;const t=gt(),e=Rt(),i=pt(),n=function(r){const s=Math.pow((this.contrast()+100)/100,2),a=r.data,o=a.length;let l=150,u=150,c=150;for(let _=0;_<o;_+=4)l=a[_],u=a[_+1],c=a[_+2],l/=255,l-=.5,l*=s,l+=.5,l*=255,u/=255,u-=.5,u*=s,u+=.5,u*=255,c/=255,c-=.5,c*=s,c+=.5,c*=255,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,c=c<0?0:c>255?255:c,a[_]=l,a[_+1]=u,a[_+2]=c};return mi.Contrast=n,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),mi}var yi={},eo;function xc(){if(eo)return yi;eo=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Emboss=void 0;const t=gt(),e=Rt(),i=At(),n=pt(),r=function(s){const a=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),u=this.embossBlend(),c=s.data,_=s.width,p=s.height,d=_*4;let g=0,v=0,S=p;switch(l){case"top-left":g=-1,v=-1;break;case"top":g=-1,v=0;break;case"top-right":g=-1,v=1;break;case"right":g=0,v=1;break;case"bottom-right":g=1,v=1;break;case"bottom":g=1,v=0;break;case"bottom-left":g=1,v=-1;break;case"left":g=0,v=-1;break;default:i.Util.error("Unknown emboss direction: "+l)}do{const P=(S-1)*d;let f=g;S+f<1&&(f=0),S+f>p&&(f=0);const h=(S-1+f)*_*4;let m=_;do{const b=P+(m-1)*4;let T=v;m+T<1&&(T=0),m+T>_&&(T=0);const N=h+(m-1+T)*4,C=c[b]-c[N],w=c[b+1]-c[N+1],x=c[b+2]-c[N+2];let R=C;const k=R>0?R:-R,I=w>0?w:-w,U=x>0?x:-x;if(I>k&&(R=w),U>k&&(R=x),R*=a,u){const D=c[b]+R,K=c[b+1]+R,y=c[b+2]+R;c[b]=D>255?255:D<0?0:D,c[b+1]=K>255?255:K<0?0:K,c[b+2]=y>255?255:y<0?0:y}else{let D=o-R;D<0?D=0:D>255&&(D=255),c[b]=c[b+1]=c[b+2]=D}}while(--m)}while(--S)};return yi.Emboss=r,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),yi}var vi={},io;function wc(){if(io)return vi;io=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Enhance=void 0;const t=gt(),e=Rt(),i=pt();function n(s,a,o,l,u){const c=o-a,_=u-l;if(c===0)return l+_/2;if(_===0)return l;let p=(s-a)/c;return p=_*p+l,p}const r=function(s){const a=s.data,o=a.length;let l=a[0],u=l,c,_=a[1],p=_,d,g=a[2],v=g,S;const P=this.enhance();if(P===0)return;for(let C=0;C<o;C+=4)c=a[C+0],c<l?l=c:c>u&&(u=c),d=a[C+1],d<_?_=d:d>p&&(p=d),S=a[C+2],S<g?g=S:S>v&&(v=S);u===l&&(u=255,l=0),p===_&&(p=255,_=0),v===g&&(v=255,g=0);let f,h,m,b,T,N;if(P>0)f=u+P*(255-u),h=l-P*(l-0),m=p+P*(255-p),b=_-P*(_-0),T=v+P*(255-v),N=g-P*(g-0);else{const C=(u+l)*.5;f=u+P*(u-C),h=l+P*(l-C);const w=(p+_)*.5;m=p+P*(p-w),b=_+P*(_-w);const x=(v+g)*.5;T=v+P*(v-x),N=g+P*(g-x)}for(let C=0;C<o;C+=4)a[C+0]=n(a[C+0],l,u,h,f),a[C+1]=n(a[C+1],_,p,b,m),a[C+2]=n(a[C+2],g,v,N,T)};return vi.Enhance=r,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),vi}var bi={},no;function Pc(){if(no)return bi;no=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Grayscale=void 0;const t=function(e){const i=e.data,n=i.length;for(let r=0;r<n;r+=4){const s=.34*i[r]+.5*i[r+1]+.16*i[r+2];i[r]=s,i[r+1]=s,i[r+2]=s}};return bi.Grayscale=t,bi}var Si={},ro;function Tc(){if(ro)return Si;ro=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.HSL=void 0;const t=gt(),e=Rt(),i=pt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter);const n=function(r){const s=r.data,a=s.length,o=1,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=this.luminance()*127,_=o*l*Math.cos(u*Math.PI/180),p=o*l*Math.sin(u*Math.PI/180),d=.299*o+.701*_+.167*p,g=.587*o-.587*_+.33*p,v=.114*o-.114*_-.497*p,S=.299*o-.299*_-.328*p,P=.587*o+.413*_+.035*p,f=.114*o-.114*_+.293*p,h=.299*o-.3*_+1.25*p,m=.587*o-.586*_-1.05*p,b=.114*o+.886*_-.2*p;let T,N,C,w;for(let x=0;x<a;x+=4)T=s[x+0],N=s[x+1],C=s[x+2],w=s[x+3],s[x+0]=d*T+g*N+v*C+c,s[x+1]=S*T+P*N+f*C+c,s[x+2]=h*T+m*N+b*C+c,s[x+3]=w};return Si.HSL=n,Si}var Ci={},so;function Ac(){if(so)return Ci;so=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.HSV=void 0;const t=gt(),e=Rt(),i=pt(),n=function(r){const s=r.data,a=s.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=o*l*Math.cos(u*Math.PI/180),_=o*l*Math.sin(u*Math.PI/180),p=.299*o+.701*c+.167*_,d=.587*o-.587*c+.33*_,g=.114*o-.114*c-.497*_,v=.299*o-.299*c-.328*_,S=.587*o+.413*c+.035*_,P=.114*o-.114*c+.293*_,f=.299*o-.3*c+1.25*_,h=.587*o-.586*c-1.05*_,m=.114*o+.886*c-.2*_;for(let b=0;b<a;b+=4){const T=s[b+0],N=s[b+1],C=s[b+2],w=s[b+3];s[b+0]=p*T+d*N+g*C,s[b+1]=v*T+S*N+P*C,s[b+2]=f*T+h*N+m*C,s[b+3]=w}};return Ci.HSV=n,t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ci}var xi={},oo;function Rc(){if(oo)return xi;oo=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Invert=void 0;const t=function(e){const i=e.data,n=i.length;for(let r=0;r<n;r+=4)i[r]=255-i[r],i[r+1]=255-i[r+1],i[r+2]=255-i[r+2]};return xi.Invert=t,xi}var wi={},ao;function Ec(){if(ao)return wi;ao=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Kaleidoscope=void 0;const t=gt(),e=Rt(),i=At(),n=pt(),r=function(o,l,u){const c=o.data,_=l.data,p=o.width,d=o.height,g=u.polarCenterX||p/2,v=u.polarCenterY||d/2;let S=Math.sqrt(g*g+v*v),P=p-g,f=d-v;const h=Math.sqrt(P*P+f*f);S=h>S?h:S;const m=d,b=p,T=360/b*Math.PI/180;for(let N=0;N<b;N+=1){const C=Math.sin(N*T),w=Math.cos(N*T);for(let x=0;x<m;x+=1){P=Math.floor(g+S*x/m*w),f=Math.floor(v+S*x/m*C);let R=(f*p+P)*4;const k=c[R+0],I=c[R+1],U=c[R+2],D=c[R+3];R=(N+x*p)*4,_[R+0]=k,_[R+1]=I,_[R+2]=U,_[R+3]=D}}},s=function(o,l,u){const c=o.data,_=l.data,p=o.width,d=o.height,g=u.polarCenterX||p/2,v=u.polarCenterY||d/2;let S=Math.sqrt(g*g+v*v),P=p-g,f=d-v;const h=Math.sqrt(P*P+f*f);S=h>S?h:S;const m=d,b=p,T=0;let N,C;for(P=0;P<p;P+=1)for(f=0;f<d;f+=1){const w=P-g,x=f-v,R=Math.sqrt(w*w+x*x)*m/S;let k=(Math.atan2(x,w)*180/Math.PI+360+T)%360;k=k*b/360,N=Math.floor(k),C=Math.floor(R);let I=(C*p+N)*4;const U=c[I+0],D=c[I+1],K=c[I+2],y=c[I+3];I=(f*p+P)*4,_[I+0]=U,_[I+1]=D,_[I+2]=K,_[I+3]=y}},a=function(o){const l=o.width,u=o.height;let c,_,p,d,g,v,S,P,f,h,m=Math.round(this.kaleidoscopePower());const b=Math.round(this.kaleidoscopeAngle()),T=Math.floor(l*(b%360)/360);if(m<1)return;const N=i.Util.createCanvasElement();N.width=l,N.height=u;const C=N.getContext("2d").getImageData(0,0,l,u);i.Util.releaseCanvas(N),r(o,C,{polarCenterX:l/2,polarCenterY:u/2});let w=l/Math.pow(2,m);for(;w<=8;)w=w*2,m-=1;w=Math.ceil(w);let x=w,R=0,k=x,I=1;for(T+w>l&&(R=x,k=0,I=-1),_=0;_<u;_+=1)for(c=R;c!==k;c+=I)p=Math.round(c+T)%l,f=(l*_+p)*4,g=C.data[f+0],v=C.data[f+1],S=C.data[f+2],P=C.data[f+3],h=(l*_+c)*4,C.data[h+0]=g,C.data[h+1]=v,C.data[h+2]=S,C.data[h+3]=P;for(_=0;_<u;_+=1)for(x=Math.floor(w),d=0;d<m;d+=1){for(c=0;c<x+1;c+=1)f=(l*_+c)*4,g=C.data[f+0],v=C.data[f+1],S=C.data[f+2],P=C.data[f+3],h=(l*_+x*2-c-1)*4,C.data[h+0]=g,C.data[h+1]=v,C.data[h+2]=S,C.data[h+3]=P;x*=2}s(C,o,{})};return wi.Kaleidoscope=a,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),wi}var Pi={},lo;function Mc(){if(lo)return Pi;lo=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Mask=void 0;const t=gt(),e=Rt(),i=pt();function n(p,d,g){let v=(g*p.width+d)*4;const S=[];return S.push(p.data[v++],p.data[v++],p.data[v++],p.data[v++]),S}function r(p,d){return Math.sqrt(Math.pow(p[0]-d[0],2)+Math.pow(p[1]-d[1],2)+Math.pow(p[2]-d[2],2))}function s(p){const d=[0,0,0];for(let g=0;g<p.length;g++)d[0]+=p[g][0],d[1]+=p[g][1],d[2]+=p[g][2];return d[0]/=p.length,d[1]/=p.length,d[2]/=p.length,d}function a(p,d){const g=n(p,0,0),v=n(p,p.width-1,0),S=n(p,0,p.height-1),P=n(p,p.width-1,p.height-1),f=d||10;if(r(g,v)<f&&r(v,P)<f&&r(P,S)<f&&r(S,g)<f){const h=s([v,g,P,S]),m=[];for(let b=0;b<p.width*p.height;b++){const T=r(h,[p.data[b*4],p.data[b*4+1],p.data[b*4+2]]);m[b]=T<f?0:255}return m}}function o(p,d){for(let g=0;g<p.width*p.height;g++)p.data[4*g+3]=d[g]}function l(p,d,g){const v=[1,1,1,1,0,1,1,1,1],S=Math.round(Math.sqrt(v.length)),P=Math.floor(S/2),f=[];for(let h=0;h<g;h++)for(let m=0;m<d;m++){const b=h*d+m;let T=0;for(let N=0;N<S;N++)for(let C=0;C<S;C++){const w=h+N-P,x=m+C-P;if(w>=0&&w<g&&x>=0&&x<d){const R=w*d+x,k=v[N*S+C];T+=p[R]*k}}f[b]=T===2040?255:0}return f}function u(p,d,g){const v=[1,1,1,1,1,1,1,1,1],S=Math.round(Math.sqrt(v.length)),P=Math.floor(S/2),f=[];for(let h=0;h<g;h++)for(let m=0;m<d;m++){const b=h*d+m;let T=0;for(let N=0;N<S;N++)for(let C=0;C<S;C++){const w=h+N-P,x=m+C-P;if(w>=0&&w<g&&x>=0&&x<d){const R=w*d+x,k=v[N*S+C];T+=p[R]*k}}f[b]=T>=1020?255:0}return f}function c(p,d,g){const v=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],S=Math.round(Math.sqrt(v.length)),P=Math.floor(S/2),f=[];for(let h=0;h<g;h++)for(let m=0;m<d;m++){const b=h*d+m;let T=0;for(let N=0;N<S;N++)for(let C=0;C<S;C++){const w=h+N-P,x=m+C-P;if(w>=0&&w<g&&x>=0&&x<d){const R=w*d+x,k=v[N*S+C];T+=p[R]*k}}f[b]=T}return f}const _=function(p){const d=this.threshold();let g=a(p,d);return g&&(g=l(g,p.width,p.height),g=u(g,p.width,p.height),g=c(g,p.width,p.height),o(p,g)),p};return Pi.Mask=_,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Pi}var Ti={},ho;function Fc(){if(ho)return Ti;ho=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Noise=void 0;const t=gt(),e=Rt(),i=pt(),n=function(r){const s=this.noise()*255,a=r.data,o=a.length,l=s/2;for(let u=0;u<o;u+=4)a[u+0]+=l-2*l*Math.random(),a[u+1]+=l-2*l*Math.random(),a[u+2]+=l-2*l*Math.random()};return Ti.Noise=n,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ti}var Ai={},co;function kc(){if(co)return Ai;co=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Pixelate=void 0;const t=gt(),e=At(),i=Rt(),n=pt(),r=function(s){let a=Math.ceil(this.pixelSize()),o=s.width,l=s.height,u=Math.ceil(o/a),c=Math.ceil(l/a),_=s.data;if(a<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let p=0;p<u;p+=1)for(let d=0;d<c;d+=1){let g=0,v=0,S=0,P=0;const f=p*a,h=f+a,m=d*a,b=m+a;let T=0;for(let N=f;N<h;N+=1)if(!(N>=o))for(let C=m;C<b;C+=1){if(C>=l)continue;const w=(o*C+N)*4;g+=_[w+0],v+=_[w+1],S+=_[w+2],P+=_[w+3],T+=1}g=g/T,v=v/T,S=S/T,P=P/T;for(let N=f;N<h;N+=1)if(!(N>=o))for(let C=m;C<b;C+=1){if(C>=l)continue;const w=(o*C+N)*4;_[w+0]=g,_[w+1]=v,_[w+2]=S,_[w+3]=P}}};return Ai.Pixelate=r,t.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Ai}var Ri={},uo;function Oc(){if(uo)return Ri;uo=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Posterize=void 0;const t=gt(),e=Rt(),i=pt(),n=function(r){const s=Math.round(this.levels()*254)+1,a=r.data,o=a.length,l=255/s;for(let u=0;u<o;u+=1)a[u]=Math.floor(a[u]/l)*l};return Ri.Posterize=n,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ri}var Ei={},fo;function Nc(){if(fo)return Ei;fo=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.RGB=void 0;const t=gt(),e=Rt(),i=pt(),n=function(r){const s=r.data,a=s.length,o=this.red(),l=this.green(),u=this.blue();for(let c=0;c<a;c+=4){const _=(.34*s[c]+.5*s[c+1]+.16*s[c+2])/255;s[c]=_*o,s[c+1]=_*l,s[c+2]=_*u,s[c+3]=s[c+3]}};return Ei.RGB=n,t.Factory.addGetterSetter(e.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),t.Factory.addGetterSetter(e.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),Ei}var Mi={},go;function Lc(){if(go)return Mi;go=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.RGBA=void 0;const t=gt(),e=Rt(),i=pt(),n=function(r){const s=r.data,a=s.length,o=this.red(),l=this.green(),u=this.blue(),c=this.alpha();for(let _=0;_<a;_+=4){const p=1-c;s[_]=o*c+s[_]*p,s[_+1]=l*c+s[_+1]*p,s[_+2]=u*c+s[_+2]*p}};return Mi.RGBA=n,t.Factory.addGetterSetter(e.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),t.Factory.addGetterSetter(e.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),Mi}var Fi={},po;function Gc(){if(po)return Fi;po=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Sepia=void 0;const t=function(e){const i=e.data,n=i.length;for(let r=0;r<n;r+=4){const s=i[r+0],a=i[r+1],o=i[r+2];i[r+0]=Math.min(255,s*.393+a*.769+o*.189),i[r+1]=Math.min(255,s*.349+a*.686+o*.168),i[r+2]=Math.min(255,s*.272+a*.534+o*.131)}};return Fi.Sepia=t,Fi}var ki={},_o;function Dc(){if(_o)return ki;_o=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Solarize=void 0;const t=function(e){const i=e.data,n=e.width,r=e.height,s=n*4;let a=r;do{const o=(a-1)*s;let l=n;do{const u=o+(l-1)*4;let c=i[u],_=i[u+1],p=i[u+2];c>127&&(c=255-c),_>127&&(_=255-_),p>127&&(p=255-p),i[u]=c,i[u+1]=_,i[u+2]=p}while(--l)}while(--a)};return ki.Solarize=t,ki}var Oi={},mo;function Ic(){if(mo)return Oi;mo=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Threshold=void 0;const t=gt(),e=Rt(),i=pt(),n=function(r){const s=this.threshold()*255,a=r.data,o=a.length;for(let l=0;l<o;l+=1)a[l]=a[l]<s?0:255};return Oi.Threshold=n,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Oi}var yo;function Uc(){if(yo)return Ke;yo=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.Konva=void 0;const t=sc(),e=oc(),i=lc(),n=hc(),r=cc(),s=dc(),a=uc(),o=Ea(),l=Lr(),u=Ma(),c=fc(),_=gc(),p=pc(),d=_c(),g=Fa(),v=mc(),S=yc(),P=vc(),f=bc(),h=Sc(),m=Cc(),b=xc(),T=wc(),N=Pc(),C=Tc(),w=Ac(),x=Rc(),R=Ec(),k=Mc(),I=Fc(),U=kc(),D=Oc(),K=Nc(),y=Lc(),A=Gc(),F=Dc(),M=Ic();return Ke.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:n.Circle,Ellipse:r.Ellipse,Image:s.Image,Label:a.Label,Tag:a.Tag,Line:o.Line,Path:l.Path,Rect:u.Rect,RegularPolygon:c.RegularPolygon,Ring:_.Ring,Sprite:p.Sprite,Star:d.Star,Text:g.Text,TextPath:v.TextPath,Transformer:S.Transformer,Wedge:P.Wedge,Filters:{Blur:f.Blur,Brighten:h.Brighten,Contrast:m.Contrast,Emboss:b.Emboss,Enhance:T.Enhance,Grayscale:N.Grayscale,HSL:C.HSL,HSV:w.HSV,Invert:x.Invert,Kaleidoscope:R.Kaleidoscope,Mask:k.Mask,Noise:I.Noise,Pixelate:U.Pixelate,Posterize:D.Posterize,RGB:K.RGB,RGBA:y.RGBA,Sepia:A.Sepia,Solarize:F.Solarize,Threshold:M.Threshold}}),Ke}var Bc=hn.exports,vo;function Vc(){if(vo)return hn.exports;vo=1,Object.defineProperty(Bc,"__esModule",{value:!0});const t=Uc();return hn.exports=t.Konva,hn.exports}var Hc=Vc();const Xi=ec(Hc);function mn(t){if(!Xi.autoDrawEnabled){const e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const bo={key:!0,style:!0,elm:!0,isRootInsert:!0},Zn=".vue-konva-event";function ka(t,e,i,n){const r=t.__konvaNode,s={};let a=!1;for(let o in i){if(bo.hasOwnProperty(o))continue;const l=o.slice(0,2)==="on",u=i[o]!==e[o];if(l&&u){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),r?.off(c+Zn,i[o])}!e.hasOwnProperty(o)&&r?.setAttr(o,void 0)}for(let o in e){if(bo.hasOwnProperty(o))continue;let l=o.slice(0,2)==="on";const u=i[o]!==e[o];if(l&&u){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),e[o]&&(r?.off(c+Zn),r?.on(c+Zn,e[o]))}!l&&(e[o]!==i[o]||n&&e[o]!==r?.getAttr(o))&&(a=!0,s[o]=e[o])}a&&r&&(r.setAttrs(s),mn(r))}const Wc="v";function qc(t){function e(i){return i?.__konvaNode?i:i?.parent?e(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return e(t.parent)}function Oa(t){return t.component?t.component.__konvaNode||Oa(t.component.subTree):null}function jc(t){const{el:e,component:i}=t,n=Oa(t);if(e?.tagName&&i&&!n){const r=e.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${r}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return n}function zc(t){const e=r=>!!r&&typeof r=="object"&&"component"in r,i=r=>Array.isArray(r),n=r=>e(r)?[r,...n(r.children)]:i(r)?r.flatMap(n):[];return n(t.children)}function Na(t,e){const i=zc(t),n=[];i.forEach(s=>{const a=jc(s);a&&n.push(a)});let r=!1;n.forEach((s,a)=>{s.getZIndex()!==a&&(s.setZIndex(a),r=!0)}),r&&mn(e)}const Kc=Xi.default?.Stage||Xi.Stage,Yc=Qo({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(t,{attrs:e,slots:i,expose:n}){const r=Mr();if(!r)return;const s=Ji({}),a=Vt(null),o=new Kc({width:t.config.width,height:t.config.height,container:document.createElement("div")});r.__konvaNode=o,c();function l(){return r?.__konvaNode}function u(){return r?.__konvaNode}function c(){if(!r)return;const _=s||{},p={...e,...t.config};ka(r,p,_,t.__useStrictMode),Object.assign(s,p)}return Zi(()=>{a.value&&(a.value.innerHTML="",o.container(a.value)),c()}),Pr(()=>{c(),Na(r.subTree,o)}),ia(()=>{o.destroy()}),Ve(()=>t.config,c,{deep:!0}),n({getStage:u,getNode:l}),()=>wa("div",{ref:a,style:e?.style},i.default?.())}}),Xc=".vue-konva-event",$c={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function Jc(t,e){return Qo({name:t,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:n,slots:r,expose:s}){const a=Mr();if(!a)return;const o=Ji({}),l=new e;a.__konvaNode=l,a.vnode.__konvaNode=l,_();function u(){return a?.__konvaNode}function c(){return a?.__konvaNode}function _(){if(!a)return;const d={};for(const S in a?.vnode.props)S.slice(0,2)==="on"&&(d[S]=a.vnode.props[S]);const g=o||{},v={...n,...i.config,...d};ka(a,v,g,i.__useStrictMode),Object.assign(o,v)}Zi(()=>{const d=qc(a)?.__konvaNode;d&&"add"in d&&d.add(l),mn(l)}),Tr(()=>{mn(l),l.destroy(),l.off(Xc)}),Pr(()=>{_(),Na(a.subTree,l)}),Ve(()=>i.config,_,{deep:!0}),s({getStage:c,getNode:u});const p=$c.hasOwnProperty(t);return()=>p?wa("template",{},r.default?.()):null}})}const Qc={install:(t,e)=>{const i=e?.prefix||Wc,n=Xi.default||Xi,r={Arc:n.Arc,Arrow:n.Arrow,Circle:n.Circle,Ellipse:n.Ellipse,FastLayer:n.FastLayer,Group:n.Group,Image:n.Image,Label:n.Label,Layer:n.Layer,Line:n.Line,Path:n.Path,Rect:n.Rect,RegularPolygon:n.RegularPolygon,Ring:n.Ring,Shape:n.Shape,Sprite:n.Sprite,Star:n.Star,Tag:n.Tag,Text:n.Text,TextPath:n.TextPath,Transformer:n.Transformer,Wedge:n.Wedge,...e?.customNodes};[Yc,...Object.entries(r).map(([s,a])=>Jc(s,a))].forEach(s=>{t.component(`${i}${s.name}`,s)})}},yn="data:image/svg+xml,%3csvg%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='32'%20cy='32'%20r='28'%20fill='%23FFD700'/%3e%3c/svg%3e",vn="data:image/svg+xml,%3csvg%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%20fill-rule='evenodd'%20clip-rule='evenodd'%20stroke-linejoin='round'%20stroke-miterlimit='2'%3e%3cpath%20d='M32,4%20L60,24%20L49,58%20L15,58%20L4,24%20L32,4%20Z'%20fill='%2387CEEB'/%3e%3c/svg%3e",bn="data:image/svg+xml,%3csvg%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20背景：圆角长方形（腺嘌呤）%20--%3e%3crect%20x='2'%20y='10'%20width='60'%20height='44'%20rx='6'%20ry='6'%20fill='%2390EE90'/%3e%3c!--%20字母%20A：用两条斜线和一条横杠，粗白描边，居中%20--%3e%3cg%20stroke='%23fff'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%3e%3cpath%20d='M22,44%20L32,20%20L42,44'/%3e%3cpath%20d='M26,34%20H38'/%3e%3c/g%3e%3ctitle%3eAdenine%20(A)%3c/title%3e%3c/svg%3e",Gr="data:image/svg+xml,%3csvg%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20背景：圆角长方形（胸腺嘧啶）%20--%3e%3crect%20x='2'%20y='10'%20width='60'%20height='44'%20rx='6'%20ry='6'%20fill='%23f2a6b8'/%3e%3c!--%20字母%20T：顶端横杠%20+%20竖线，白色粗体，居中%20--%3e%3cg%20stroke='%23fff'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%3e%3cpath%20d='M20,24%20H44'/%3e%3cpath%20d='M32,24%20V44'/%3e%3c/g%3e%3ctitle%3eThymine%20(T)%3c/title%3e%3c/svg%3e",Dr="data:image/svg+xml,%3csvg%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20背景：圆角长方形（胞嘧啶）%20--%3e%3crect%20x='2'%20y='10'%20width='60'%20height='44'%20rx='6'%20ry='6'%20fill='%237ec8e3'/%3e%3c!--%20字母%20C：圆角矩形路径的一部分，白色粗线%20--%3e%3cg%20fill='none'%20stroke='%23fff'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M42,24%20C40,22%2037,21%2032,21%20C24,21%2020,27%2020,32%20C20,37%2024,43%2032,43%20C37,43%2040,42%2042,40'/%3e%3c/g%3e%3ctitle%3eCytosine%20(C)%3c/title%3e%3c/svg%3e",Ir="data:image/svg+xml,%3csvg%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20背景：圆角长方形（鸟嘌呤）%20--%3e%3crect%20x='2'%20y='10'%20width='60'%20height='44'%20rx='6'%20ry='6'%20fill='%23f3c77a'/%3e%3c!--%20字母%20G：C%20的基础加水平横线，白色粗线居中%20--%3e%3cg%20fill='none'%20stroke='%23fff'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M42,24%20C40,22%2037,21%2032,21%20C24,21%2020,27%2020,32%20C20,37%2024,43%2032,43%20C37,43%2040,42%2043,40'/%3e%3cpath%20d='M34,33%20H44'/%3e%3c/g%3e%3ctitle%3eGuanine%20(G)%3c/title%3e%3c/svg%3e",qe=(t,e)=>{const i=t.__vccOpts||t;for(const[n,r]of e)i[n]=r;return i},Zc=["src"],td=["src"],ed=["src","alt"],id=["src","alt"],nd=["src"],rd=["src"],sd={__name:"NucleotideIcon",props:{letter:{type:String,required:!0},size:{type:Number,default:24},orientation:{type:String,default:"left"}},setup(t){const e=t,i=He(()=>({A:bn,T:Gr,C:Dr,G:Ir})[e.letter]||bn),n=He(()=>({A:"腺嘌呤",T:"胸腺嘧啶",C:"胞嘧啶",G:"鸟嘌呤"})[e.letter]||"碱基"),r=He(()=>({width:`${e.size}px`,height:`${e.size}px`}));return(s,a)=>(Pt(),Ot("div",{class:$i(["nuc-icon",t.orientation])},[t.orientation==="left"?(Pt(),Ot(kt,{key:0},[bt("img",{class:"piece",style:ce(r.value),src:Kt(yn),alt:"磷酸"},null,12,Zc),a[0]||(a[0]=bt("div",{class:"link"},null,-1)),bt("img",{class:"piece",style:ce(r.value),src:Kt(vn),alt:"脱氧核糖"},null,12,td),a[1]||(a[1]=bt("div",{class:"link"},null,-1)),bt("img",{class:"piece base",style:ce(r.value),src:i.value,alt:n.value},null,12,ed)],64)):(Pt(),Ot(kt,{key:1},[bt("img",{class:"piece base",style:ce(r.value),src:i.value,alt:n.value},null,12,id),a[2]||(a[2]=bt("div",{class:"link"},null,-1)),bt("img",{class:"piece",style:ce(r.value),src:Kt(vn),alt:"脱氧核糖"},null,12,nd),a[3]||(a[3]=bt("div",{class:"link"},null,-1)),bt("img",{class:"piece",style:ce(r.value),src:Kt(yn),alt:"磷酸"},null,12,rd)],64))],2))}},od=qe(sd,[["__scopeId","data-v-cf599447"]]),ad={class:"parts-library"},ld={class:"part-groups"},hd=["onClick"],cd=["src","alt"],dd={class:"produced"},ud={class:"prod-grid"},fd=["onClick","title"],gd={__name:"PartsLibrary",props:{parts:{type:Array,required:!0},producedItems:{type:Array,required:!0}},emits:["part-selected","use-produced"],setup(t){return(e,i)=>(Pt(),Ot("div",ad,[i[1]||(i[1]=bt("h3",null,"零件库",-1)),bt("div",ld,[(Pt(!0),Ot(kt,null,zi(t.parts,n=>(Pt(),Ot("div",{key:n.type,class:"part-item",onClick:r=>e.$emit("part-selected",n)},[bt("img",{src:n.src,alt:n.name},null,8,cd),bt("span",null,pr(n.name),1)],8,hd))),128))]),bt("div",dd,[i[0]||(i[0]=bt("div",{class:"prod-title"},"核苷酸列表",-1)),bt("div",ud,[(Pt(!0),Ot(kt,null,zi(t.producedItems,n=>(Pt(),Ot("button",{key:n.id,class:"prod-btn",onClick:r=>e.$emit("use-produced",n),title:n.letter},[ut(od,{letter:n.letter,size:22},null,8,["letter"])],8,fd))),128))])])]))}},pd=qe(gd,[["__scopeId","data-v-e0dec8e6"]]),So=46,_d=35,md={__name:"DuplexCanvas",props:{pairs:{type:Array,required:!0}},setup(t){const e=t,i=Vt(null),n=Vt({width:520,height:260});let r=24,s=56,a=120,o=400,l=210,u=310,c=_d;const _=()=>{if(i.value){const R=i.value.clientWidth||520;n.value.width=Math.max(460,R),a=Math.floor(n.value.width*.25),o=Math.floor(n.value.width*.75);const k=Math.max(36,Math.floor(n.value.width*.085));l=a+k,u=o-k,c=Math.max(50,Math.floor(n.value.width*.05)),r=Math.max(30,c-10),s=Math.max(56,Math.floor(n.value.width*.06))}const x=e.pairs?.length||0;n.value.height=r+(x?(x-1)*So:0)+s+40};Zi(_),Ve(()=>e.pairs?.length,()=>_(),{immediate:!1});const p=x=>{const R=new Image;return R.src=x,R},d=p(vn),g=p(yn),v=x=>p({A:bn,T:Gr,C:Dr,G:Ir}[x]),S=x=>r+x*So+20,P=(x,R)=>{const k=x==="left"?a:o,I=x==="left"?k-c:k+c;return R===0?{x:I,y:S(0)-20}:{x:I,y:S(R-1)+25}},f=(x,R,k,I,U,D=!1)=>({image:x,x:R,y:k,width:I,height:U,scaleX:D?-1:1,offsetX:D?I:0}),h=(x,R,k,I)=>({points:[x,R,k,I],stroke:"#94a3b8",strokeWidth:2}),m=(x,R)=>{const k=P(x,R),I=x==="left"?a:o,U=25,D=x==="left"?Math.PI/4:3*Math.PI/4,K=k.x+U*Math.cos(D),y=k.y+U*Math.sin(D),M=I+13*Math.cos(x==="left"?Math.PI:0);return{points:[k.x,k.y,K,y,M,y],stroke:"#94a3b8",strokeWidth:2}},b=(x,R)=>{const k=P(x,R),I=x==="left"?a:o,U=25,D=x==="left"?Math.PI/4:3*Math.PI/4,K=k.x+U*Math.cos(D),y=k.y+U*Math.sin(D),M=I+13*Math.cos(x==="left"?Math.PI:0);return{points:[k.x,k.y,K,y,M,y],stroke:"#94a3b8",strokeWidth:2}},T=(x,R)=>{const k=P(x,R),I=x==="left"?a:o,U=S(R-1),D=13,K=x==="left"?Math.PI*4/5:Math.PI*1/5,y=I+D*Math.cos(K),A=U+D*Math.sin(K);return h(k.x,k.y,y,A)},N=(x,R)=>{const k=S(R);return x==="left"?h(a+8,k-4,l-14,k-4):h(u+14,k-4,o-8,k-4)},C=(x,R,k)=>{const I=S(x)-8,U=k===2?12:8,D=I+(R-1)*U;return{points:[l+16,D,u-16,D],stroke:"#d37474",strokeWidth:2,dash:[6,4]}},w=x=>x.left==="A"&&x.right==="T"||x.left==="T"&&x.right==="A"?2:3;return(x,R)=>{const k=Qt("v-image"),I=Qt("v-line"),U=Qt("v-layer"),D=Qt("v-stage");return Pt(),Ot("div",{class:"duplex-canvas",ref_key:"wrap",ref:i},[ut(D,{config:n.value},{default:ji(()=>[ut(U,null,{default:ji(()=>[(Pt(!0),Ot(kt,null,zi(t.pairs,(K,y)=>(Pt(),Ot(kt,{key:"row-"+y},[ut(k,{config:f(Kt(d),Kt(a)-13,S(y)-13,26,26)},null,8,["config"]),ut(k,{config:f(v(K.left),Kt(l)-16,S(y)-12,32,24)},null,8,["config"]),ut(I,{config:N("left",y)},null,8,["config"]),ut(k,{config:f(v(K.right),Kt(u)-16,S(y)-12,32,24)},null,8,["config"]),ut(I,{config:N("right",y)},null,8,["config"]),(Pt(!0),Ot(kt,null,zi(w(K),A=>(Pt(),Ee(I,{config:C(y,A,w(K))},null,8,["config"]))),256)),ut(k,{config:f(Kt(d),Kt(o)-13,S(y)-13,26,26,!0)},null,8,["config"]),ut(k,{config:f(Kt(g),P("left",y).x-11,P("left",y).y-11,22,22)},null,8,["config"]),ut(I,{config:m("left",y)},null,8,["config"]),y<t.pairs.length-1?(Pt(),Ee(I,{key:0,config:b("left",y)},null,8,["config"])):sn("",!0),y>0?(Pt(),Ee(I,{key:1,config:T("left",y)},null,8,["config"])):sn("",!0),ut(k,{config:f(Kt(g),P("right",y).x-11,P("right",y).y-11,22,22)},null,8,["config"]),ut(I,{config:m("right",y)},null,8,["config"]),y<t.pairs.length-1?(Pt(),Ee(I,{key:2,config:b("right",y)},null,8,["config"])):sn("",!0),y>0?(Pt(),Ee(I,{key:3,config:T("right",y)},null,8,["config"])):sn("",!0)],64))),128))]),_:1})]),_:1},8,["config"])],512)}}},yd=qe(md,[["__scopeId","data-v-fd29ab36"]]),vd={class:"columns"},bd={class:"build-panel"},Sd={class:"stage-wrap"},Cd={class:"pair-panel"},xd={class:"pairs"},wd={class:"duplex center"},Pd={__name:"AssemblyArea",props:{},emits:["placed","error","complete","pairing-complete","produced"],setup(t,{expose:e,emit:i}){const n=i,r=Vt(null),s=Vt({width:520,height:180});Zi(()=>{if(r.value){const T=r.value.offsetWidth;s.value.width=Math.max(400,Math.floor(T*.55)),s.value.height=180}});const a=["phosphate","deoxyribose","base"],o=Vt(0),l=Vt({phosphate:{x:120,y:140,radius:26,stroke:"#999",dash:[6,4],strokeWidth:2},deoxyribose:{x:220,y:130,sides:5,radius:35,stroke:"#999",dash:[6,4],strokeWidth:2},base:{x:320,y:140,width:70,height:44,cornerRadius:8,stroke:"#999",dash:[6,4],strokeWidth:2}}),u={x:220,y:140},c=He(()=>{const T=s.value.width/2-u.x,N=s.value.height/2-u.y,C={x:l.value.deoxyribose.x+T,y:l.value.deoxyribose.y+N},w=Math.max(96,Math.floor(s.value.width*.18)),x=Math.round(w/Math.SQRT2),R=l.value.phosphate.radius,k=l.value.deoxyribose.radius,I=(l.value.base.height||44)/2,U=x+R,D=Math.max(k,I),K=(U-D)/2;C.y+=K;const y={...l.value.phosphate,x:C.x-x*1.5,y:C.y-x*.78},A={x:C.x+w+15,y:C.y-11,width:l.value.base.width,height:l.value.base.height,cornerRadius:l.value.base.cornerRadius,stroke:l.value.base.stroke,dash:l.value.base.dash,strokeWidth:l.value.base.strokeWidth,offsetX:l.value.base.width/2,offsetY:l.value.base.height/2};return{phosphate:y,deoxyribose:{...l.value.deoxyribose,x:C.x,y:C.y},base:{x:A.x,y:A.y},baseRect:A}}),_=He(()=>{const T=c.value.phosphate,N=c.value.deoxyribose,C=c.value.baseRect,w={stroke:"#999",strokeWidth:2,dash:[6,4]},x=T.radius,R=N.radius,k=T.x+x*.7,I=T.y+x*.7,U=38,D=k+U*Math.cos(Math.PI/4),K=I+U*Math.sin(Math.PI/4),y=N.x+R*Math.cos(Math.PI);N.y;const A=N.x+32,F=N.y-10,M=C.x-C.width/2+0;return{phosToSugar:{...w,points:[k,I,D,K,y,K]},sugarToBase:{...w,points:[A,F,M,C.y]}}}),p=Vt([]),d=(()=>{let T=1;return()=>T++})(),g=T=>({adenine:"A",thymine:"T",cytosine:"C",guanine:"G"})[T]||"?",v=T=>({adenine:"腺嘌呤",thymine:"胸腺嘧啶",cytosine:"胞嘧啶",guanine:"鸟嘌呤"})[T]||"未知碱基",S=T=>{const N=a[o.value],C=!!T.isBase;if(!(N===(C?"base":T.type))){n("error",`顺序错误：当前应放置${N==="phosphate"?"磷酸":N==="deoxyribose"?"脱氧核糖":"含氮碱基"}`);return}const x=C?"base":T.type,R=c.value[x],k=new Image;if(k.src=T.src,p.value.push({id:d(),image:k,x:R.x-32,y:R.y-32,width:64,height:64}),n("placed",{type:x,name:T.name}),o.value+=1,o.value>=a.length){if(C){const I=g(T.type);n("produced",{letter:I}),n("complete",{baseType:T.type,baseName:v(T.type)})}o.value=0,p.value=[]}},P=Vt([]),f=Vt({letter:null,id:null}),h=(T,N)=>T==="A"&&N==="T"||T==="T"&&N==="A"||T==="C"&&N==="G"||T==="G"&&N==="C";function m(T,N){if(!h(T,N)){n("error","配对错误：请按照 A-T 或 C-G 的规则进行配对"),f.value={letter:null,id:null};return}P.value.push({left:T,right:N}),f.value={letter:null,id:null},P.value.length>=2&&n("pairing-complete")}function b(T){if(!f.value.letter)f.value={letter:T,id:null},n("placed",{type:"candidate",name:T});else{const N=f.value.letter;m(N,T)}}return e({handleSelected:S,selectFromLibrary:b}),(T,N)=>{const C=Qt("v-circle"),w=Qt("v-regular-polygon"),x=Qt("v-rect"),R=Qt("v-line"),k=Qt("v-image"),I=Qt("v-layer"),U=Qt("v-stage");return Pt(),Ot("div",{class:"assembly-area",ref_key:"container",ref:r},[bt("div",vd,[bt("div",bd,[N[0]||(N[0]=bt("div",{class:"panel-title"},"组装核苷酸",-1)),bt("div",Sd,[ut(U,{config:s.value},{default:ji(()=>[ut(I,null,{default:ji(()=>[ut(C,{config:c.value.phosphate},null,8,["config"]),ut(w,{config:c.value.deoxyribose},null,8,["config"]),ut(x,{config:c.value.baseRect},null,8,["config"]),ut(R,{config:_.value.phosToSugar},null,8,["config"]),ut(R,{config:_.value.sugarToBase},null,8,["config"]),(Pt(!0),Ot(kt,null,zi(p.value,D=>(Pt(),Ee(k,{key:D.id,config:D},null,8,["config"]))),128))]),_:1})]),_:1},8,["config"])])]),bt("div",Cd,[N[1]||(N[1]=bt("div",{class:"panel-title"},"碱基配对",-1)),bt("div",xd,[bt("div",wd,[ut(yd,{pairs:P.value},null,8,["pairs"])])])])])],512)}}},Td=qe(Pd,[["__scopeId","data-v-c5c7342d"]]),Ad={__name:"FeedbackPanel",props:{message:String,messageType:String},setup(t){return(e,i)=>(Pt(),Ot("div",{class:$i(["feedback-panel",t.messageType])},[bt("p",null,pr(t.message),1)],2))}},Rd=qe(Ad,[["__scopeId","data-v-43bb3357"]]),Ed={class:"dna-puzzler"},Md={__name:"DnaPuzzler",setup(t){const e=Vt(null),i=Vt("点击“磷酸→脱氧核糖→碱基”组装核苷酸；左侧列表中出现的字母图标可无限次用于 A-T、C-G 配对。"),n=Vt("info"),r=Vt([{type:"phosphate",name:"磷酸",src:yn},{type:"deoxyribose",name:"脱氧核糖",src:vn},{type:"adenine",name:"腺嘌呤",src:bn,isBase:!0},{type:"thymine",name:"胸腺嘧啶",src:Gr,isBase:!0},{type:"cytosine",name:"胞嘧啶",src:Dr,isBase:!0},{type:"guanine",name:"鸟嘌呤",src:Ir,isBase:!0}]),s=Vt([]),a=d=>{i.value=`你选择了 ${d.name}。`,n.value="info",e.value?.handleSelected(d)},o=d=>{i.value=`已放置：${d.name}`,n.value="success"},l=d=>{i.value=d,n.value="error"},u=d=>{i.value=`完成：${d.baseName}脱氧核糖核苷酸。`,n.value="success"},c=({letter:d})=>{s.value.find(g=>g.letter===d)||s.value.push({id:d,letter:d}),i.value=`已解锁：${d} 型核苷酸，可无限使用`,n.value="success"},_=d=>{e.value?.selectFromLibrary(d.letter)},p=()=>{i.value="配对完成！已构建 DNA 双链的局部片段。",n.value="success"};return(d,g)=>(Pt(),Ot("div",Ed,[ut(pd,{parts:r.value,"produced-items":s.value,onPartSelected:a,onUseProduced:_},null,8,["parts","produced-items"]),ut(Td,{ref_key:"assemblyArea",ref:e,onPlaced:o,onError:l,onComplete:u,onProduced:c,onPairingComplete:p},null,512),ut(Rd,{message:i.value,"message-type":n.value},null,8,["message","message-type"])]))}},Fd=qe(Md,[["__scopeId","data-v-37ee4ebe"]]),kd={id:"app"},Od={__name:"App",setup(t){return(e,i)=>(Pt(),Ot("div",kd,[i[0]||(i[0]=bt("h1",null,"DNA 结构互动拼图",-1)),ut(Fd)]))}};Qh(Od).use(Qc).mount("#app");
